(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{19810:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>eS});var a={};s.r(a);var r={};s.r(r);var n=s(95155),i=s(12115),l=s(72713),o=s(84616),c=s(37108),d=s(33109),m=s(1243),u=s(69074),x=s(47924),p=s(97168),h=s(88482),j=s(88145),g=s(34964),v=s(5623),f=s(13717),y=s(62525),N=s(67133),b=s(53999);function w(e){var t,s;let{product:a,onEdit:r,onDelete:o,onViewStock:d,onViewMovements:x,className:g}=e,[w,_]=(0,i.useState)(!1),k=void 0!==a.current_stock&&void 0!==a.minimum_stock&&a.current_stock<=a.minimum_stock,C=null==(t=a.batches)?void 0:t.some(e=>{if(!e.expiry_date)return!1;let t=new Date(e.expiry_date),s=new Date;return s.setDate(s.getDate()+30),t<=s}),D=k?{label:"Estoque Baixo",variant:"destructive"}:0===a.current_stock?{label:"Sem Estoque",variant:"destructive"}:{label:"Em Estoque",variant:"default"};return(0,n.jsxs)(h.Zp,{className:(0,b.cn)("hover:shadow-md transition-all duration-200 group relative",k&&"border-orange-200 bg-orange-50/30",0===a.current_stock&&"border-red-200 bg-red-50/30",g),children:[(0,n.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1",children:[k&&(0,n.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full",title:"Estoque baixo"}),C&&(0,n.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full",title:"Produto vencendo"})]}),(0,n.jsx)(h.aR,{className:"pb-3",children:(0,n.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium line-clamp-2 group-hover:text-blue-600 transition-colors",children:a.name}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["C\xf3digo: ",a.code]}),!a.is_active&&(0,n.jsx)(j.E,{variant:"secondary",className:"text-xs",children:"Inativo"})]})]}),(0,n.jsxs)(N.rI,{open:w,onOpenChange:_,children:[(0,n.jsx)(N.ty,{asChild:!0,children:(0,n.jsx)(p.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,n.jsx)(v.A,{className:"h-4 w-4"})})}),(0,n.jsxs)(N.SQ,{align:"end",className:"w-48",children:[r&&(0,n.jsxs)(N._2,{onClick:()=>r(a),children:[(0,n.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Editar Produto"]}),d&&(0,n.jsxs)(N._2,{onClick:()=>d(a),children:[(0,n.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Gerenciar Estoque"]}),x&&(0,n.jsxs)(N._2,{onClick:()=>x(a),children:[(0,n.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Ver Movimenta\xe7\xf5es"]}),o&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N.mB,{}),(0,n.jsxs)(N._2,{onClick:()=>o(a),className:"text-red-600 focus:text-red-600",children:[(0,n.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})]})}),(0,n.jsxs)(h.Wu,{className:"pt-0 space-y-3",children:[a.category&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"Categoria:"}),(0,n.jsx)(j.E,{variant:"outline",className:"text-xs",children:a.category.name})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"Estoque Atual:"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:(0,b.cn)("text-sm font-medium",k?"text-orange-600":0===a.current_stock?"text-red-600":"text-gray-900"),children:[a.current_stock||0," ",a.unit]}),(0,n.jsx)(j.E,{variant:D.variant,className:"text-xs",children:D.label})]})]}),void 0!==a.minimum_stock&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"Estoque M\xednimo:"}),(0,n.jsxs)("span",{className:"text-xs text-gray-600",children:[a.minimum_stock," ",a.unit]})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"Pre\xe7o Unit\xe1rio:"}),(0,n.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["R$ ",(null==(s=a.unit_price)?void 0:s.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}))||"0,00"]})]}),a.current_stock&&a.unit_price&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"Valor Total:"}),(0,n.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["R$ ",(a.current_stock*a.unit_price).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(k||C)&&(0,n.jsxs)("div",{className:"pt-2 border-t space-y-1",children:[k&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-orange-600",children:[(0,n.jsx)(m.A,{className:"h-3 w-3"}),(0,n.jsx)("span",{className:"text-xs",children:"Estoque baixo - reabastecer"})]}),C&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-red-600",children:[(0,n.jsx)(u.A,{className:"h-3 w-3"}),(0,n.jsx)("span",{className:"text-xs",children:"Lotes pr\xf3ximos ao vencimento"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,n.jsxs)(p.$,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:()=>null==r?void 0:r(a),children:[(0,n.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Editar"]}),(0,n.jsxs)(p.$,{size:"sm",variant:"outline",className:"flex-1 text-xs",onClick:()=>null==d?void 0:d(a),children:[(0,n.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"Estoque"]})]})]})]})}var _=s(49026),k=s(99840),C=s(89852),D=s(82714),A=s(23861),S=s(381),E=s(27809),L=s(92657),T=s(54416),q=s(15891),R=s(63008),P=s(4573);function M(e){let{lowStockItems:t,expiringItems:s,isLoading:a=!1,onCreatePurchaseOrder:r,onDismissAlert:l,onUpdateStockLimits:o}=e,[d,x]=(0,i.useState)(!1),[g,v]=(0,i.useState)(null),[f,y]=(0,i.useState)(""),[N,b]=(0,i.useState)(""),[w,M]=(0,i.useState)({lowStockEnabled:!0,expiringEnabled:!0,expiringDays:30,emailNotifications:!0,systemNotifications:!0}),B=e=>{let t=new Date(e),s=new Date,a=Math.ceil((t.getTime()-s.getTime())/864e5);return a<=7?"critical":a<=30?"warning":"info"},I=t.length+s.length,F=s.filter(e=>"critical"===B(e.expiry_date)).length;return a?(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(A.A,{className:"h-5 w-5"}),"Alertas de Estoque"]})}),(0,n.jsx)(h.Wu,{children:(0,n.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(A.A,{className:"h-5 w-5"}),"Alertas de Estoque",I>0&&(0,n.jsx)(j.E,{variant:F>0?"destructive":"secondary",children:I})]}),(0,n.jsxs)(k.lG,{open:d,onOpenChange:x,children:[(0,n.jsx)(k.zM,{asChild:!0,children:(0,n.jsxs)(p.$,{variant:"outline",size:"sm",children:[(0,n.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"Configura\xe7\xf5es"]})}),(0,n.jsxs)(k.Cf,{children:[(0,n.jsx)(k.c7,{children:(0,n.jsx)(k.L3,{children:"Configura\xe7\xf5es de Alertas"})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(D.Label,{children:"Alertas de estoque baixo"}),(0,n.jsx)("input",{type:"checkbox",checked:w.lowStockEnabled,onChange:e=>M(t=>({...t,lowStockEnabled:e.target.checked}))})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(D.Label,{children:"Alertas de vencimento"}),(0,n.jsx)("input",{type:"checkbox",checked:w.expiringEnabled,onChange:e=>M(t=>({...t,expiringEnabled:e.target.checked}))})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{children:"Dias para alerta de vencimento"}),(0,n.jsx)(C.p,{type:"number",value:w.expiringDays,onChange:e=>M(t=>({...t,expiringDays:parseInt(e.target.value)})),min:"1",max:"365"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(D.Label,{children:"Notifica\xe7\xf5es por email"}),(0,n.jsx)("input",{type:"checkbox",checked:w.emailNotifications,onChange:e=>M(t=>({...t,emailNotifications:e.target.checked}))})]})]})]})]})]})}),0===I?(0,n.jsx)(h.Wu,{children:(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)(A.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,n.jsx)("p",{children:"Nenhum alerta ativo no momento"}),(0,n.jsx)("p",{className:"text-sm",children:"Todos os produtos est\xe3o com estoque adequado"})]})}):(0,n.jsx)(h.Wu,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,n.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg border border-orange-200",children:[(0,n.jsx)(c.A,{className:"h-8 w-8 mx-auto mb-2 text-orange-600"}),(0,n.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:t.length}),(0,n.jsx)("div",{className:"text-sm text-orange-700",children:"Estoque Baixo"})]}),(0,n.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,n.jsx)(u.A,{className:"h-8 w-8 mx-auto mb-2 text-red-600"}),(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:s.length}),(0,n.jsx)("div",{className:"text-sm text-red-700",children:"Pr\xf3ximos ao Vencimento"})]})]})})]}),t.length>0&&(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2 text-orange-600",children:[(0,n.jsx)(c.A,{className:"h-5 w-5"}),"Produtos com Estoque Baixo (",t.length,")"]})}),(0,n.jsx)(h.Wu,{children:(0,n.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,n.jsxs)(_.Fc,{className:"border-orange-200 bg-orange-50",children:[(0,n.jsx)(m.A,{className:"h-4 w-4 text-orange-600"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-orange-800",children:e.product_name}),(0,n.jsxs)("p",{className:"text-sm text-orange-700",children:["C\xf3digo: ",e.product_code]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(j.E,{variant:"outline",className:"text-orange-700 border-orange-300",children:["Estoque: ",e.current_stock]}),(0,n.jsxs)(j.E,{variant:"outline",className:"text-orange-700 border-orange-300",children:["M\xednimo: ",e.min_stock]})]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[r&&(0,n.jsxs)(p.$,{size:"sm",onClick:()=>r(e.product_id),className:"bg-orange-600 hover:bg-orange-700",children:[(0,n.jsx)(E.A,{className:"h-4 w-4 mr-1"}),"Criar Pedido"]}),(0,n.jsxs)(p.$,{size:"sm",variant:"outline",onClick:()=>v(e.product_id),children:[(0,n.jsx)(S.A,{className:"h-4 w-4 mr-1"}),"Ajustar Limites"]}),(0,n.jsxs)(p.$,{size:"sm",variant:"outline",children:[(0,n.jsx)(L.A,{className:"h-4 w-4 mr-1"}),"Ver Produto"]}),l&&(0,n.jsx)(p.$,{size:"sm",variant:"ghost",onClick:()=>l(e.product_id,"low_stock"),children:(0,n.jsx)(T.A,{className:"h-4 w-4"})})]})]})]},e.product_id))})})]}),s.length>0&&(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2 text-red-600",children:[(0,n.jsx)(u.A,{className:"h-5 w-5"}),"Produtos Pr\xf3ximos ao Vencimento (",s.length,")"]})}),(0,n.jsx)(h.Wu,{children:(0,n.jsx)("div",{className:"space-y-3",children:s.map(e=>{let t=B(e.expiry_date),s=(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}})(t);return(0,n.jsxs)(_.Fc,{className:"border-red-200 ".concat(s),children:[(0,n.jsx)(u.A,{className:"h-4 w-4"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium",children:e.product_name}),(0,n.jsxs)("p",{className:"text-sm opacity-75",children:["Lote: ",e.batch_number]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(j.E,{variant:"outline",className:s,children:"critical"===t?"Cr\xedtico":"warning"===t?"Aten\xe7\xe3o":"Informativo"}),(0,n.jsxs)(j.E,{variant:"outline",children:["Qtd: ",e.quantity]})]})]}),(0,n.jsxs)("div",{className:"text-sm opacity-75 mb-3",children:["Vence em: ",(0,q.m)(new Date(e.expiry_date),{addSuffix:!0,locale:P.F})," (",(0,R.GP)(new Date(e.expiry_date),"dd/MM/yyyy"),")"]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(p.$,{size:"sm",variant:"outline",children:[(0,n.jsx)(L.A,{className:"h-4 w-4 mr-1"}),"Ver Lote"]}),(0,n.jsxs)(p.$,{size:"sm",variant:"outline",children:[(0,n.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Movimentar"]}),l&&(0,n.jsx)(p.$,{size:"sm",variant:"ghost",onClick:()=>l("".concat(e.product_id,"-").concat(e.batch_number),"expiring"),children:(0,n.jsx)(T.A,{className:"h-4 w-4"})})]})]})]},"".concat(e.product_id,"-").concat(e.batch_number))})})})]}),(0,n.jsx)(k.lG,{open:!!g,onOpenChange:()=>v(null),children:(0,n.jsxs)(k.Cf,{children:[(0,n.jsx)(k.c7,{children:(0,n.jsx)(k.L3,{children:"Ajustar Limites de Estoque"})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"min-stock",children:"Estoque M\xednimo"}),(0,n.jsx)(C.p,{id:"min-stock",type:"number",value:f,onChange:e=>y(e.target.value),placeholder:"Digite o estoque m\xednimo",min:"0"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"max-stock",children:"Estoque M\xe1ximo"}),(0,n.jsx)(C.p,{id:"max-stock",type:"number",value:N,onChange:e=>b(e.target.value),placeholder:"Digite o estoque m\xe1ximo",min:"0"})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,n.jsx)(p.$,{variant:"outline",onClick:()=>v(null),children:"Cancelar"}),(0,n.jsx)(p.$,{onClick:()=>{g&&f&&N&&o&&(o(g,parseInt(f),parseInt(N)),v(null),y(""),b(""))},children:"Salvar Altera\xe7\xf5es"})]})]})]})})]})}var B=s(62177),I=s(90221),F=s(68309),Z=s(87712),U=s(40133),z=s(99474),O=s(36894),V=s(60823),$=s(30070);let W=F.Ik({product_id:F.Yj().min(1,"Produto \xe9 obrigat\xf3rio"),movement_type:F.k5(["IN","OUT","ADJUSTMENT"],{required_error:"Tipo de movimenta\xe7\xe3o \xe9 obrigat\xf3rio"}),quantity:F.ai().min(.01,"Quantidade deve ser maior que zero"),unit_cost:F.ai().min(0,"Custo unit\xe1rio deve ser maior ou igual a zero").optional(),batch_number:F.Yj().optional(),expiry_date:F.p6().optional(),supplier_id:F.Yj().optional(),reference_document:F.Yj().optional(),notes:F.Yj().optional(),movement_date:F.p6()}),J=[{value:"IN",label:"Entrada",icon:o.A,color:"text-green-600"},{value:"OUT",label:"Sa\xedda",icon:Z.A,color:"text-red-600"},{value:"ADJUSTMENT",label:"Ajuste",icon:U.A,color:"text-blue-600"}];function G(e){let{product:t,onSubmit:s,onCancel:a,isLoading:r=!1,className:l}=e,[o,d]=(0,i.useState)(""),[m,x]=(0,i.useState)(!1),g=(0,B.mN)({resolver:(0,I.u)(W),defaultValues:{product_id:(null==t?void 0:t.id)||"",movement_date:new Date,quantity:0,unit_cost:0}}),v=g.watch("movement_type"),f=J.find(e=>e.value===v);return(0,n.jsxs)(h.Zp,{className:(0,b.cn)("w-full max-w-2xl",l),children:[(0,n.jsxs)(h.aR,{children:[(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(c.A,{className:"h-5 w-5"}),"Registrar Movimenta\xe7\xe3o de Estoque"]}),t&&(0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,n.jsx)("span",{children:"Produto:"}),(0,n.jsx)(j.E,{variant:"outline",children:t.name}),(0,n.jsxs)("span",{className:"text-xs",children:["Estoque atual: ",t.current_stock||0," ",t.unit]})]})]}),(0,n.jsx)(h.Wu,{children:(0,n.jsx)($.lV,{...g,children:(0,n.jsxs)("form",{onSubmit:g.handleSubmit(e=>{var t;s({product_id:e.product_id,movement_type:e.movement_type,quantity:e.quantity,movement_date:e.movement_date.toISOString(),unit_cost:e.unit_cost,batch_number:e.batch_number,expiry_date:null==(t=e.expiry_date)?void 0:t.toISOString(),supplier_id:e.supplier_id,reference_document:e.reference_document,notes:e.notes})}),className:"space-y-6",children:[(0,n.jsx)($.zB,{control:g.control,name:"movement_type",render:e=>{let{field:t}=e;return(0,n.jsxs)($.eI,{children:[(0,n.jsx)($.lR,{children:"Tipo de Movimenta\xe7\xe3o *"}),(0,n.jsx)("div",{className:"grid grid-cols-3 gap-3",children:J.map(e=>{let s=e.icon,a=t.value===e.value;return(0,n.jsxs)("button",{type:"button",onClick:()=>{t.onChange(e.value),d(e.value)},className:(0,b.cn)("flex flex-col items-center gap-2 p-4 border rounded-lg transition-all",a?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,n.jsx)(s,{className:(0,b.cn)("h-6 w-6",a?"text-blue-600":e.color)}),(0,n.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.value)})}),(0,n.jsx)($.C5,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsx)($.zB,{control:g.control,name:"quantity",render:e=>{let{field:t}=e;return(0,n.jsxs)($.eI,{children:[(0,n.jsx)($.lR,{children:"Quantidade *"}),(0,n.jsx)($.MJ,{children:(0,n.jsx)(C.p,{type:"number",step:"0.01",min:"0",placeholder:"0.00",...t,onChange:e=>t.onChange(parseFloat(e.target.value)||0)})}),(0,n.jsx)($.C5,{})]})}}),"IN"===v&&(0,n.jsx)($.zB,{control:g.control,name:"unit_cost",render:e=>{let{field:t}=e;return(0,n.jsxs)($.eI,{children:[(0,n.jsx)($.lR,{children:"Custo Unit\xe1rio"}),(0,n.jsx)($.MJ,{children:(0,n.jsx)(C.p,{type:"number",step:"0.01",min:"0",placeholder:"0.00",...t,onChange:e=>t.onChange(parseFloat(e.target.value)||0)})}),(0,n.jsx)($.C5,{})]})}}),(0,n.jsx)($.zB,{control:g.control,name:"movement_date",render:e=>{let{field:t}=e;return(0,n.jsxs)($.eI,{children:[(0,n.jsx)($.lR,{children:"Data da Movimenta\xe7\xe3o *"}),(0,n.jsxs)(V.AM,{children:[(0,n.jsx)(V.Wv,{asChild:!0,children:(0,n.jsx)($.MJ,{children:(0,n.jsxs)(p.$,{variant:"outline",className:(0,b.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,R.GP)(t.value,"PPP",{locale:P.F}):(0,n.jsx)("span",{children:"Selecione uma data"}),(0,n.jsx)(u.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,n.jsx)(V.hl,{className:"w-auto p-0",align:"start",children:(0,n.jsx)(O.V,{mode:"single",selected:t.value,onSelect:t.onChange,disabled:e=>e>new Date,initialFocus:!0})})]}),(0,n.jsx)($.C5,{})]})}})]}),"IN"===v&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",id:"show-batch",checked:m,onChange:e=>x(e.target.checked),className:"rounded"}),(0,n.jsx)(D.Label,{htmlFor:"show-batch",className:"text-sm",children:"Adicionar informa\xe7\xf5es de lote"})]}),m&&"IN"===v&&(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 border rounded-lg bg-gray-50",children:[(0,n.jsx)($.zB,{control:g.control,name:"batch_number",render:e=>{let{field:t}=e;return(0,n.jsxs)($.eI,{children:[(0,n.jsx)($.lR,{children:"N\xfamero do Lote"}),(0,n.jsx)($.MJ,{children:(0,n.jsx)(C.p,{placeholder:"Ex: L001234",...t})}),(0,n.jsx)($.C5,{})]})}}),(0,n.jsx)($.zB,{control:g.control,name:"expiry_date",render:e=>{let{field:t}=e;return(0,n.jsxs)($.eI,{children:[(0,n.jsx)($.lR,{children:"Data de Validade"}),(0,n.jsxs)(V.AM,{children:[(0,n.jsx)(V.Wv,{asChild:!0,children:(0,n.jsx)($.MJ,{children:(0,n.jsxs)(p.$,{variant:"outline",className:(0,b.cn)("w-full pl-3 text-left font-normal",!t.value&&"text-muted-foreground"),children:[t.value?(0,R.GP)(t.value,"PPP",{locale:P.F}):(0,n.jsx)("span",{children:"Selecione uma data"}),(0,n.jsx)(u.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,n.jsx)(V.hl,{className:"w-auto p-0",align:"start",children:(0,n.jsx)(O.V,{mode:"single",selected:t.value,onSelect:t.onChange,disabled:e=>e<new Date,initialFocus:!0})})]}),(0,n.jsx)($.C5,{})]})}})]}),(0,n.jsx)($.zB,{control:g.control,name:"reference_document",render:e=>{let{field:t}=e;return(0,n.jsxs)($.eI,{children:[(0,n.jsx)($.lR,{children:"Documento de Refer\xeancia"}),(0,n.jsx)($.MJ,{children:(0,n.jsx)(C.p,{placeholder:"Ex: NF 12345, Pedido 67890",...t})}),(0,n.jsx)($.C5,{})]})}}),(0,n.jsx)($.zB,{control:g.control,name:"notes",render:e=>{let{field:t}=e;return(0,n.jsxs)($.eI,{children:[(0,n.jsx)($.lR,{children:"Observa\xe7\xf5es"}),(0,n.jsx)($.MJ,{children:(0,n.jsx)(z.T,{placeholder:"Informa\xe7\xf5es adicionais sobre a movimenta\xe7\xe3o...",className:"min-h-[80px]",...t})}),(0,n.jsx)($.C5,{})]})}}),f&&g.watch("quantity")>0&&t&&(0,n.jsxs)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Resumo da Movimenta\xe7\xe3o"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm text-blue-800",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Tipo:"}),(0,n.jsx)("span",{className:f.color,children:f.label})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Quantidade:"}),(0,n.jsxs)("span",{children:[g.watch("quantity")," ",t.unit]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Estoque atual:"}),(0,n.jsxs)("span",{children:[t.current_stock||0," ",t.unit]})]}),(0,n.jsxs)("div",{className:"flex justify-between font-medium",children:[(0,n.jsx)("span",{children:"Novo estoque:"}),(0,n.jsxs)("span",{className:(0,b.cn)("IN"===v?"text-green-600":"OUT"===v?"text-red-600":"text-blue-600"),children:["IN"===v?(t.current_stock||0)+g.watch("quantity"):"OUT"===v?(t.current_stock||0)-g.watch("quantity"):g.watch("quantity")," ",t.unit]})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,n.jsx)(p.$,{type:"submit",disabled:r,className:"flex-1",children:r?"Registrando...":"Registrar Movimenta\xe7\xe3o"}),a&&(0,n.jsx)(p.$,{type:"button",variant:"outline",onClick:a,disabled:r,children:"Cancelar"})]})]})})})]})}var H=s(66932),Y=s(95784),K=s(76037),Q=s(90088);let X=[{value:"all",label:"Todos os produtos",icon:c.A},{value:"low_stock",label:"Estoque baixo",icon:m.A},{value:"out_of_stock",label:"Sem estoque",icon:T.A},{value:"expiring_soon",label:"Vencendo em breve",icon:u.A}];function ee(e){var t;let{filters:s,onFiltersChange:a,categories:r=[],onClearFilters:l,className:o}=e,[d,g]=(0,i.useState)(!1),[v,f]=(0,i.useState)(s),y=(e,t)=>{let s={...v,[e]:t};f(s),a(s)},N=Object.values(v).some(e=>"boolean"==typeof e?e:"string"==typeof e?e.length>0:"number"==typeof e?e>0:null!=e),w=Object.entries(v).filter(e=>{let[t,s]=e;return"search"===t&&!!s||"category_id"===t&&!!s||"min_stock"===t&&"number"==typeof s&&s>0||"max_stock"===t&&"number"==typeof s&&s>0||"is_active"===t&&"boolean"==typeof s||"low_stock_only"===t&&!!s||"expiring_soon"===t&&!!s||!1}).length;return(0,n.jsxs)(h.Zp,{className:(0,b.cn)("w-full",o),children:[(0,n.jsx)(h.aR,{className:"pb-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,n.jsx)(H.A,{className:"h-5 w-5"}),"Filtros",w>0&&(0,n.jsx)(j.E,{variant:"secondary",className:"ml-2",children:w})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[N&&(0,n.jsxs)(p.$,{variant:"ghost",size:"sm",onClick:()=>{let e={search:"",category_id:void 0,min_stock:void 0,max_stock:void 0,is_active:void 0,low_stock_only:!1,expiring_soon:!1};f(e),a(e),null==l||l()},className:"text-gray-500 hover:text-gray-700",children:[(0,n.jsx)(T.A,{className:"h-4 w-4 mr-1"}),"Limpar"]}),(0,n.jsx)(p.$,{variant:"ghost",size:"sm",onClick:()=>g(!d),className:"text-gray-500 hover:text-gray-700",children:d?"Menos filtros":"Mais filtros"})]})]})}),(0,n.jsxs)(h.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,n.jsx)(C.p,{placeholder:"Buscar produtos por nome, c\xf3digo ou descri\xe7\xe3o...",value:v.search||"",onChange:e=>y("search",e.target.value),className:"pl-10"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{className:"text-sm font-medium",children:"Status do Estoque"}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:X.map(e=>{let t=e.icon,s=!1;return"low_stock"===e.value?s=v.low_stock_only||!1:"expiring_soon"===e.value?s=v.expiring_soon||!1:"out_of_stock"===e.value?s=0===v.max_stock:"all"===e.value&&(s=!v.low_stock_only&&!v.expiring_soon&&0!==v.max_stock),(0,n.jsxs)("button",{onClick:()=>{"low_stock"===e.value?(y("low_stock_only",!v.low_stock_only),y("expiring_soon",!1),y("max_stock",void 0)):"expiring_soon"===e.value?(y("expiring_soon",!v.expiring_soon),y("low_stock_only",!1),y("max_stock",void 0)):"out_of_stock"===e.value?(y("max_stock",0===v.max_stock?void 0:0),y("low_stock_only",!1),y("expiring_soon",!1)):(y("low_stock_only",!1),y("expiring_soon",!1),y("max_stock",void 0))},className:(0,b.cn)("flex flex-col items-center gap-1 p-3 border rounded-lg transition-all text-xs",s?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,n.jsx)(t,{className:(0,b.cn)("h-4 w-4",s?"text-blue-600":"text-gray-500")}),(0,n.jsx)("span",{className:"font-medium",children:e.label})]},e.value)})})]}),d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.Separator,{}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{className:"text-sm font-medium",children:"Categoria"}),(0,n.jsxs)(Y.l6,{value:v.category_id||"",onValueChange:e=>y("category_id",e||void 0),children:[(0,n.jsx)(Y.bq,{children:(0,n.jsx)(Y.yv,{placeholder:"Todas as categorias"})}),(0,n.jsxs)(Y.gC,{children:[(0,n.jsx)(Y.eb,{value:"",children:"Todas as categorias"}),r.map(e=>(0,n.jsx)(Y.eb,{value:e.id,children:e.name},e.id))]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{className:"text-sm font-medium",children:"Estoque M\xednimo"}),(0,n.jsx)(C.p,{type:"number",min:"0",placeholder:"0",value:v.min_stock||"",onChange:e=>y("min_stock",e.target.value?parseInt(e.target.value):void 0)})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{className:"text-sm font-medium",children:"Estoque M\xe1ximo"}),(0,n.jsx)(C.p,{type:"number",min:"0",placeholder:"∞",value:v.max_stock||"",onChange:e=>y("max_stock",e.target.value?parseInt(e.target.value):void 0)})]})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(D.Label,{className:"text-sm font-medium",children:"Status do Produto"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Mostrar apenas produtos ativos"})]}),(0,n.jsx)(Q.Switch,{checked:!0===v.is_active,onCheckedChange:e=>y("is_active",!!e||void 0)})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(D.Label,{className:"text-sm font-medium",children:"Apenas Estoque Baixo"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Produtos abaixo do estoque m\xednimo"})]}),(0,n.jsx)(Q.Switch,{checked:v.low_stock_only||!1,onCheckedChange:e=>y("low_stock_only",e)})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(D.Label,{className:"text-sm font-medium",children:"Vencendo em Breve"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Produtos com validade pr\xf3xima"})]}),(0,n.jsx)(Q.Switch,{checked:v.expiring_soon||!1,onCheckedChange:e=>y("expiring_soon",e)})]})]})]}),N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K.Separator,{}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{className:"text-sm font-medium",children:"Filtros Ativos"}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[v.search&&(0,n.jsxs)(j.E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,n.jsx)(x.A,{className:"h-3 w-3"}),"Busca: ",v.search,(0,n.jsx)("button",{onClick:()=>y("search",""),className:"ml-1 hover:bg-gray-300 rounded-full p-0.5",children:(0,n.jsx)(T.A,{className:"h-3 w-3"})})]}),v.category_id&&(0,n.jsxs)(j.E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,n.jsx)(c.A,{className:"h-3 w-3"}),"Categoria: ",(null==(t=r.find(e=>e.id===v.category_id))?void 0:t.name)||"Desconhecida",(0,n.jsx)("button",{onClick:()=>y("category_id",void 0),className:"ml-1 hover:bg-gray-300 rounded-full p-0.5",children:(0,n.jsx)(T.A,{className:"h-3 w-3"})})]}),v.low_stock_only&&(0,n.jsxs)(j.E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,n.jsx)(m.A,{className:"h-3 w-3"}),"Estoque Baixo",(0,n.jsx)("button",{onClick:()=>y("low_stock_only",!1),className:"ml-1 hover:bg-gray-300 rounded-full p-0.5",children:(0,n.jsx)(T.A,{className:"h-3 w-3"})})]}),v.expiring_soon&&(0,n.jsxs)(j.E,{variant:"secondary",className:"flex items-center gap-1",children:[(0,n.jsx)(u.A,{className:"h-3 w-3"}),"Vencendo em Breve",(0,n.jsx)("button",{onClick:()=>y("expiring_soon",!1),className:"ml-1 hover:bg-gray-300 rounded-full p-0.5",children:(0,n.jsx)(T.A,{className:"h-3 w-3"})})]})]})]})]})]})]})}var et=s(68500),es=s(55868),ea=s(24944);function er(e){let{title:t,value:s,subtitle:a,icon:r,trend:i,progress:l,variant:o="default",className:c}=e;return(0,n.jsxs)(h.Zp,{className:(0,b.cn)({default:"border-gray-200",success:"border-green-200 bg-green-50",warning:"border-yellow-200 bg-yellow-50",danger:"border-red-200 bg-red-50"}[o],c),children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium text-gray-600",children:t}),(0,n.jsx)(r,{className:(0,b.cn)("h-4 w-4",{default:"text-gray-600",success:"text-green-600",warning:"text-yellow-600",danger:"text-red-600"}[o])})]}),(0,n.jsx)(h.Wu,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:s}),a&&(0,n.jsx)("p",{className:"text-xs text-gray-500",children:a}),i&&(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[i.isPositive?(0,n.jsx)(d.A,{className:"h-3 w-3 text-green-600"}):(0,n.jsx)(et.A,{className:"h-3 w-3 text-red-600"}),(0,n.jsxs)("span",{className:(0,b.cn)("text-xs font-medium",i.isPositive?"text-green-600":"text-red-600"),children:[i.isPositive?"+":"",i.value,"%"]}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:i.label})]}),l&&(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,n.jsx)("span",{className:"text-gray-500",children:l.label}),(0,n.jsxs)("span",{className:"font-medium",children:[l.value,"/",l.max]})]}),(0,n.jsx)(ea.k,{value:l.value/l.max*100,className:"h-2"})]})]})})]})}function en(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function ei(e){return new Intl.NumberFormat("pt-BR").format(e)}function el(e){let{stats:t,isLoading:s=!1,className:a}=e;if(s)return(0,n.jsx)("div",{className:(0,b.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",a),children:Array.from({length:4}).map((e,t)=>(0,n.jsxs)(h.Zp,{className:"animate-pulse",children:[(0,n.jsx)(h.aR,{className:"pb-2",children:(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),(0,n.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]},t))});let r=t.total_products>0?t.low_stock_products/t.total_products*100:0,i=t.total_products>0?t.expiring_products/t.total_products*100:0;return(0,n.jsxs)("div",{className:(0,b.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",a),children:[(0,n.jsx)(er,{title:"Total de Produtos",value:ei(t.total_products),subtitle:"Produtos cadastrados",icon:c.A,trend:{value:12,isPositive:!0,label:"vs m\xeas anterior"}}),(0,n.jsx)(er,{title:"Valor Total em Estoque",value:en(t.total_stock_value),subtitle:"Valor total do invent\xe1rio",icon:es.A,variant:"success",trend:{value:8.5,isPositive:!0,label:"vs m\xeas anterior"}}),(0,n.jsx)(er,{title:"Produtos com Estoque Baixo",value:ei(t.low_stock_products),subtitle:"".concat(r.toFixed(1),"% do total"),icon:m.A,variant:t.low_stock_products>0?"warning":"default",progress:{value:t.low_stock_products,max:t.total_products,label:"Produtos afetados"}}),(0,n.jsx)(er,{title:"Produtos Vencendo",value:ei(t.expiring_products),subtitle:"".concat(i.toFixed(1),"% do total"),icon:u.A,variant:t.expiring_products>0?"danger":"default",progress:{value:t.expiring_products,max:t.total_products,label:"Produtos pr\xf3ximos ao vencimento"}}),(0,n.jsxs)("div",{className:"col-span-full grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{className:"pb-2",children:(0,n.jsx)(h.ZB,{className:"text-sm font-medium text-gray-600",children:"Categorias Ativas"})}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:ei(t.active_categories)}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Categorias com produtos"})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{className:"pb-2",children:(0,n.jsx)(h.ZB,{className:"text-sm font-medium text-gray-600",children:"Movimenta\xe7\xf5es (30 dias)"})}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:ei(t.recent_movements)}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Entradas e sa\xeddas"})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{className:"pb-2",children:(0,n.jsx)(h.ZB,{className:"text-sm font-medium text-gray-600",children:"Valor M\xe9dio por Produto"})}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:t.total_products>0?en(t.total_stock_value/t.total_products):en(0)}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Valor m\xe9dio em estoque"})]})]})]}),(t.low_stock_products>0||t.expiring_products>0)&&(0,n.jsx)("div",{className:"col-span-full",children:(0,n.jsxs)(h.Zp,{className:"border-orange-200 bg-orange-50",children:[(0,n.jsx)(h.aR,{className:"pb-2",children:(0,n.jsxs)(h.ZB,{className:"text-sm font-medium text-orange-800 flex items-center gap-2",children:[(0,n.jsx)(m.A,{className:"h-4 w-4"}),"Alertas Cr\xedticos"]})}),(0,n.jsx)(h.Wu,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[t.low_stock_products>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("span",{className:"text-sm text-orange-700",children:[t.low_stock_products," produto(s) com estoque baixo"]}),(0,n.jsx)(j.E,{variant:"outline",className:"border-orange-300 text-orange-700",children:"A\xe7\xe3o necess\xe1ria"})]}),t.expiring_products>0&&(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("span",{className:"text-sm text-orange-700",children:[t.expiring_products," produto(s) vencendo em breve"]}),(0,n.jsx)(j.E,{variant:"outline",className:"border-orange-300 text-orange-700",children:"Verificar validade"})]})]})})]})})]})}var eo=s(56671),ec=s(85339),ed=s(57434);let em=F.Ik({name:F.Yj().min(1,"Nome \xe9 obrigat\xf3rio").max(200,"Nome muito longo"),code:F.Yj().min(1,"C\xf3digo \xe9 obrigat\xf3rio").max(50,"C\xf3digo muito longo"),description:F.Yj().optional(),category_id:F.Yj().min(1,"Categoria \xe9 obrigat\xf3ria"),unit_price:F.ai().min(0,"Pre\xe7o deve ser positivo"),minimum_stock:F.ai().min(0,"Estoque m\xednimo deve ser positivo"),maximum_stock:F.ai().min(0,"Estoque m\xe1ximo deve ser positivo"),unit_of_measure:F.Yj().min(1,"Unidade de medida \xe9 obrigat\xf3ria"),manufacturer:F.Yj().optional(),supplier:F.Yj().optional(),barcode:F.Yj().optional(),location:F.Yj().optional(),requires_prescription:F.zM().default(!1),controlled_substance:F.zM().default(!1),is_active:F.zM().default(!0)}).refine(e=>e.maximum_stock>=e.minimum_stock,{message:"Estoque m\xe1ximo deve ser maior ou igual ao m\xednimo",path:["maximum_stock"]});function eu(e){var t,s;let{product:r,categories:i,onSuccess:l,onCancel:o,className:d}=e,m=!!r,u=(0,a.useCreateProduct)(),x=(0,a.useUpdateProduct)(),{register:g,handleSubmit:v,setValue:f,watch:y,formState:{errors:N,isSubmitting:w}}=(0,B.mN)({resolver:(0,I.u)(em),defaultValues:r?{name:r.name,code:r.code,description:r.description||"",category_id:r.category_id,unit_price:r.unit_price,minimum_stock:r.minimum_stock,maximum_stock:r.maximum_stock||r.minimum_stock,unit_of_measure:r.unit_of_measure,manufacturer:r.manufacturer||"",supplier:r.supplier||"",barcode:r.barcode||"",location:r.location||"",requires_prescription:r.requires_prescription||!1,controlled_substance:r.controlled_substance||!1,is_active:null==(s=r.is_active)||s}:{name:"",code:"",description:"",category_id:"",unit_price:0,minimum_stock:0,maximum_stock:0,unit_of_measure:"UN",manufacturer:"",supplier:"",barcode:"",location:"",requires_prescription:!1,controlled_substance:!1,is_active:!0}}),_=y(),k=async e=>{try{m&&r?await x.mutateAsync({id:r.id,...e}):await u.mutateAsync(e),l()}catch(e){}};return(0,n.jsxs)("form",{onSubmit:v(k),className:(0,b.cn)("space-y-6",d),children:[(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(c.A,{className:"h-5 w-5"}),"Informa\xe7\xf5es B\xe1sicas"]})}),(0,n.jsxs)(h.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"name",children:"Nome do Produto *"}),(0,n.jsx)(C.p,{id:"name",...g("name"),placeholder:"Ex: Paracetamol 500mg",className:N.name?"border-red-500":""}),N.name&&(0,n.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,n.jsx)(ec.A,{className:"h-4 w-4"}),N.name.message]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"code",children:"C\xf3digo do Produto *"}),(0,n.jsx)(C.p,{id:"code",...g("code"),placeholder:"Ex: PAR500",className:N.code?"border-red-500":""}),N.code&&(0,n.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,n.jsx)(ec.A,{className:"h-4 w-4"}),N.code.message]})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"description",children:"Descri\xe7\xe3o"}),(0,n.jsx)(z.T,{id:"description",...g("description"),placeholder:"Descri\xe7\xe3o detalhada do produto...",rows:3})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"category_id",children:"Categoria *"}),(0,n.jsxs)(Y.l6,{value:_.category_id,onValueChange:e=>f("category_id",e),children:[(0,n.jsx)(Y.bq,{className:N.category_id?"border-red-500":"",children:(0,n.jsx)(Y.yv,{placeholder:"Selecione uma categoria"})}),(0,n.jsx)(Y.gC,{children:i.map(e=>(0,n.jsx)(Y.eb,{value:e.id,children:e.name},e.id))})]}),N.category_id&&(0,n.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,n.jsx)(ec.A,{className:"h-4 w-4"}),N.category_id.message]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"unit_of_measure",children:"Unidade de Medida *"}),(0,n.jsxs)(Y.l6,{value:_.unit_of_measure,onValueChange:e=>f("unit_of_measure",e),children:[(0,n.jsx)(Y.bq,{children:(0,n.jsx)(Y.yv,{placeholder:"Selecione a unidade"})}),(0,n.jsx)(Y.gC,{children:[{value:"UN",label:"Unidade"},{value:"CX",label:"Caixa"},{value:"FR",label:"Frasco"},{value:"CP",label:"Comprimido"},{value:"ML",label:"Mililitro"},{value:"MG",label:"Miligrama"},{value:"G",label:"Grama"},{value:"KG",label:"Quilograma"},{value:"L",label:"Litro"}].map(e=>(0,n.jsx)(Y.eb,{value:e.value,children:e.label},e.value))})]})]})]})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(es.A,{className:"h-5 w-5"}),"Pre\xe7o e Estoque"]})}),(0,n.jsx)(h.Wu,{className:"space-y-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"unit_price",children:"Pre\xe7o Unit\xe1rio *"}),(0,n.jsx)(C.p,{id:"unit_price",type:"number",step:"0.01",min:"0",...g("unit_price",{valueAsNumber:!0}),placeholder:"0.00",className:N.unit_price?"border-red-500":""}),N.unit_price&&(0,n.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,n.jsx)(ec.A,{className:"h-4 w-4"}),N.unit_price.message]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"minimum_stock",children:"Estoque M\xednimo *"}),(0,n.jsx)(C.p,{id:"minimum_stock",type:"number",min:"0",...g("minimum_stock",{valueAsNumber:!0}),placeholder:"0",className:N.minimum_stock?"border-red-500":""}),N.minimum_stock&&(0,n.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,n.jsx)(ec.A,{className:"h-4 w-4"}),N.minimum_stock.message]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"maximum_stock",children:"Estoque M\xe1ximo *"}),(0,n.jsx)(C.p,{id:"maximum_stock",type:"number",min:"0",...g("maximum_stock",{valueAsNumber:!0}),placeholder:"0",className:N.maximum_stock?"border-red-500":""}),N.maximum_stock&&(0,n.jsxs)("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[(0,n.jsx)(ec.A,{className:"h-4 w-4"}),N.maximum_stock.message]})]})]})})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,n.jsx)(ed.A,{className:"h-5 w-5"}),"Informa\xe7\xf5es Adicionais"]})}),(0,n.jsxs)(h.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"manufacturer",children:"Fabricante"}),(0,n.jsx)(C.p,{id:"manufacturer",...g("manufacturer"),placeholder:"Nome do fabricante"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"supplier",children:"Fornecedor"}),(0,n.jsx)(C.p,{id:"supplier",...g("supplier"),placeholder:"Nome do fornecedor"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"barcode",children:"C\xf3digo de Barras"}),(0,n.jsx)(C.p,{id:"barcode",...g("barcode"),placeholder:"C\xf3digo de barras do produto"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(D.Label,{htmlFor:"location",children:"Localiza\xe7\xe3o"}),(0,n.jsx)(C.p,{id:"location",...g("location"),placeholder:"Ex: Prateleira A1"})]})]})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsx)(h.ZB,{children:"Configura\xe7\xf5es"})}),(0,n.jsxs)(h.Wu,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(D.Label,{children:"Requer Prescri\xe7\xe3o"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Produto controlado que requer prescri\xe7\xe3o m\xe9dica"})]}),(0,n.jsx)(Q.Switch,{checked:_.requires_prescription,onCheckedChange:e=>f("requires_prescription",e)})]}),(0,n.jsx)(K.Separator,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(D.Label,{children:"Subst\xe2ncia Controlada"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Produto sujeito a controle especial"})]}),(0,n.jsx)(Q.Switch,{checked:_.controlled_substance,onCheckedChange:e=>f("controlled_substance",e)})]}),(0,n.jsx)(K.Separator,{}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(D.Label,{children:"Produto Ativo"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Produto dispon\xedvel para uso no sistema"})]}),(0,n.jsx)(Q.Switch,{checked:_.is_active,onCheckedChange:e=>f("is_active",e)})]})]})]}),_.name&&(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsx)(h.ZB,{children:"Pr\xe9-visualiza\xe7\xe3o"})}),(0,n.jsx)(h.Wu,{children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-semibold text-lg",children:_.name}),(0,n.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:_.code}),_.description&&(0,n.jsx)("p",{className:"text-gray-700 text-sm mb-3",children:_.description}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[_.requires_prescription&&(0,n.jsx)(j.E,{variant:"destructive",children:"Requer Prescri\xe7\xe3o"}),_.controlled_substance&&(0,n.jsx)(j.E,{variant:"outline",children:"Controlado"}),!_.is_active&&(0,n.jsx)(j.E,{variant:"secondary",children:"Inativo"})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",(null==(t=_.unit_price)?void 0:t.toFixed(2))||"0.00"]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:["por ",_.unit_of_measure]})]})]})})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,n.jsx)(p.$,{type:"button",variant:"outline",onClick:o,children:"Cancelar"}),(0,n.jsxs)(p.$,{type:"submit",disabled:w,children:[w?"Salvando...":m?"Atualizar":"Criar"," Produto"]})]})]})}var ex=s(63872),ep=s(57471),eh=s(93432);function ej(e){let{className:t}=e,[s,r]=(0,i.useState)({search:"",category_id:void 0,min_stock:void 0,max_stock:void 0,is_active:void 0,low_stock_only:!1,expiring_soon:!1}),[l,d]=(0,i.useState)(1),[m,u]=(0,i.useState)(null),[j,g]=(0,i.useState)(!1),[v,f]=(0,i.useState)(!1),[y,N]=(0,i.useState)(!1),{data:_,isLoading:D,error:A}=(0,a.useProducts)({...s,page:l,page_size:12}),{data:S=[]}=(0,a.useProductCategories)(),E=(0,a.useDeleteProduct)(),L=(null==_?void 0:_.items)||[],T=Math.ceil(((null==_?void 0:_.total)||0)/12),q=async e=>{try{await E.mutateAsync(e),eo.o.success("Produto exclu\xeddo com sucesso!")}catch(e){eo.o.error("Erro ao excluir produto")}},R=e=>{r(e),d(1)},P=()=>{r({search:"",category_id:void 0,min_stock:void 0,max_stock:void 0,is_active:void 0,low_stock_only:!1,expiring_soon:!1}),d(1)};return A?(0,n.jsx)(h.Zp,{className:(0,b.cn)("w-full",t),children:(0,n.jsx)(h.Wu,{className:"flex items-center justify-center py-8",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-red-600 mb-2",children:"Erro ao carregar produtos"}),(0,n.jsx)(p.$,{variant:"outline",onClick:()=>window.location.reload(),children:"Tentar novamente"})]})})}):(0,n.jsxs)("div",{className:(0,b.cn)("space-y-6",t),children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gest\xe3o de Produtos"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerencie o cat\xe1logo de produtos farmac\xeauticos"})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(p.$,{variant:"outline",onClick:()=>N(!y),className:"flex items-center gap-2",children:[(0,n.jsx)(H.A,{className:"h-4 w-4"}),"Filtros"]}),(0,n.jsxs)(k.lG,{open:j,onOpenChange:g,children:[(0,n.jsx)(k.zM,{asChild:!0,children:(0,n.jsxs)(p.$,{className:"flex items-center gap-2",children:[(0,n.jsx)(o.A,{className:"h-4 w-4"}),"Novo Produto"]})}),(0,n.jsxs)(k.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,n.jsx)(k.c7,{children:(0,n.jsx)(k.L3,{children:"Criar Novo Produto"})}),(0,n.jsx)(eu,{categories:S,onSuccess:()=>{g(!1),eo.o.success("Produto criado com sucesso!")},onCancel:()=>g(!1)})]})]})]})]}),y&&(0,n.jsx)(ee,{filters:s,onFiltersChange:R,categories:S,onClearFilters:P}),(0,n.jsxs)("div",{className:"relative max-w-md",children:[(0,n.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,n.jsx)(C.p,{placeholder:"Buscar produtos...",value:s.search||"",onChange:e=>R({...s,search:e.target.value}),className:"pl-10"})]}),D?(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(ex.LoadingSpinner,{size:"lg"})}):0===L.length?(0,n.jsx)(ep.p,{icon:c.A,title:"Nenhum produto encontrado",description:"N\xe3o h\xe1 produtos que correspondam aos filtros aplicados.",action:(0,n.jsx)(p.$,{onClick:P,variant:"outline",children:"Limpar filtros"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:L.map(e=>(0,n.jsx)(w,{product:e,onEdit:()=>{u(e),f(!0)},onDelete:()=>q(e.id),className:"h-full"},e.id))}),T>1&&(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(eh.dK,{currentPage:l,totalPages:T,onPageChange:d})})]}),(0,n.jsx)(k.lG,{open:v,onOpenChange:f,children:(0,n.jsxs)(k.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,n.jsx)(k.c7,{children:(0,n.jsx)(k.L3,{children:"Editar Produto"})}),m&&(0,n.jsx)(eu,{product:m,categories:S,onSuccess:()=>{f(!1),u(null),eo.o.success("Produto atualizado com sucesso!")},onCancel:()=>{f(!1),u(null)}})]})}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsx)(h.aR,{children:(0,n.jsx)(h.ZB,{className:"text-lg",children:"Resumo"})}),(0,n.jsx)(h.Wu,{children:(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==_?void 0:_.total)||0}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Total de Produtos"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-green-600",children:L.filter(e=>(e.current_stock||0)>(e.minimum_stock||0)).length}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Com Estoque OK"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:L.filter(e=>(e.current_stock||0)<=(e.minimum_stock||0)&&(e.current_stock||0)>0).length}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Estoque Baixo"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:L.filter(e=>0===(e.current_stock||0)).length}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Sem Estoque"})]})]})})]})]})}var eg=s(88524);let ev=[{id:"1",itemId:"med001",itemCode:"MED001",itemName:"Dipirona 500mg",itemType:"medication",type:"in",reason:"Compra - Pedido #1234",reference:"PED-1234",quantity:100,previousStock:50,newStock:150,fromLocation:"Fornecedor A",toLocation:"Farm\xe1cia Central",currentLocation:"Farm\xe1cia Central",unitCost:2.5,totalCost:250,batchNumber:"LT2024001",lotNumber:"L240101",expirationDate:new Date(Date.now()+31536e6),responsible:"user001",responsibleName:"Jo\xe3o Silva",approvedBy:"user002",approvedByName:"Maria Santos",approvalDate:new Date(Date.now()-72e5),status:"completed",priority:"medium",movementDate:new Date(Date.now()-864e5),scheduledDate:new Date(Date.now()-864e5),completedDate:new Date(Date.now()-828e5),department:"Farm\xe1cia",supplier:"Fornecedor A",notes:"Entrega conforme pedido",attachments:["nota_fiscal_1234.pdf"],createdAt:new Date(Date.now()-9e7),lastUpdated:new Date(Date.now()-828e5),createdBy:"user001",lastUpdatedBy:"user002"},{id:"2",itemId:"med001",itemCode:"MED001",itemName:"Dipirona 500mg",itemType:"medication",type:"out",reason:"Dispensa\xe7\xe3o - Prescri\xe7\xe3o #5678",reference:"PRESC-5678",quantity:20,previousStock:150,newStock:130,fromLocation:"Farm\xe1cia Central",toLocation:"Enfermaria 1",currentLocation:"Enfermaria 1",unitCost:2.5,totalCost:50,batchNumber:"LT2024001",lotNumber:"L240101",expirationDate:new Date(Date.now()+31536e6),responsible:"user003",responsibleName:"Ana Costa",status:"completed",priority:"high",movementDate:new Date(Date.now()-432e5),completedDate:new Date(Date.now()-432e5),department:"Enfermaria",patient:{id:"pat001",name:"Carlos Oliveira",record:"123456"},prescription:{id:"presc001",number:"PRESC-5678",doctor:"Dr. Pedro Lima"},notes:"Dispensa\xe7\xe3o para paciente internado",createdAt:new Date(Date.now()-468e5),lastUpdated:new Date(Date.now()-432e5),createdBy:"user003",lastUpdatedBy:"user003"},{id:"3",itemId:"sup001",itemCode:"SUP001",itemName:"Luvas Cir\xfargicas Est\xe9reis",itemType:"supply",type:"adjustment",reason:"Ajuste de invent\xe1rio - Contagem f\xedsica",quantity:-5,previousStock:155,newStock:150,currentLocation:"Almoxarifado - Prateleira A1",unitCost:2.5,totalCost:-12.5,responsible:"user004",responsibleName:"Roberto Alves",approvedBy:"user002",approvedByName:"Maria Santos",approvalDate:new Date(Date.now()-216e5),status:"completed",priority:"low",movementDate:new Date(Date.now()-288e5),completedDate:new Date(Date.now()-216e5),department:"Almoxarifado",notes:"Diferen\xe7a encontrada na contagem f\xedsica",createdAt:new Date(Date.now()-324e5),lastUpdated:new Date(Date.now()-216e5),createdBy:"user004",lastUpdatedBy:"user002"},{id:"4",itemId:"equ001",itemCode:"EQU001",itemName:"Monitor Card\xedaco Port\xe1til",itemType:"equipment",type:"transfer",reason:"Transfer\xeancia entre departamentos",quantity:1,previousStock:1,newStock:1,fromLocation:"UTI - Sala 1",toLocation:"Emerg\xeancia - Sala 2",currentLocation:"Emerg\xeancia - Sala 2",unitCost:15e3,totalCost:0,responsible:"user005",responsibleName:"Fernanda Lima",status:"pending",priority:"urgent",movementDate:new Date,scheduledDate:new Date(Date.now()+72e5),department:"Emerg\xeancia",notes:"Transfer\xeancia urgente para atendimento de emerg\xeancia",createdAt:new Date(Date.now()-18e5),lastUpdated:new Date(Date.now()-18e5),createdBy:"user005",lastUpdatedBy:"user005"},{id:"5",itemId:"med002",itemCode:"MED002",itemName:"Insulina NPH",itemType:"medication",type:"loss",reason:"Produto vencido - Descarte",quantity:10,previousStock:25,newStock:15,currentLocation:"Farm\xe1cia Central",unitCost:45,totalCost:450,batchNumber:"INS2023012",lotNumber:"I231201",expirationDate:new Date(Date.now()-2592e6),responsible:"user003",responsibleName:"Ana Costa",approvedBy:"user002",approvedByName:"Maria Santos",approvalDate:new Date(Date.now()-144e5),status:"completed",priority:"medium",movementDate:new Date(Date.now()-216e5),completedDate:new Date(Date.now()-144e5),department:"Farm\xe1cia",notes:"Descarte conforme protocolo de medicamentos vencidos",attachments:["termo_descarte_001.pdf"],createdAt:new Date(Date.now()-252e5),lastUpdated:new Date(Date.now()-144e5),createdBy:"user003",lastUpdatedBy:"user002"}];var ef=s(32960);class ey{getHeaders(){let e={"Content-Type":"application/json"};return this.apiKey&&(e.Authorization="Bearer ".concat(this.apiKey)),e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let s="".concat(this.baseUrl).concat(e),a=await fetch(s,{...t,headers:{...this.getHeaders(),...t.headers}});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));return await a.json()}catch(e){return{success:!1,error:e instanceof Error?e.message:"Erro desconhecido"}}}async getItems(e){let t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[s,a]=e;null!=a&&t.append(s,a.toString())});let s=t.toString();return this.request("/inventory/items".concat(s?"?".concat(s):""))}async getItemById(e){return this.request("/inventory/items/".concat(e))}async createItem(e){return this.request("/inventory/items",{method:"POST",body:JSON.stringify(e)})}async updateItem(e,t){return this.request("/inventory/items/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteItem(e){return this.request("/inventory/items/".concat(e),{method:"DELETE"})}async updateStock(e,t,s,a,r){return this.request("/inventory/items/".concat(e,"/stock"),{method:"PATCH",body:JSON.stringify({quantity:t,type:s,reason:a,location:r})})}async transferItem(e,t,s,a,r){return this.request("/inventory/items/".concat(e,"/transfer"),{method:"POST",body:JSON.stringify({quantity:t,fromLocation:s,toLocation:a,reason:r})})}async getMovements(e,t,s,a,r,n){let i=new URLSearchParams;e&&i.append("itemId",e),t&&i.append("startDate",t),s&&i.append("endDate",s),a&&i.append("type",a),r&&i.append("page",r.toString()),n&&i.append("limit",n.toString());let l=i.toString();return this.request("/inventory/movements".concat(l?"?".concat(l):""))}async createMovement(e){return this.request("/inventory/movements",{method:"POST",body:JSON.stringify(e)})}async getAlerts(e,t,s,a,r,n){let i=new URLSearchParams;void 0!==e&&i.append("isRead",e.toString()),void 0!==t&&i.append("isResolved",t.toString()),s&&i.append("priority",s),a&&i.append("type",a),r&&i.append("page",r.toString()),n&&i.append("limit",n.toString());let l=i.toString();return this.request("/inventory/alerts".concat(l?"?".concat(l):""))}async markAlertAsRead(e){return this.request("/inventory/alerts/".concat(e,"/read"),{method:"PATCH"})}async markAlertAsResolved(e){return this.request("/inventory/alerts/".concat(e,"/resolve"),{method:"PATCH"})}async dismissAlert(e){return this.request("/inventory/alerts/".concat(e),{method:"DELETE"})}async getStats(e,t,s,a){let r=new URLSearchParams;e&&r.append("category",e),t&&r.append("department",t),s&&r.append("startDate",s),a&&r.append("endDate",a);let n=r.toString();return this.request("/inventory/stats".concat(n?"?".concat(n):""))}async generateInventoryReport(e,t){let s=new URLSearchParams;return s.append("format",e),t&&Object.entries(t).forEach(e=>{let[t,a]=e;null!=a&&s.append(t,a.toString())}),this.request("/inventory/reports/inventory",{method:"POST",body:JSON.stringify({format:e,filters:t})})}async generateMovementsReport(e,t,s,a,r){return this.request("/inventory/reports/movements",{method:"POST",body:JSON.stringify({format:e,startDate:t,endDate:s,itemId:a,type:r})})}async generateLowStockReport(e,t,s){return this.request("/inventory/reports/low-stock",{method:"POST",body:JSON.stringify({format:e,category:t,department:s})})}async generateExpiryReport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,s=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return this.request("/inventory/reports/expiry",{method:"POST",body:JSON.stringify({format:e,days:t,category:s,department:a})})}async searchItems(e,t,s,a){let r=new URLSearchParams;r.append("q",e),t&&r.append("category",t),s&&r.append("department",s),a&&r.append("limit",a.toString());let n=r.toString();return this.request("/inventory/search?".concat(n))}async getCategories(){return this.request("/inventory/categories")}async getDepartments(){return this.request("/inventory/departments")}async getLocations(){return this.request("/inventory/locations")}async exportInventory(e,t){return this.request("/inventory/export",{method:"POST",body:JSON.stringify({format:e,filters:t})})}async importInventory(e,t){let s=new FormData;return s.append("file",e),t&&s.append("options",JSON.stringify(t)),this.request("/inventory/import",{method:"POST",body:s,headers:{}})}async getAuditLog(e,t,s,a,r,n,i){let l=new URLSearchParams;e&&l.append("itemId",e),t&&l.append("action",t),s&&l.append("userId",s),a&&l.append("startDate",a),r&&l.append("endDate",r),n&&l.append("page",n.toString()),i&&l.append("limit",i.toString());let o=l.toString();return this.request("/inventory/audit".concat(o?"?".concat(o):""))}async getAlertSettings(){return this.request("/inventory/settings/alerts")}async updateAlertSettings(e){return this.request("/inventory/settings/alerts",{method:"PUT",body:JSON.stringify(e)})}constructor(e="/api",t){this.baseUrl=e,this.apiKey=t}}new ey;let eN={all:["inventory"],products:()=>[...eN.all,"products"],productsList:e=>[...eN.products(),"list",{filters:e}],product:e=>[...eN.products(),"detail",e],productSearch:e=>[...eN.products(),"search",e],categories:()=>[...eN.all,"categories"],category:e=>[...eN.categories(),e],batches:()=>[...eN.all,"batches"],productBatches:e=>[...eN.batches(),"product",e],batch:e=>[...eN.batches(),"detail",e],stockInventory:()=>[...eN.all,"stock"],stockInventoryList:e=>[...eN.stockInventory(),"list",{filters:e}],stockInventoryDetail:e=>[...eN.stockInventory(),"detail",e],stockMovements:()=>[...eN.all,"movements"],stockMovementsList:e=>[...eN.stockMovements(),"list",{filters:e}],productMovements:e=>[...eN.stockMovements(),"product",e],stockAdjustments:()=>[...eN.all,"adjustments"],stockAdjustmentsList:e=>[...eN.stockAdjustments(),"list",e],stockAdjustment:e=>[...eN.stockAdjustments(),"detail",e],stockTransfers:()=>[...eN.all,"transfers"],stockTransfersList:e=>[...eN.stockTransfers(),"list",e],stockTransfer:e=>[...eN.stockTransfers(),"detail",e],purchaseOrders:()=>[...eN.all,"purchase-orders"],purchaseOrdersList:e=>[...eN.purchaseOrders(),"list",e],purchaseOrder:e=>[...eN.purchaseOrders(),"detail",e],inventoryCounts:()=>[...eN.all,"counts"],inventoryCountsList:e=>[...eN.inventoryCounts(),"list",e],inventoryCount:e=>[...eN.inventoryCounts(),"detail",e],supplierPrices:e=>[...eN.all,"supplier-prices",e],reports:()=>[...eN.all,"reports"],lowStockItems:()=>[...eN.reports(),"low-stock"],expiringItems:e=>[...eN.reports(),"expiring",{days:e}],inventoryReport:e=>[...eN.reports(),"inventory",e],stockSummary:e=>[...eN.reports(),"stock-summary",e],movementSummary:e=>[...eN.reports(),"movement-summary",e],stats:()=>[...eN.all,"stats"]};var eb=s(91788),ew=s(71007);let e_={in:"Entrada",out:"Sa\xedda",adjustment:"Ajuste"},ek={in:"default",out:"destructive",adjustment:"secondary"},eC={in:d.A,out:et.A,adjustment:U.A};function eD(e){var t,s,a;let{className:l}=e,[m,v]=(0,i.useState)("movements"),[f,y]=(0,i.useState)(!1),[N,b]=(0,i.useState)(!1),[w,_]=(0,i.useState)(1),[D]=(0,i.useState)(20),[A,S]=(0,i.useState)({type:"all"}),{movements:E,movementStats:L,isLoading:T,error:q,createMovement:M,exportMovements:B,isCreating:I,isExporting:F}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{autoRefresh:t=!1,refreshInterval:s=3e4,enableRealTimeUpdates:a=!1,defaultFilters:r={}}=e,[n,l]=(0,i.useState)([]),[o,c]=(0,i.useState)(!0),[d,m]=(0,i.useState)(!1),[u,x]=(0,i.useState)(null),[p,h]=(0,i.useState)(r),[j,g]=(0,i.useState)("movementDate"),[v,f]=(0,i.useState)("desc"),[y,N]=(0,i.useState)(1),[b,w]=(0,i.useState)(20);(0,i.useEffect)(()=>{_()},[]),(0,i.useEffect)(()=>{if(t){let e=setInterval(()=>{q()},s);return()=>clearInterval(e)}},[t,s]);let _=async()=>{try{c(!0),x(null),await new Promise(e=>setTimeout(e,1e3)),l(ev)}catch(e){x("Erro ao carregar movimenta\xe7\xf5es")}finally{c(!1)}},k=n.filter(e=>{if(p.search){var t,s;let a=p.search.toLowerCase();if(!e.itemName.toLowerCase().includes(a)&&!e.itemCode.toLowerCase().includes(a)&&!e.reason.toLowerCase().includes(a)&&!e.responsibleName.toLowerCase().includes(a)&&!e.department.toLowerCase().includes(a)&&!(null==(t=e.reference)?void 0:t.toLowerCase().includes(a))&&!(null==(s=e.notes)?void 0:s.toLowerCase().includes(a)))return!1}if(p.itemType&&"all"!==p.itemType&&e.itemType!==p.itemType||p.type&&"all"!==p.type&&e.type!==p.type||p.status&&"all"!==p.status&&e.status!==p.status||p.priority&&"all"!==p.priority&&e.priority!==p.priority||p.department&&e.department!==p.department||p.responsible&&e.responsible!==p.responsible||p.supplier&&e.supplier!==p.supplier||p.dateFrom&&e.movementDate<p.dateFrom||p.dateTo&&e.movementDate>p.dateTo||p.amountFrom&&Math.abs(e.totalCost)<p.amountFrom||p.amountTo&&Math.abs(e.totalCost)>p.amountTo||void 0!==p.hasReference&&!!e.reference!==p.hasReference||void 0!==p.hasBatch&&!!e.batchNumber!==p.hasBatch||void 0!==p.hasExpiration&&!!e.expirationDate!==p.hasExpiration||p.pendingApproval&&"pending"!==e.status)return!1;if(p.completedToday){let t=new Date;t.setHours(0,0,0,0);let s=new Date(t);if(s.setDate(s.getDate()+1),!e.completedDate||e.completedDate<t||e.completedDate>=s)return!1}if(p.thisWeek){let t=new Date;if(t.setDate(t.getDate()-7),e.movementDate<t)return!1}if(p.thisMonth){let t=new Date;if(t.setMonth(t.getMonth()-1),e.movementDate<t)return!1}return!0}).sort((e,t)=>{let s=e[j],a=t[j];return(s instanceof Date&&a instanceof Date?(s=s.getTime(),a=a.getTime()):"string"==typeof s&&(s=s.toLowerCase(),a=a.toLowerCase()),s<a)?"asc"===v?-1:1:s>a?"asc"===v?1:-1:0}),C={totalMovements:n.length,totalValue:n.reduce((e,t)=>e+Math.abs(t.totalCost),0),pendingMovements:n.filter(e=>"pending"===e.status).length,completedMovements:n.filter(e=>"completed"===e.status).length,cancelledMovements:n.filter(e=>"cancelled"===e.status).length,inMovements:n.filter(e=>"in"===e.type).length,outMovements:n.filter(e=>"out"===e.type).length,adjustments:n.filter(e=>"adjustment"===e.type).length,transfers:n.filter(e=>"transfer"===e.type).length,returns:n.filter(e=>"return"===e.type).length,losses:n.filter(e=>"loss"===e.type||"expired"===e.type||"damaged"===e.type).length,medicationMovements:n.filter(e=>"medication"===e.itemType).length,equipmentMovements:n.filter(e=>"equipment"===e.itemType).length,supplyMovements:n.filter(e=>"supply"===e.itemType).length,inValue:n.filter(e=>"in"===e.type).reduce((e,t)=>e+t.totalCost,0),outValue:n.filter(e=>"out"===e.type).reduce((e,t)=>e+Math.abs(t.totalCost),0),adjustmentValue:n.filter(e=>"adjustment"===e.type).reduce((e,t)=>e+Math.abs(t.totalCost),0),lossValue:n.filter(e=>["loss","expired","damaged"].includes(e.type)).reduce((e,t)=>e+Math.abs(t.totalCost),0),todayMovements:n.filter(e=>{let t=new Date;t.setHours(0,0,0,0);let s=new Date(t);return s.setDate(s.getDate()+1),e.movementDate>=t&&e.movementDate<s}).length,weekMovements:n.filter(e=>{let t=new Date;return t.setDate(t.getDate()-7),e.movementDate>=t}).length,monthMovements:n.filter(e=>{let t=new Date;return t.setMonth(t.getMonth()-1),e.movementDate>=t}).length,averageProcessingTime:n.filter(e=>e.completedDate&&e.createdAt).reduce((e,t)=>e+(t.completedDate.getTime()-t.createdAt.getTime())/36e5,0)/Math.max(1,n.filter(e=>e.completedDate).length),pendingApprovals:n.filter(e=>"pending"===e.status&&!e.approvedBy).length},D=Math.ceil(k.length/b),A=k.slice((y-1)*b,y*b),S=(0,i.useCallback)(e=>{h(t=>({...t,...e})),N(1)},[]),E=(0,i.useCallback)(()=>{h(r),N(1)},[r]),L=(0,i.useCallback)((e,t)=>{g(e),f(t||(j===e&&"asc"===v?"desc":"asc"))},[j,v]),T=(0,i.useCallback)(e=>{N(Math.max(1,Math.min(e,D)))},[D]),q=(0,i.useCallback)(async()=>{m(!0),await _(),m(!1),eo.o.success("Movimenta\xe7\xf5es atualizadas")},[]),R=(0,i.useCallback)(async e=>{try{return n.find(t=>t.id===e)||null}catch(e){return null}},[n]),P=(0,i.useCallback)(async e=>{try{let t={...e,id:Date.now().toString(),status:"pending",createdAt:new Date,lastUpdated:new Date};return l(e=>[t,...e]),eo.o.success("Movimenta\xe7\xe3o criada com sucesso"),!0}catch(e){return eo.o.error("Erro ao criar movimenta\xe7\xe3o"),!1}},[]),M=(0,i.useCallback)(async(e,t)=>{try{return l(s=>s.map(s=>s.id===e?{...s,...t,lastUpdated:new Date}:s)),eo.o.success("Movimenta\xe7\xe3o atualizada com sucesso"),!0}catch(e){return eo.o.error("Erro ao atualizar movimenta\xe7\xe3o"),!1}},[]),B=(0,i.useCallback)(async e=>{try{return l(t=>t.filter(t=>t.id!==e)),eo.o.success("Movimenta\xe7\xe3o removida com sucesso"),!0}catch(e){return eo.o.error("Erro ao remover movimenta\xe7\xe3o"),!1}},[]),I=(0,i.useCallback)(async(e,t)=>{try{return l(s=>s.map(s=>s.id===e?{...s,status:"approved",approvedBy:t,approvedByName:"Current User",approvalDate:new Date,lastUpdated:new Date}:s)),eo.o.success("Movimenta\xe7\xe3o aprovada com sucesso"),!0}catch(e){return eo.o.error("Erro ao aprovar movimenta\xe7\xe3o"),!1}},[]),F=(0,i.useCallback)(async(e,t,s)=>{try{return l(a=>a.map(a=>a.id===e?{...a,status:"rejected",notes:"".concat(a.notes||""," | Rejeitado: ").concat(t),lastUpdated:new Date,lastUpdatedBy:s}:a)),eo.o.success("Movimenta\xe7\xe3o rejeitada"),!0}catch(e){return eo.o.error("Erro ao rejeitar movimenta\xe7\xe3o"),!1}},[]),Z=(0,i.useCallback)(async(e,t)=>{try{return l(s=>s.map(s=>s.id===e?{...s,status:"completed",completedDate:new Date,lastUpdated:new Date,lastUpdatedBy:t}:s)),eo.o.success("Movimenta\xe7\xe3o conclu\xedda com sucesso"),!0}catch(e){return eo.o.error("Erro ao concluir movimenta\xe7\xe3o"),!1}},[]),U=(0,i.useCallback)(async(e,t,s)=>{try{return l(a=>a.map(a=>a.id===e?{...a,status:"cancelled",notes:"".concat(a.notes||""," | Cancelado: ").concat(t),lastUpdated:new Date,lastUpdatedBy:s}:a)),eo.o.success("Movimenta\xe7\xe3o cancelada"),!0}catch(e){return eo.o.error("Erro ao cancelar movimenta\xe7\xe3o"),!1}},[]),z=(0,i.useCallback)(async(e,t)=>{try{return l(s=>s.map(s=>e.includes(s.id)?{...s,status:"approved",approvedBy:t,approvedByName:"Current User",approvalDate:new Date,lastUpdated:new Date}:s)),eo.o.success("".concat(e.length," movimenta\xe7\xf5es aprovadas")),!0}catch(e){return eo.o.error("Erro na aprova\xe7\xe3o em massa"),!1}},[]),O=(0,i.useCallback)(async(e,t)=>{try{return l(s=>s.map(s=>e.includes(s.id)?{...s,status:"completed",completedDate:new Date,lastUpdated:new Date,lastUpdatedBy:t}:s)),eo.o.success("".concat(e.length," movimenta\xe7\xf5es conclu\xeddas")),!0}catch(e){return eo.o.error("Erro na conclus\xe3o em massa"),!1}},[]),V=(0,i.useCallback)(async(e,t,s)=>{try{return l(a=>a.map(a=>e.includes(a.id)?{...a,status:"cancelled",notes:"".concat(a.notes||""," | Cancelado em massa: ").concat(t),lastUpdated:new Date,lastUpdatedBy:s}:a)),eo.o.success("".concat(e.length," movimenta\xe7\xf5es canceladas")),!0}catch(e){return eo.o.error("Erro no cancelamento em massa"),!1}},[]),$=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv";try{let t=k.map(e=>{var t,s,a,r,n,i;return{ID:e.id,"C\xf3digo do Item":e.itemCode,"Nome do Item":e.itemName,"Tipo do Item":e.itemType,"Tipo de Movimenta\xe7\xe3o":e.type,Motivo:e.reason,Referência:e.reference,Quantidade:e.quantity,"Estoque Anterior":e.previousStock,"Novo Estoque":e.newStock,"Localiza\xe7\xe3o Origem":e.fromLocation,"Localiza\xe7\xe3o Destino":e.toLocation,"Localiza\xe7\xe3o Atual":e.currentLocation,"Custo Unit\xe1rio":e.unitCost,"Custo Total":e.totalCost,"N\xfamero do Lote":e.batchNumber,Lote:e.lotNumber,"Data de Validade":null==(t=e.expirationDate)?void 0:t.toLocaleDateString("pt-BR"),Responsável:e.responsibleName,"Aprovado Por":e.approvedByName,"Data de Aprova\xe7\xe3o":null==(s=e.approvalDate)?void 0:s.toLocaleDateString("pt-BR"),Status:e.status,Prioridade:e.priority,"Data da Movimenta\xe7\xe3o":e.movementDate.toLocaleDateString("pt-BR"),"Data Agendada":null==(a=e.scheduledDate)?void 0:a.toLocaleDateString("pt-BR"),"Data de Conclus\xe3o":null==(r=e.completedDate)?void 0:r.toLocaleDateString("pt-BR"),Departamento:e.department,Fornecedor:e.supplier,Paciente:null==(n=e.patient)?void 0:n.name,Prescrição:null==(i=e.prescription)?void 0:i.number,Observações:e.notes}});return eo.o.success("Dados exportados em formato ".concat(e.toUpperCase())),t}catch(e){return eo.o.error("Erro ao exportar dados"),[]}},[k]),W=(0,i.useCallback)(async e=>{try{let t=e.map((e,t)=>{if(!e.itemId||!e.type||!e.quantity)throw Error("Movimenta\xe7\xe3o na linha ".concat(t+1," est\xe1 incompleta"));return{id:Date.now().toString()+t,itemId:e.itemId,itemCode:e.itemCode||"",itemName:e.itemName||"",itemType:e.itemType||"supply",type:e.type,reason:e.reason||"",reference:e.reference,quantity:Number(e.quantity),previousStock:Number(e.previousStock)||0,newStock:Number(e.newStock)||0,fromLocation:e.fromLocation,toLocation:e.toLocation,currentLocation:e.currentLocation||e.toLocation||"",unitCost:Number(e.unitCost)||0,totalCost:Number(e.totalCost)||0,batchNumber:e.batchNumber,lotNumber:e.lotNumber,expirationDate:e.expirationDate?new Date(e.expirationDate):void 0,responsible:e.responsible||"import",responsibleName:e.responsibleName||"Importa\xe7\xe3o",status:e.status||"pending",priority:e.priority||"medium",movementDate:e.movementDate?new Date(e.movementDate):new Date,scheduledDate:e.scheduledDate?new Date(e.scheduledDate):void 0,department:e.department||"",supplier:e.supplier,notes:e.notes,createdAt:new Date,lastUpdated:new Date,createdBy:"import",lastUpdatedBy:"import"}});return l(e=>[...t,...e]),eo.o.success("".concat(t.length," movimenta\xe7\xf5es importadas")),!0}catch(e){return eo.o.error("Erro ao importar dados: ".concat(e instanceof Error?e.message:"Erro desconhecido")),!1}},[]),J=(0,i.useCallback)(e=>{S({search:e})},[S]),G=(0,i.useCallback)(e=>n.filter(t=>t.itemId===e),[n]),H=(0,i.useCallback)(e=>n.filter(t=>t.type===e),[n]),Y=(0,i.useCallback)(e=>n.filter(t=>t.department===e),[n]),K=(0,i.useCallback)(()=>n.filter(e=>"pending"===e.status),[n]),Q=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=new Date;return t.setDate(t.getDate()-e),n.filter(e=>e.movementDate>=t)},[n]),X=(0,i.useCallback)((e,t)=>n.filter(s=>s.movementDate>=e&&s.movementDate<=t),[n]),ee=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return n.filter(t=>Math.abs(t.totalCost)>=e)},[n]);return{movements:A,allMovements:n,filteredMovements:k,stats:C,loading:o,refreshing:d,error:u,filters:p,sortBy:j,sortOrder:v,currentPage:y,totalPages:D,itemsPerPage:b,setFilters:S,clearFilters:E,setSorting:L,setPage:T,setItemsPerPage:w,refresh:q,getMovement:R,createMovement:P,updateMovement:M,deleteMovement:B,approveMovement:I,rejectMovement:F,completeMovement:Z,cancelMovement:U,bulkApprove:z,bulkComplete:O,bulkCancel:V,exportData:$,importData:W,searchMovements:J,getMovementsByItem:G,getMovementsByType:H,getMovementsByDepartment:Y,getPendingMovements:K,getRecentMovements:Q,getMovementsByDateRange:X,getHighValueMovements:ee}}({page:w,limit:D,...A}),{products:Z,isLoading:z}=(a={page:1,limit:1e3},(0,ef.I)({queryKey:eN.productsList((null==a?void 0:a.filters)||{}),queryFn:()=>r.productService.getAll(a),staleTime:3e5})),O=e=>{S(t=>({...t,...e})),_(1)},V=()=>A.productId||A.type&&"all"!==A.type||A.dateFrom||A.dateTo||A.userId||A.search,$=async e=>{try{await M(e),y(!1)}catch(e){}},W=async()=>{try{await B(A)}catch(e){}},J=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);return q?(0,n.jsx)(h.Zp,{className:l,children:(0,n.jsx)(h.Wu,{className:"p-6",children:(0,n.jsxs)("div",{className:"text-center text-red-600",children:["Erro ao carregar movimenta\xe7\xf5es: ",q.message]})})}):(0,n.jsx)("div",{className:l,children:(0,n.jsxs)(g.Tabs,{value:m,onValueChange:v,className:"w-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)(g.TabsList,{children:[(0,n.jsx)(g.TabsTrigger,{value:"movements",children:"Movimenta\xe7\xf5es"}),(0,n.jsx)(g.TabsTrigger,{value:"stats",children:"Estat\xedsticas"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(p.$,{variant:"outline",size:"sm",onClick:()=>b(!N),className:V()?"border-blue-500 text-blue-600":"",children:[(0,n.jsx)(H.A,{className:"h-4 w-4 mr-2"}),"Filtros",V()&&(0,n.jsx)(j.E,{variant:"secondary",className:"ml-2 h-5 w-5 p-0 text-xs",children:"!"})]}),(0,n.jsxs)(p.$,{variant:"outline",size:"sm",onClick:W,disabled:F,children:[F?(0,n.jsx)(ex.LoadingSpinner,{className:"h-4 w-4 mr-2"}):(0,n.jsx)(eb.A,{className:"h-4 w-4 mr-2"}),"Exportar"]}),(0,n.jsxs)(k.lG,{open:f,onOpenChange:y,children:[(0,n.jsx)(k.zM,{asChild:!0,children:(0,n.jsxs)(p.$,{children:[(0,n.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Nova Movimenta\xe7\xe3o"]})}),(0,n.jsxs)(k.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,n.jsxs)(k.c7,{children:[(0,n.jsx)(k.L3,{children:"Nova Movimenta\xe7\xe3o de Estoque"}),(0,n.jsx)(k.rr,{children:"Registre uma nova movimenta\xe7\xe3o de entrada, sa\xedda ou ajuste de estoque."})]}),(0,n.jsx)(G,{onSubmit:$,onCancel:()=>y(!1),isLoading:I,products:(null==Z?void 0:Z.data)||[]})]})]})]})]}),N&&(0,n.jsxs)(h.Zp,{className:"mb-6",children:[(0,n.jsx)(h.aR,{children:(0,n.jsx)(h.ZB,{className:"text-lg",children:"Filtros"})}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Buscar"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,n.jsx)(C.p,{placeholder:"Buscar por produto, documento...",value:A.search||"",onChange:e=>O({search:e.target.value}),className:"pl-10"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Produto"}),(0,n.jsxs)(Y.l6,{value:A.productId||"all",onValueChange:e=>O({productId:"all"===e?void 0:e}),children:[(0,n.jsx)(Y.bq,{children:(0,n.jsx)(Y.yv,{placeholder:"Todos os produtos"})}),(0,n.jsxs)(Y.gC,{children:[(0,n.jsx)(Y.eb,{value:"all",children:"Todos os produtos"}),null==Z||null==(t=Z.data)?void 0:t.map(e=>(0,n.jsx)(Y.eb,{value:e.id,children:e.name},e.id))]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Tipo"}),(0,n.jsxs)(Y.l6,{value:A.type||"all",onValueChange:e=>O({type:"all"===e?void 0:e}),children:[(0,n.jsx)(Y.bq,{children:(0,n.jsx)(Y.yv,{placeholder:"Todos os tipos"})}),(0,n.jsxs)(Y.gC,{children:[(0,n.jsx)(Y.eb,{value:"all",children:"Todos os tipos"}),(0,n.jsx)(Y.eb,{value:"in",children:"Entrada"}),(0,n.jsx)(Y.eb,{value:"out",children:"Sa\xedda"}),(0,n.jsx)(Y.eb,{value:"adjustment",children:"Ajuste"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Data Inicial"}),(0,n.jsx)(C.p,{type:"date",value:A.dateFrom||"",onChange:e=>O({dateFrom:e.target.value})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Data Final"}),(0,n.jsx)(C.p,{type:"date",value:A.dateTo||"",onChange:e=>O({dateTo:e.target.value})})]})]}),V()&&(0,n.jsx)("div",{className:"flex justify-end mt-4",children:(0,n.jsx)(p.$,{variant:"outline",onClick:()=>{S({type:"all"}),_(1)},children:"Limpar Filtros"})})]})]}),(0,n.jsx)(g.TabsContent,{value:"movements",className:"space-y-6",children:(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{children:[(0,n.jsx)(h.ZB,{children:"Movimenta\xe7\xf5es de Estoque"}),(0,n.jsx)(h.BT,{children:"Hist\xf3rico completo de todas as movimenta\xe7\xf5es de estoque"})]}),(0,n.jsx)(h.Wu,{children:T?(0,n.jsx)("div",{className:"flex justify-center py-8",children:(0,n.jsx)(ex.LoadingSpinner,{className:"h-8 w-8"})}):(null==E||null==(s=E.data)?void 0:s.length)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"rounded-md border",children:(0,n.jsxs)(eg.XI,{children:[(0,n.jsx)(eg.A0,{children:(0,n.jsxs)(eg.Hj,{children:[(0,n.jsx)(eg.nd,{children:"Data"}),(0,n.jsx)(eg.nd,{children:"Produto"}),(0,n.jsx)(eg.nd,{children:"Tipo"}),(0,n.jsx)(eg.nd,{className:"text-right",children:"Quantidade"}),(0,n.jsx)(eg.nd,{className:"text-right",children:"Valor Unit."}),(0,n.jsx)(eg.nd,{className:"text-right",children:"Valor Total"}),(0,n.jsx)(eg.nd,{children:"Documento"}),(0,n.jsx)(eg.nd,{children:"Usu\xe1rio"})]})}),(0,n.jsx)(eg.BF,{children:E.data.map(e=>{var t;let s=eC[e.type];return(0,n.jsxs)(eg.Hj,{children:[(0,n.jsx)(eg.nA,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.A,{className:"h-4 w-4 text-gray-400"}),(0,n.jsx)("span",{className:"text-sm",children:(0,R.GP)(new Date(e.created_at),"dd/MM/yyyy HH:mm",{locale:P.F})})]})}),(0,n.jsx)(eg.nA,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:e.product.name}),(0,n.jsxs)("div",{className:"text-sm text-gray-500",children:["C\xf3digo: ",e.product.code]})]})}),(0,n.jsx)(eg.nA,{children:(0,n.jsxs)(j.E,{variant:ek[e.type],className:"flex items-center gap-1 w-fit",children:[(0,n.jsx)(s,{className:"h-3 w-3"}),e_[e.type]]})}),(0,n.jsxs)(eg.nA,{className:"text-right font-mono",children:["out"===e.type?"-":"+",e.quantity," ",e.product.unit]}),(0,n.jsx)(eg.nA,{className:"text-right font-mono",children:e.unit_cost?J(e.unit_cost):"-"}),(0,n.jsx)(eg.nA,{className:"text-right font-mono",children:e.total_cost?J(e.total_cost):"-"}),(0,n.jsx)(eg.nA,{children:e.reference_document||"-"}),(0,n.jsx)(eg.nA,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(ew.A,{className:"h-4 w-4 text-gray-400"}),(0,n.jsx)("span",{className:"text-sm",children:(null==(t=e.user)?void 0:t.name)||"Sistema"})]})})]},e.id)})})]})}),E.pagination&&(0,n.jsx)("div",{className:"flex justify-center mt-6",children:(0,n.jsx)(eh.dK,{currentPage:w,totalPages:E.pagination.pages,onPageChange:_})})]}):(0,n.jsx)(ep.p,{icon:c.A,title:"Nenhuma movimenta\xe7\xe3o encontrada",description:"N\xe3o h\xe1 movimenta\xe7\xf5es de estoque registradas com os filtros aplicados.",action:(0,n.jsxs)(p.$,{onClick:()=>y(!0),children:[(0,n.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Nova Movimenta\xe7\xe3o"]})})})]})}),(0,n.jsxs)(g.TabsContent,{value:"stats",className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium",children:"Total de Movimenta\xe7\xf5es"}),(0,n.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:(null==L?void 0:L.total_movements)||0}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"\xdaltimos 30 dias"})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium",children:"Entradas"}),(0,n.jsx)(d.A,{className:"h-4 w-4 text-green-600"})]}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==L?void 0:L.total_in)||0}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Valor: ",J((null==L?void 0:L.total_in_value)||0)]})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium",children:"Sa\xeddas"}),(0,n.jsx)(et.A,{className:"h-4 w-4 text-red-600"})]}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(null==L?void 0:L.total_out)||0}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Valor: ",J((null==L?void 0:L.total_out_value)||0)]})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium",children:"Ajustes"}),(0,n.jsx)(U.A,{className:"h-4 w-4 text-blue-600"})]}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==L?void 0:L.total_adjustments)||0}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"\xdaltimos 30 dias"})]})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{children:[(0,n.jsx)(h.ZB,{children:"Movimenta\xe7\xf5es por Per\xedodo"}),(0,n.jsx)(h.BT,{children:"Gr\xe1fico de movimenta\xe7\xf5es dos \xfaltimos 30 dias"})]}),(0,n.jsx)(h.Wu,{children:(0,n.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Gr\xe1fico de movimenta\xe7\xf5es ser\xe1 implementado em breve"})})]})]})]})})}var eA=s(26715);function eS(){var e;let[t,s]=(0,i.useState)("dashboard"),{data:v,isLoading:f}=(0,a.useInventoryStats)(),{data:y,isLoading:N}=(0,a.useStockMovements)({page:1,page_size:10}),{lowStockItems:b,expiringItems:w,alertStats:_,isLoading:k,dismissAlert:C}=function(){let e=(0,eA.jE)(),[t,s]=(0,i.useState)([]),[a,n]=(0,i.useState)({lowStockEnabled:!0,expiringEnabled:!0,expiringDays:30,emailNotifications:!0,systemNotifications:!0});(0,i.useEffect)(()=>{let e=localStorage.getItem("stockAlertSettings");e&&n(JSON.parse(e));let t=localStorage.getItem("dismissedStockAlerts");t&&s(JSON.parse(t).filter(e=>new Date(e.expiresAt)>new Date))},[]),(0,i.useEffect)(()=>{localStorage.setItem("stockAlertSettings",JSON.stringify(a))},[a]),(0,i.useEffect)(()=>{localStorage.setItem("dismissedStockAlerts",JSON.stringify(t))},[t]);let{data:l=[],isLoading:o,error:c}=(0,ef.I)({queryKey:["lowStockItems"],queryFn:r.inventoryReportService.getLowStockItems,enabled:a.lowStockEnabled,refetchInterval:3e5}),{data:d=[],isLoading:m,error:u}=(0,ef.I)({queryKey:["expiringItems",a.expiringDays],queryFn:()=>r.inventoryReportService.getExpiringItems(a.expiringDays),enabled:a.expiringEnabled,refetchInterval:3e5}),x=l.filter(e=>!t.some(t=>t.id===e.product_id&&"low_stock"===t.type&&new Date(t.expiresAt)>new Date)),p=d.filter(e=>!t.some(t=>t.id==="".concat(e.product_id,"-").concat(e.batch_number)&&"expiring"===t.type&&new Date(t.expiresAt)>new Date)),h={totalAlerts:x.length+p.length,lowStockCount:x.length,expiringCount:p.length,criticalCount:p.filter(e=>{let t=new Date(e.expiry_date),s=new Date;return 7>=Math.ceil((t.getTime()-s.getTime())/864e5)}).length,dismissedCount:t.filter(e=>new Date(e.expiresAt)>new Date).length};return(0,i.useEffect)(()=>{if(!a.systemNotifications)return;let e=p.filter(e=>{let t=new Date(e.expiry_date),s=new Date;return 3>=Math.ceil((t.getTime()-s.getTime())/864e5)});e.length>0&&e.forEach(e=>{"Notification"in window&&"granted"===Notification.permission&&new Notification("Alerta Cr\xedtico de Vencimento",{body:"".concat(e.product_name," (Lote: ").concat(e.batch_number,") vence em breve!"),icon:"/favicon.ico",tag:"expiring-".concat(e.product_id,"-").concat(e.batch_number)})})},[p,a.systemNotifications]),{lowStockItems:x,expiringItems:p,alertStats:h,alertSettings:a,dismissedAlerts:t,isLoading:o||m,isLoadingLowStock:o,isLoadingExpiring:m,error:c||u,lowStockError:c,expiringError:u,dismissAlert:(e,t)=>{let a=new Date,r=new Date(a.getTime()+864e5),n={id:e,type:t,dismissedAt:a,expiresAt:r};s(e=>[...e,n]),eo.o.success("Alerta dispensado por 24 horas")},updateAlertSettings:e=>{n(t=>({...t,...e}))},requestNotificationPermission:async()=>{"Notification"in window&&"default"===Notification.permission&&"granted"===await Notification.requestPermission()&&eo.o.success("Notifica\xe7\xf5es ativadas com sucesso!")},refreshAlerts:()=>{e.invalidateQueries({queryKey:["lowStockItems"]}),e.invalidateQueries({queryKey:["expiringItems"]})}}}();return null==y||y.items,(0,n.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Farm\xe1cia & Estoque"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerencie produtos farmac\xeauticos, estoque e movimenta\xe7\xf5es"})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(p.$,{variant:"outline",className:"flex items-center gap-2",children:[(0,n.jsx)(l.A,{className:"h-4 w-4"}),"Relat\xf3rios"]}),(0,n.jsxs)(p.$,{className:"flex items-center gap-2",children:[(0,n.jsx)(o.A,{className:"h-4 w-4"}),"Novo Produto"]})]})]}),f?(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,n.jsx)(h.Zp,{children:(0,n.jsx)(h.Wu,{className:"pt-6",children:(0,n.jsxs)("div",{className:"animate-pulse space-y-2",children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,n.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4"}),(0,n.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})})},t))}):v?(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium",children:"Total de Produtos"}),(0,n.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:v.total_products}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"produtos cadastrados"})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium",children:"Valor Total"}),(0,n.jsx)(d.A,{className:"h-4 w-4 text-green-600"})]}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["R$ ",(null==(e=v.total_stock_value)?void 0:e.toLocaleString("pt-BR",{minimumFractionDigits:2}))||"0,00"]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"em estoque"})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium",children:"Estoque Baixo"}),(0,n.jsx)(m.A,{className:"h-4 w-4 text-orange-600"})]}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:v.low_stock_count||0}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"produtos"})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(h.ZB,{className:"text-sm font-medium",children:"Vencendo"}),(0,n.jsx)(u.A,{className:"h-4 w-4 text-red-600"})]}),(0,n.jsxs)(h.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold text-red-600",children:v.expiring_count||0}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"pr\xf3ximos 30 dias"})]})]})]}):null,(0,n.jsxs)(g.Tabs,{value:t,onValueChange:s,className:"w-full",children:[(0,n.jsxs)(g.TabsList,{className:"grid w-full grid-cols-5",children:[(0,n.jsx)(g.TabsTrigger,{value:"dashboard",children:"Dashboard"}),(0,n.jsx)(g.TabsTrigger,{value:"products",children:"Produtos"}),(0,n.jsxs)(g.TabsTrigger,{value:"alerts",className:"relative",children:["Alertas",_.totalAlerts>0&&(0,n.jsx)(j.E,{variant:_.criticalCount>0?"destructive":"secondary",className:"ml-1 h-5 w-5 p-0 text-xs",children:_.totalAlerts})]}),(0,n.jsx)(g.TabsTrigger,{value:"movements",children:"Movimenta\xe7\xf5es"}),(0,n.jsx)(g.TabsTrigger,{value:"reports",children:"Relat\xf3rios"})]}),(0,n.jsxs)(g.TabsContent,{value:"dashboard",className:"space-y-6",children:[(0,n.jsx)(el,{stats:v,isLoading:f}),(0,n.jsx)(M,{lowStockItems:b,expiringItems:w,isLoading:k,onDismissAlert:C})]}),(0,n.jsx)(g.TabsContent,{value:"products",className:"space-y-6",children:(0,n.jsx)(ej,{})}),(0,n.jsx)(g.TabsContent,{value:"alerts",className:"space-y-6",children:(0,n.jsx)(M,{lowStockItems:b,expiringItems:w,isLoading:k,onDismissAlert:C})}),(0,n.jsx)(g.TabsContent,{value:"movements",className:"space-y-6",children:(0,n.jsx)(eD,{})}),(0,n.jsx)(g.TabsContent,{value:"reports",className:"space-y-6",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{children:[(0,n.jsx)(h.ZB,{children:"Relat\xf3rios Dispon\xedveis"}),(0,n.jsx)(h.BT,{children:"Gere relat\xf3rios detalhados sobre seu invent\xe1rio"})]}),(0,n.jsxs)(h.Wu,{className:"space-y-3",children:[(0,n.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Relat\xf3rio de Estoque"]}),(0,n.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Movimenta\xe7\xf5es por Per\xedodo"]}),(0,n.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Produtos com Estoque Baixo"]}),(0,n.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Produtos Pr\xf3ximos ao Vencimento"]})]})]}),(0,n.jsxs)(h.Zp,{children:[(0,n.jsxs)(h.aR,{children:[(0,n.jsx)(h.ZB,{children:"A\xe7\xf5es R\xe1pidas"}),(0,n.jsx)(h.BT,{children:"Opera\xe7\xf5es frequentes do invent\xe1rio"})]}),(0,n.jsxs)(h.Wu,{className:"space-y-3",children:[(0,n.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Registrar Entrada"]}),(0,n.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Ajuste de Estoque"]}),(0,n.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Contagem de Invent\xe1rio"]}),(0,n.jsxs)(p.$,{variant:"outline",className:"w-full justify-start",children:[(0,n.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Transfer\xeancia entre Estoques"]})]})]})]})})]})]})}},24944:(e,t,s)=>{"use strict";s.d(t,{k:()=>l});var a=s(95155),r=s(12115),n=s(55863),i=s(53999);let l=r.forwardRef((e,t)=>{let{className:s,value:r,...l}=e;return(0,a.jsx)(n.Root,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,a.jsx)(n.Indicator,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=n.Root.displayName},30070:(e,t,s)=>{"use strict";s.d(t,{C5:()=>v,MJ:()=>j,Rr:()=>g,eI:()=>p,lR:()=>h,lV:()=>c,zB:()=>m});var a=s(95155),r=s(12115),n=s(99708),i=s(62177),l=s(53999),o=s(82714);let c=i.Op,d=r.createContext({}),m=e=>{let{...t}=e;return(0,a.jsx)(d.Provider,{value:{name:t.name},children:(0,a.jsx)(i.xI,{...t})})},u=()=>{let e=r.useContext(d),t=r.useContext(x),{getFieldState:s,formState:a}=(0,i.xW)(),n=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},x=r.createContext({}),p=r.forwardRef((e,t)=>{let{className:s,...n}=e,i=r.useId();return(0,a.jsx)(x.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",s),...n})})});p.displayName="FormItem";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e,{error:n,formItemId:i}=u();return(0,a.jsx)(o.Label,{ref:t,className:(0,l.cn)(n&&"text-destructive",s),htmlFor:i,...r})});h.displayName="FormLabel";let j=r.forwardRef((e,t)=>{let{...s}=e,{error:r,formItemId:i,formDescriptionId:l,formMessageId:o}=u();return(0,a.jsx)(n.DX,{ref:t,id:i,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...s})});j.displayName="FormControl";let g=r.forwardRef((e,t)=>{let{className:s,...r}=e,{formDescriptionId:n}=u();return(0,a.jsx)("p",{ref:t,id:n,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});g.displayName="FormDescription";let v=r.forwardRef((e,t)=>{let{className:s,children:r,...n}=e,{error:i,formMessageId:o}=u(),c=i?String(null==i?void 0:i.message):r;return c?(0,a.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-sm font-medium text-destructive",s),...n,children:c}):null});v.displayName="FormMessage"},34964:(e,t,s)=>{"use strict";s.d(t,{Tabs:()=>l,TabsContent:()=>d,TabsList:()=>o,TabsTrigger:()=>c});var a=s(95155),r=s(12115),n=s(60704),i=s(53999);let l=n.bL,o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});o.displayName=n.B8.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});c.displayName=n.l9.displayName;let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});d.displayName=n.UC.displayName},36894:(e,t,s)=>{"use strict";s.d(t,{V:()=>c});var a=s(95155);s(12115);var r=s(42355),n=s(13052),i=s(86873),l=s(53999),o=s(97168);function c(e){let{className:t,classNames:s,showOutsideDays:c=!0,...d}=e;return(0,a.jsx)(i.h,{showOutsideDays:c,className:(0,l.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:e=>{let{...t}=e;return(0,a.jsx)(r.A,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,a.jsx)(n.A,{className:"h-4 w-4"})}},...d})}c.displayName="Calendar"},49026:(e,t,s)=>{"use strict";s.d(t,{Fc:()=>o,TN:()=>c});var a=s(95155),r=s(12115),n=s(74466),i=s(53999);let l=(0,n.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(l({variant:r}),s),...n})});o.displayName="Alert",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",s),...r})}).displayName="AlertTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",s),...r})});c.displayName="AlertDescription"},53999:(e,t,s)=>{"use strict";s.d(t,{Yq:()=>i,cn:()=>n,r6:()=>l});var a=s(52596),r=s(39688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}function i(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(e))}function l(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},60823:(e,t,s)=>{"use strict";s.d(t,{AM:()=>l,Wv:()=>o,hl:()=>c});var a=s(95155),r=s(12115),n=s(20547),i=s(53999);let l=n.bL,o=n.l9,c=r.forwardRef((e,t)=>{let{className:s,align:r="center",sideOffset:l=4,...o}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{ref:t,align:r,sideOffset:l,className:(0,i.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...o})})});c.displayName=n.UC.displayName},63872:(e,t,s)=>{"use strict";s.d(t,{LoadingSpinner:()=>l});var a=s(95155),r=s(51154),n=s(53999);let i={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};function l(e){let{size:t="md",className:s="",text:l}=e;return(0,a.jsx)("div",{className:(0,n.cn)("flex items-center justify-center",s),children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,a.jsx)(r.A,{className:(0,n.cn)("animate-spin text-gray-600",i[t])}),l&&(0,a.jsx)("p",{className:"text-sm text-gray-600 animate-pulse",children:l})]})})}},76037:(e,t,s)=>{"use strict";s.d(t,{Separator:()=>l});var a=s(95155),r=s(12115),n=s(87489),i=s(53999);let l=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:l=!0,...o}=e;return(0,a.jsx)(n.b,{ref:t,decorative:l,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...o})});l.displayName=n.b.displayName},82714:(e,t,s)=>{"use strict";s.d(t,{Label:()=>c});var a=s(95155),r=s(12115),n=s(40968),i=s(74466),l=s(53999);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,l.cn)(o(),s),...r})});c.displayName=n.b.displayName},88482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l});var a=s(95155),r=s(12115),n=s(53999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},88524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>l,BF:()=>o,Hj:()=>c,XI:()=>i,nA:()=>m,nd:()=>d});var a=s(95155),r=s(12115),n=s(53999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...r})})});i.displayName="Table";let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...r})});l.displayName="TableHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...r})});o.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});c.displayName="TableRow";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});d.displayName="TableHead";let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});m.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},90088:(e,t,s)=>{"use strict";s.d(t,{Switch:()=>l});var a=s(95155),r=s(12115),n=s(4884),i=s(53999);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:t,children:(0,a.jsx)(n.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=n.bL.displayName},95426:(e,t,s)=>{Promise.resolve().then(s.bind(s,19810))},97168:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,r:()=>o});var a=s(95155),r=s(12115),n=s(99708),i=s(74466),l=s(53999);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:c=!1,...d}=e,m=c?n.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(o({variant:r,size:i,className:s})),ref:t,...d})});c.displayName="Button"},99474:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(95155),r=s(12115),n=s(53999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...r})});i.displayName="Textarea"},99840:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>u,Es:()=>p,L3:()=>h,c7:()=>x,lG:()=>o,rr:()=>j,zM:()=>c});var a=s(95155),r=s(12115),n=s(15452),i=s(54416),l=s(53999);let o=n.bL,c=n.l9,d=n.ZL;n.bm;let m=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hJ,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});m.displayName=n.hJ.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(n.UC,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...o,children:[r,(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.UC.displayName;let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};x.displayName="DialogHeader";let p=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};p.displayName="DialogFooter";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.hE,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),...r})});h.displayName=n.hE.displayName;let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});j.displayName=n.VY.displayName}},e=>{e.O(0,[3455,3942,8250,5061,9855,6671,6967,2960,5452,1118,2804,7127,3008,7185,9327,2738,2902,8441,5964,7358],()=>e(e.s=95426)),_N_E=e.O()}]);