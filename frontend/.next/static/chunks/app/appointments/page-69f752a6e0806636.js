(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4921],{30718:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>E});var s=a(95155),n=a(12115),r=a(23861),i=a(66932),l=a(91788),o=a(84616),c=a(69074),d=a(14186),u=a(17580),m=a(33109),x=a(47924),h=a(3053),g=a(26715),f=a(32960),p=a(85771);let v={calendarEvents:"calendar-events",monthlyStats:"monthly-stats"};var j=a(63417),b=a(97168),y=a(89852),N=a(88482),w=a(88145),C=a(34964),k=a(95784),D=a(56671);let S=function(){var e,t,a;let[S,T]=(0,n.useState)(""),[R,E]=(0,n.useState)("month"),[A,I]=(0,n.useState)(!1),[q,L]=(0,n.useState)({status:[],doctorIds:[],dateRange:{start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+2592e6).toISOString().split("T")[0]},patientName:"",appointmentType:[]}),{appointments:F,stats:B,isLoading:M,error:K,searchAppointments:O,exportAppointments:Z}=(0,h.Q)({filters:q}),{currentDate:_,view:Q,events:P,isLoadingEvents:$,goToToday:W,goToPrevious:z,goToNext:Y,setView:H,getCalendarTitle:U,refresh:V}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initialDate:t=new Date,initialView:a="month",doctorId:s,clinicId:r,autoRefresh:i=!1,refreshInterval:l=3e4}=e,o=(0,g.jE)(),[c,d]=(0,n.useState)(t),[u,m]=(0,n.useState)(a),[x,h]=(0,n.useState)(null),[j,b]=(0,n.useState)({status:[],doctorIds:s?[s]:[],clinicIds:r?[r]:[],appointmentTypes:[],showCanceled:!1,showCompleted:!0}),y=(0,n.useMemo)(()=>{let e=new Date(c),t=new Date(c);switch(u){case"day":t.setDate(e.getDate());break;case"week":e.setDate(e.getDate()-e.getDay()),t.setDate(e.getDate()+6);break;case"month":e.setDate(1),t.setMonth(t.getMonth()+1,0);break;case"year":e.setMonth(0,1),t.setMonth(11,31)}return{start:e.toISOString().split("T")[0],end:t.toISOString().split("T")[0]}},[c,u]),{data:N,isLoading:w,error:C,refetch:k}=(0,f.I)({queryKey:[v.calendarEvents,y,j],queryFn:()=>p.u.getCalendarEvents({startDate:y.start,endDate:y.end,...j}),staleTime:i?l:3e5,refetchInterval:!!i&&l,gcTime:6e5}),{data:D,isLoading:S}=(0,f.I)({queryKey:[v.monthlyStats,c.getFullYear(),c.getMonth(),j],queryFn:()=>{let e=c.getFullYear(),t=c.getMonth()+1;return p.u.getMonthlyStats(e,t,j)},enabled:"month"===u,staleTime:6e5}),T=(0,n.useCallback)(()=>{d(new Date)},[]),R=(0,n.useCallback)(()=>{let e=new Date(c);switch(u){case"day":e.setDate(e.getDate()-1);break;case"week":e.setDate(e.getDate()-7);break;case"month":e.setMonth(e.getMonth()-1);break;case"year":e.setFullYear(e.getFullYear()-1)}d(e)},[c,u]),E=(0,n.useCallback)(()=>{let e=new Date(c);switch(u){case"day":e.setDate(e.getDate()+1);break;case"week":e.setDate(e.getDate()+7);break;case"month":e.setMonth(e.getMonth()+1);break;case"year":e.setFullYear(e.getFullYear()+1)}d(e)},[c,u]),A=(0,n.useCallback)(e=>{d(new Date(e))},[]),I=(0,n.useCallback)(e=>{b(t=>({...t,...e}))},[]),q=(0,n.useCallback)(()=>{b({status:[],doctorIds:s?[s]:[],clinicIds:r?[r]:[],appointmentTypes:[],showCanceled:!1,showCompleted:!0})},[s,r]),L=(0,n.useCallback)(e=>{if(!N)return[];let t=e.toISOString().split("T")[0];return N.filter(e=>e.start.startsWith(t))},[N]),F=(0,n.useCallback)((e,t)=>{if(!N)return[];let a=e.toISOString().split("T")[0],s=t.toISOString().split("T")[0];return N.filter(e=>{let t=e.start.split("T")[0];return t>=a&&t<=s})},[N]),B=(0,n.useCallback)(e=>L(e).length>0,[L]),M=(0,n.useCallback)(e=>N?N.filter(t=>t.appointment.status===e):[],[N]),K=(0,n.useCallback)(e=>N?N.filter(t=>t.appointment.doctor_id===e):[],[N]),O=(0,n.useCallback)(()=>{let e=new Date(c.getFullYear(),c.getMonth(),1),t=new Date(e);t.setDate(t.getDate()-e.getDay());let a=[],s=new Date(t);for(let e=0;e<42;e++)a.push(new Date(s)),s.setDate(s.getDate()+1);return a},[c]),Z=(0,n.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=[];for(let a=6;a<=22;a++)for(let s=0;s<60;s+=e){let e="".concat(a.toString().padStart(2,"0"),":").concat(s.toString().padStart(2,"0"));t.push(e)}return t},[]),_=(0,n.useCallback)(()=>{let e={};switch(u){case"day":e.weekday="long",e.year="numeric",e.month="long",e.day="numeric";break;case"week":let t=new Date(c);t.setDate(t.getDate()-t.getDay());let a=new Date(t);return a.setDate(a.getDate()+6),"".concat(t.toLocaleDateString("pt-BR",{day:"numeric",month:"short"})," - ").concat(a.toLocaleDateString("pt-BR",{day:"numeric",month:"short",year:"numeric"}));case"month":e.year="numeric",e.month="long";break;case"year":e.year="numeric"}return c.toLocaleDateString("pt-BR",e)},[c,u]),Q=(0,n.useCallback)(()=>{o.invalidateQueries({queryKey:[v.calendarEvents]}),o.invalidateQueries({queryKey:[v.monthlyStats]})},[o]);return{currentDate:c,view:u,selectedDate:x,filters:j,dateRange:y,events:N||[],monthlyStats:D,isLoadingEvents:w,isLoadingStats:S,isLoading:w||S,eventsError:C,error:C,goToToday:T,goToPrevious:R,goToNext:E,goToDate:A,setView:m,updateFilters:I,clearFilters:q,selectDate:(0,n.useCallback)(e=>{h(e)},[]),clearSelection:(0,n.useCallback)(()=>{h(null)},[]),getEventsForDate:L,getEventsForDateRange:F,hasEventsOnDate:B,getEventsByStatus:M,getEventsByDoctor:K,getCalendarDays:O,getTimeSlots:Z,getCalendarTitle:_,refresh:Q,refetchEvents:k}}({initialView:R,autoRefresh:!0}),{notifications:G,unreadCount:X,hasUnreadNotifications:J}=(0,j.E)({autoRefresh:!0}),ee=(0,n.useMemo)(()=>{if(!F)return[];let e=F;return S&&(e=e.filter(e=>{var t,a,s,n,r;return(null==(a=e.patient)||null==(t=a.name)?void 0:t.toLowerCase().includes(S.toLowerCase()))||(null==(n=e.doctor)||null==(s=n.name)?void 0:s.toLowerCase().includes(S.toLowerCase()))||(null==(r=e.notes)?void 0:r.toLowerCase().includes(S.toLowerCase()))})),e},[F,S]),et=(0,n.useMemo)(()=>{let e=new Date().toISOString().split("T")[0];return ee.filter(t=>t.appointment_date.startsWith(e))},[ee]),ea=(0,n.useMemo)(()=>{let e=new Date,t=new Date(e.getTime()+6048e5);return ee.filter(a=>{let s=new Date(a.appointment_date);return s>e&&s<=t})},[ee]),es=async e=>{if(e.trim())try{await O(e)}catch(e){D.o.error("Erro ao buscar agendamentos")}},en=async e=>{try{await Z(ee,e),D.o.success("Relat\xf3rio exportado em ".concat(e.toUpperCase()))}catch(e){D.o.error("Erro ao exportar relat\xf3rio")}},er=(e,t)=>{L(a=>({...a,[e]:t}))},ei=e=>({scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",in_progress:"bg-yellow-100 text-yellow-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800",no_show:"bg-orange-100 text-orange-800"})[e]||"bg-gray-100 text-gray-800",el=e=>({scheduled:"Agendado",confirmed:"Confirmado",in_progress:"Em Andamento",completed:"Conclu\xeddo",cancelled:"Cancelado",no_show:"Faltou"})[e]||e;return K?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-red-600 mb-4",children:"Erro ao carregar agendamentos"}),(0,s.jsx)(b.$,{onClick:()=>window.location.reload(),children:"Tentar Novamente"})]})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Agendamentos"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerencie consultas, hor\xe1rios e disponibilidade m\xe9dica"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[J()&&(0,s.jsxs)(b.$,{variant:"outline",size:"sm",className:"relative",children:[(0,s.jsx)(r.A,{className:"h-4 w-4"}),(0,s.jsx)(w.E,{className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:X})]}),(0,s.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>I(!A),children:[(0,s.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Filtros"]}),(0,s.jsxs)(k.l6,{value:"pdf",onValueChange:e=>en(e),children:[(0,s.jsx)(k.bq,{className:"w-32",children:(0,s.jsx)(k.yv,{placeholder:"Exportar"})}),(0,s.jsxs)(k.gC,{children:[(0,s.jsx)(k.eb,{value:"pdf",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"PDF"]})}),(0,s.jsx)(k.eb,{value:"excel",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Excel"]})})]})]}),(0,s.jsxs)(b.$,{children:[(0,s.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Novo Agendamento"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)(N.Zp,{children:[(0,s.jsxs)(N.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(N.ZB,{className:"text-sm font-medium",children:"Hoje"}),(0,s.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(N.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:et.length}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[et.filter(e=>"confirmed"===e.status).length," confirmados"]})]})]}),(0,s.jsxs)(N.Zp,{children:[(0,s.jsxs)(N.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(N.ZB,{className:"text-sm font-medium",children:"Esta Semana"}),(0,s.jsx)(d.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(N.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:ea.length}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pr\xf3ximos 7 dias"})]})]}),(0,s.jsxs)(N.Zp,{children:[(0,s.jsxs)(N.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(N.ZB,{className:"text-sm font-medium",children:"Total do M\xeas"}),(0,s.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(N.Wu,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==B?void 0:B.totalAppointments)||0}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==B?void 0:B.completedAppointments)||0," conclu\xeddos"]})]})]}),(0,s.jsxs)(N.Zp,{children:[(0,s.jsxs)(N.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(N.ZB,{className:"text-sm font-medium",children:"Taxa de Comparecimento"}),(0,s.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(N.Wu,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[(null==B?void 0:B.attendanceRate)||0,"%"]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"\xdaltimos 30 dias"})]})]})]}),A&&(0,s.jsxs)(N.Zp,{children:[(0,s.jsx)(N.aR,{children:(0,s.jsx)(N.ZB,{children:"Filtros"})}),(0,s.jsx)(N.Wu,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),(0,s.jsxs)(k.l6,{value:(null==(e=q.status)?void 0:e[0])||"",onValueChange:e=>er("status",e?[e]:[]),children:[(0,s.jsx)(k.bq,{children:(0,s.jsx)(k.yv,{placeholder:"Todos"})}),(0,s.jsxs)(k.gC,{children:[(0,s.jsx)(k.eb,{value:"",children:"Todos"}),(0,s.jsx)(k.eb,{value:"scheduled",children:"Agendado"}),(0,s.jsx)(k.eb,{value:"confirmed",children:"Confirmado"}),(0,s.jsx)(k.eb,{value:"in_progress",children:"Em Andamento"}),(0,s.jsx)(k.eb,{value:"completed",children:"Conclu\xeddo"}),(0,s.jsx)(k.eb,{value:"cancelled",children:"Cancelado"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Data In\xedcio"}),(0,s.jsx)(y.p,{type:"date",value:(null==(t=q.dateRange)?void 0:t.start)||"",onChange:e=>er("dateRange",{...q.dateRange,start:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Data Fim"}),(0,s.jsx)(y.p,{type:"date",value:(null==(a=q.dateRange)?void 0:a.end)||"",onChange:e=>er("dateRange",{...q.dateRange,end:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Paciente"}),(0,s.jsx)(y.p,{placeholder:"Nome do paciente",value:q.patientName||"",onChange:e=>er("patientName",e.target.value)})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)(b.$,{variant:"outline",onClick:()=>L({status:[],doctorIds:[],dateRange:{start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+2592e6).toISOString().split("T")[0]},patientName:"",appointmentType:[]}),children:"Limpar"})})]})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(y.p,{placeholder:"Buscar por paciente, m\xe9dico ou observa\xe7\xf5es...",value:S,onChange:e=>T(e.target.value),onKeyPress:e=>"Enter"===e.key&&es(S),className:"pl-10"})]}),(0,s.jsx)(b.$,{variant:"outline",onClick:()=>es(S),disabled:!S.trim(),children:"Buscar"})]}),(0,s.jsxs)(C.Tabs,{value:"calendar",className:"space-y-4",children:[(0,s.jsxs)(C.TabsList,{children:[(0,s.jsx)(C.TabsTrigger,{value:"calendar",children:"Calend\xe1rio"}),(0,s.jsx)(C.TabsTrigger,{value:"list",children:"Lista"}),(0,s.jsx)(C.TabsTrigger,{value:"today",children:"Hoje"})]}),(0,s.jsxs)(C.TabsContent,{value:"calendar",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(b.$,{variant:"outline",onClick:z,children:"‹"}),(0,s.jsx)("h2",{className:"text-xl font-semibold min-w-[200px] text-center",children:U()}),(0,s.jsx)(b.$,{variant:"outline",onClick:Y,children:"›"}),(0,s.jsx)(b.$,{variant:"outline",onClick:W,children:"Hoje"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(k.l6,{value:Q,onValueChange:e=>{E(e),H(e)},children:[(0,s.jsx)(k.bq,{className:"w-32",children:(0,s.jsx)(k.yv,{})}),(0,s.jsxs)(k.gC,{children:[(0,s.jsx)(k.eb,{value:"day",children:"Dia"}),(0,s.jsx)(k.eb,{value:"week",children:"Semana"}),(0,s.jsx)(k.eb,{value:"month",children:"M\xeas"})]})]}),(0,s.jsx)(b.$,{variant:"outline",onClick:V,children:"Atualizar"})]})]}),(0,s.jsx)(N.Zp,{children:(0,s.jsx)(N.Wu,{className:"p-6",children:$?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Carregando calend\xe1rio..."})]})}):(0,s.jsxs)("div",{className:"text-center text-gray-500 py-12",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{children:"Componente de calend\xe1rio ser\xe1 implementado"}),(0,s.jsxs)("p",{className:"text-sm mt-2",children:[(null==P?void 0:P.length)||0," eventos encontrados"]})]})})})]}),(0,s.jsx)(C.TabsContent,{value:"list",className:"space-y-4",children:(0,s.jsxs)(N.Zp,{children:[(0,s.jsx)(N.aR,{children:(0,s.jsx)(N.ZB,{children:"Lista de Agendamentos"})}),(0,s.jsx)(N.Wu,{children:M?(0,s.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===ee.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Nenhum agendamento encontrado"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[ee.slice(0,10).map(e=>{var t,a;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:(null==(t=e.patient)?void 0:t.name)||"Paciente n\xe3o informado"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(null==(a=e.doctor)?void 0:a.name)||"M\xe9dico n\xe3o informado"," •",new Date(e.appointment_date).toLocaleString("pt-BR")]}),e.notes&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.notes})]})})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(w.E,{className:ei(e.status),children:el(e.status)}),e.price&&(0,s.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["R$ ",e.price.toFixed(2)]})]})]},e.id)}),ee.length>10&&(0,s.jsx)("div",{className:"text-center pt-4",children:(0,s.jsxs)(b.$,{variant:"outline",children:["Carregar mais (",ee.length-10," restantes)"]})})]})})]})}),(0,s.jsx)(C.TabsContent,{value:"today",className:"space-y-4",children:(0,s.jsxs)(N.Zp,{children:[(0,s.jsx)(N.aR,{children:(0,s.jsx)(N.ZB,{children:"Agendamentos de Hoje"})}),(0,s.jsx)(N.Wu,{children:0===et.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(d.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Nenhum agendamento para hoje"})]}):(0,s.jsx)("div",{className:"space-y-4",children:et.map(e=>{var t,a;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:(null==(t=e.patient)?void 0:t.name)||"Paciente n\xe3o informado"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(e.appointment_date).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})," • ",(null==(a=e.doctor)?void 0:a.name)||"M\xe9dico n\xe3o informado"]})]})]})}),(0,s.jsx)(w.E,{className:ei(e.status),children:el(e.status)})]},e.id)})})})]})})]})]})};var T=a(27737);function R(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(T.E,{className:"h-8 w-48"}),(0,s.jsx)(T.E,{className:"h-10 w-32"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((e,t)=>(0,s.jsx)(N.Zp,{children:(0,s.jsxs)(N.Wu,{className:"p-6",children:[(0,s.jsx)(T.E,{className:"h-4 w-20 mb-2"}),(0,s.jsx)(T.E,{className:"h-8 w-16"})]})},t))}),(0,s.jsx)(N.Zp,{children:(0,s.jsx)(N.Wu,{className:"p-6",children:(0,s.jsx)(T.E,{className:"h-64 w-full"})})})]})}function E(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)(R,{}),children:(0,s.jsx)(S,{})})}},31886:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,O:()=>l});var s=a(23464),n=a(56671);let r=s.A.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{let{response:t}=e;if((null==t?void 0:t.status)===401)localStorage.removeItem("token"),localStorage.removeItem("user"),n.o.error("Sess\xe3o expirada. Fa\xe7a login novamente."),window.location.href="/auth/login";else if((null==t?void 0:t.status)===403)n.o.error("Acesso negado.");else if((null==t?void 0:t.status)===404)n.o.error("Recurso n\xe3o encontrado.");else if((null==t?void 0:t.status)>=500)n.o.error("Erro interno do servidor. Tente novamente mais tarde.");else if("ECONNABORTED"===e.code)n.o.error("Tempo limite da requisi\xe7\xe3o excedido.");else{var a;n.o.error((null==t||null==(a=t.data)?void 0:a.message)||"Erro inesperado.")}return Promise.reject(e)});let i=r,l={get:async(e,t)=>(await r.get(e,{params:t})).data,post:async(e,t)=>(await r.post(e,t)).data,put:async(e,t)=>(await r.put(e,t)).data,delete:async e=>(await r.delete(e)).data,patch:async(e,t)=>(await r.patch(e,t)).data}},34964:(e,t,a)=>{"use strict";a.d(t,{Tabs:()=>l,TabsContent:()=>d,TabsList:()=>o,TabsTrigger:()=>c});var s=a(95155),n=a(12115),r=a(60704),i=a(53999);let l=r.bL,o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.B8,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...n})});o.displayName=r.B8.displayName;let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.l9,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...n})});c.displayName=r.l9.displayName;let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.UC,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n})});d.displayName=r.UC.displayName},52158:(e,t,a)=>{Promise.resolve().then(a.bind(a,30718))},53999:(e,t,a)=>{"use strict";a.d(t,{Yq:()=>i,cn:()=>r,r6:()=>l});var s=a(52596),n=a(39688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}function i(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(e))}function l(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},63417:(e,t,a)=>{"use strict";a.d(t,{E:()=>d});var s=a(12115),n=a(26715),r=a(32960),i=a(5041),l=a(56671),o=a(85771);let c={notifications:"appointment-notifications",settings:"notification-settings",stats:"notification-stats"};function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{userId:t,clinicId:a,autoRefresh:d=!0,refreshInterval:u=3e4,enableRealTime:m=!0,maxNotifications:x=50}=e,h=(0,n.jE)(),[g,f]=(0,s.useState)({status:["pending","sent"],types:["reminder","confirmation","cancellation"],priority:["high","medium","low"],dateRange:{start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+6048e5).toISOString().split("T")[0]}}),[p,v]=(0,s.useState)(0),[j,b]=(0,s.useState)(!1),{data:y,isLoading:N,error:w,refetch:C}=(0,r.I)({queryKey:[c.notifications,t,a,g],queryFn:()=>o.u.getNotifications({userId:t,clinicId:a,...g,limit:x}),enabled:!!t||!!a,staleTime:d?u:12e4,refetchInterval:!!d&&u,gcTime:3e5}),{data:k,isLoading:D,error:S}=(0,r.I)({queryKey:[c.settings,t],queryFn:()=>o.u.getNotificationSettings(t),enabled:!!t,staleTime:6e5}),{data:T,isLoading:R}=(0,r.I)({queryKey:[c.stats,t,a],queryFn:()=>o.u.getNotificationStats(t,a),enabled:!!t||!!a,staleTime:3e5}),E=(0,i.n)({mutationFn:e=>o.u.markNotificationsAsRead(e),onSuccess:()=>{h.invalidateQueries({queryKey:[c.notifications]}),h.invalidateQueries({queryKey:[c.stats]})},onError:e=>{var t,a;let s=(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||"Erro ao marcar notifica\xe7\xe3o como lida";l.o.error(s)}}),A=(0,i.n)({mutationFn:e=>o.u.deleteNotifications(e),onSuccess:()=>{h.invalidateQueries({queryKey:[c.notifications]}),h.invalidateQueries({queryKey:[c.stats]}),l.o.success("Notifica\xe7\xe3o(\xf5es) exclu\xedda(s) com sucesso!")},onError:e=>{var t,a;let s=(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||"Erro ao excluir notifica\xe7\xe3o";l.o.error(s)}}),I=(0,i.n)({mutationFn:e=>o.u.updateNotificationSettings(t,e),onSuccess:()=>{h.invalidateQueries({queryKey:[c.settings,t]}),l.o.success("Configura\xe7\xf5es atualizadas com sucesso!")},onError:e=>{var t,a;let s=(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||"Erro ao atualizar configura\xe7\xf5es";l.o.error(s)}}),q=(0,i.n)({mutationFn:e=>o.u.sendNotification(e),onSuccess:()=>{h.invalidateQueries({queryKey:[c.notifications]}),l.o.success("Notifica\xe7\xe3o enviada com sucesso!")},onError:e=>{var t,a;let s=(null==(a=e.response)||null==(t=a.data)?void 0:t.detail)||"Erro ao enviar notifica\xe7\xe3o";l.o.error(s)}});(0,s.useEffect)(()=>{y&&v(y.filter(e=>!e.read).length)},[y]),(0,s.useEffect)(()=>{if(m&&t){b(!0);let e=setInterval(()=>{h.invalidateQueries({queryKey:[c.notifications]})},u);return()=>{clearInterval(e),b(!1)}}},[m,t,u,h]);let L=(0,s.useCallback)(e=>{E.mutate(e)},[E]),F=(0,s.useCallback)(()=>{if(!y)return;let e=y.filter(e=>!e.read).map(e=>e.id);e.length>0&&E.mutate(e)},[y,E]),B=(0,s.useCallback)(e=>{A.mutate(e)},[A]),M=(0,s.useCallback)(e=>{I.mutate(e)},[I]),K=(0,s.useCallback)(e=>{q.mutate(e)},[q]),O=(0,s.useCallback)(e=>{f(t=>({...t,...e}))},[]),Z=(0,s.useCallback)(()=>{f({status:["pending","sent"],types:["reminder","confirmation","cancellation"],priority:["high","medium","low"],dateRange:{start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+6048e5).toISOString().split("T")[0]}})},[]),_=(0,s.useCallback)(e=>y?y.filter(t=>t.type===e):[],[y]),Q=(0,s.useCallback)(e=>y?y.filter(t=>t.priority===e):[],[y]),P=(0,s.useCallback)(()=>y?y.filter(e=>!e.read):[],[y]),$=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;if(!y)return[];let t=new Date(Date.now()-60*e*6e4);return y.filter(e=>new Date(e.createdAt)>t)},[y]),W=(0,s.useCallback)(()=>p>0,[p]),z=(0,s.useCallback)(async(e,t,a)=>{try{await o.u.createAppointmentReminder(e,t,a),h.invalidateQueries({queryKey:[c.notifications]}),l.o.success("Lembrete criado com sucesso!")}catch(t){var s,n;let e=(null==(n=t.response)||null==(s=n.data)?void 0:s.detail)||"Erro ao criar lembrete";l.o.error(e)}},[h]),Y=(0,s.useCallback)(async e=>{try{await o.u.cancelAppointmentReminder(e),h.invalidateQueries({queryKey:[c.notifications]}),l.o.success("Lembrete cancelado com sucesso!")}catch(s){var t,a;let e=(null==(a=s.response)||null==(t=a.data)?void 0:t.detail)||"Erro ao cancelar lembrete";l.o.error(e)}},[h]),H=(0,s.useCallback)(()=>{h.invalidateQueries({queryKey:[c.notifications]}),h.invalidateQueries({queryKey:[c.stats]})},[h]),U=(0,s.useCallback)(function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],K({type:"test",title:"Notifica\xe7\xe3o de Teste",message:"Esta \xe9 uma notifica\xe7\xe3o de teste do sistema.",priority:"low",userId:t,clinicId:a})},[t,a,K]);return{notifications:y||[],settings:k,stats:T,unreadCount:p,filters:g,isConnected:j,isLoadingNotifications:N,isLoadingSettings:D,isLoadingStats:R,isLoading:N||D||R,isMarkingAsRead:E.isPending,isDeleting:A.isPending,isUpdatingSettings:I.isPending,isSending:q.isPending,notificationsError:w,settingsError:S,error:w||S,markAsRead:L,markAllAsRead:F,deleteNotification:B,updateSettings:M,sendNotification:K,createReminder:z,cancelReminder:Y,testNotification:U,updateFilters:O,clearFilters:Z,getNotificationsByType:_,getNotificationsByPriority:Q,getUnreadNotifications:P,getRecentNotifications:$,hasUnreadNotifications:W,refresh:H,refetchNotifications:C}}},88482:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>o,Zp:()=>i,aR:()=>l});var s=a(95155),n=a(12115),r=a(53999);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...n})});l.displayName="CardHeader";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});o.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...n})});d.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},97168:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,r:()=>o});var s=a(95155),n=a(12115),r=a(99708),i=a(74466),l=a(53999);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:c=!1,...d}=e,u=c?r.DX:"button";return(0,s.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:a})),ref:t,...d})});c.displayName="Button"}},e=>{e.O(0,[3455,3942,8250,5061,9855,6671,5954,6967,2960,3464,1949,2792,904,8441,5964,7358],()=>e(e.s=52158)),_N_E=e.O()}]);