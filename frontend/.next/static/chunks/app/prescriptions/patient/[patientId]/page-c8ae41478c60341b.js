(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1743],{14924:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>P});var i=a(95155),r=a(12115),l=a(35695),t=a(92657),c=a(13717),n=a(91788),d=a(62525),x=a(35169),o=a(57434),m=a(66932),h=a(97168),p=a(89852),u=a(88482),j=a(88145),g=a(63872),v=a(57471),N=a(93432),b=a(95784),f=a(67133),y=a(50126),C=a(46980),w=a(53999),_=a(56671);function k(e){let{prescription:s,onView:a,onEdit:r,onDelete:l,onDownloadPDF:x}=e;return(0,i.jsxs)(u.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,i.jsx)(u.aR,{className:"pb-3",children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsxs)(u.ZB,{className:"text-lg",children:["Prescri\xe7\xe3o #",s.id]}),(0,i.jsx)(j.E,{className:(e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"expired":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"dispensed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(s.status),children:(e=>{switch(e){case"active":return"Ativa";case"expired":return"Expirada";case"cancelled":return"Cancelada";case"dispensed":return"Dispensada";default:return e}})(s.status)})]}),(0,i.jsxs)(u.BT,{children:[(e=>{switch(e){case"simple":return"Simples";case"controlled":return"Controlada";case"special":return"Especial";case"digital":return"Digital";default:return e}})(s.prescription_type)," • Criada em ",(0,w.Yq)(s.created_at)]})]}),(0,i.jsxs)(f.rI,{children:[(0,i.jsx)(f.ty,{asChild:!0,children:(0,i.jsx)(h.$,{variant:"ghost",size:"sm",children:"•••"})}),(0,i.jsxs)(f.SQ,{align:"end",children:[(0,i.jsxs)(f._2,{onClick:()=>a(s.id),children:[(0,i.jsx)(t.A,{className:"h-4 w-4 mr-2"}),"Visualizar"]}),"active"===s.status&&(0,i.jsxs)(f._2,{onClick:()=>r(s.id),children:[(0,i.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Editar"]}),(0,i.jsxs)(f._2,{onClick:()=>x(s.id),children:[(0,i.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Baixar PDF"]}),(0,i.jsxs)(f._2,{onClick:()=>l(s.id),className:"text-red-600",children:[(0,i.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Excluir"]})]})]})]})}),(0,i.jsxs)(u.Wu,{className:"pt-0",children:[(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-500",children:"M\xe9dico:"}),(0,i.jsxs)("p",{className:"text-gray-900",children:["ID: ",s.doctor_id]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-500",children:"Prontu\xe1rio:"}),(0,i.jsxs)("p",{className:"text-gray-900",children:["#",s.medical_record_id]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium text-gray-500",children:"Validade:"}),(0,i.jsx)("p",{className:"text-gray-900",children:s.expires_at?(0,w.Yq)(s.expires_at):"Sem validade"})]})]}),s.content&&(0,i.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,i.jsx)("span",{className:"font-medium text-gray-500 text-sm",children:"Observa\xe7\xf5es:"}),(0,i.jsx)("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:s.content})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,i.jsxs)("span",{children:["Atualizada: ",(0,w.Yq)(s.updated_at)]}),s.is_controlled&&(0,i.jsx)(j.E,{variant:"outline",className:"text-xs",children:"Controlada"})]}),(0,i.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>a(s.id),children:"Ver Detalhes"})]})]})]})}function P(){let e=(0,l.useParams)(),s=(0,l.useRouter)(),a=Number(e.patientId),[t,c]=(0,r.useState)(1),[n,d]=(0,r.useState)(""),[j,f]=(0,r.useState)("all"),[w,P]=(0,r.useState)("all"),{data:E,isLoading:A,error:D}=(0,y.Ny)(a,{search:n||void 0,status:"all"!==j?j:void 0,prescription_type:"all"!==w?w:void 0,page:t,limit:10}),S=(null==E?void 0:E.prescriptions)||[],V=(null==E?void 0:E.total_pages)||1,$=(null==E?void 0:E.total)||0,F=e=>{s.push("/prescriptions/".concat(e))},z=e=>{s.push("/prescriptions/".concat(e,"/edit"))},B=e=>{_.o.info("Funcionalidade de exclus\xe3o ser\xe1 implementada")},q=e=>{_.o.info("Download de PDF ser\xe1 implementado")},Z=()=>{d(""),f("all"),P("all"),c(1)},I=n||"all"!==j||"all"!==w;return A?(0,i.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,i.jsx)(g.LoadingSpinner,{size:"lg"})}):D?(0,i.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,i.jsx)(u.Zp,{children:(0,i.jsx)(u.Wu,{className:"flex flex-col items-center justify-center py-12",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Erro ao carregar prescri\xe7\xf5es"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"Ocorreu um erro ao carregar o hist\xf3rico de prescri\xe7\xf5es do paciente."}),(0,i.jsxs)(h.$,{onClick:()=>s.push("/prescriptions"),children:[(0,i.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Voltar para Prescri\xe7\xf5es"]})]})})})}):(0,i.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,i.jsxs)(h.$,{variant:"ghost",size:"sm",onClick:()=>s.push("/prescriptions"),children:[(0,i.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Hist\xf3rico de Prescri\xe7\xf5es"}),(0,i.jsxs)("p",{className:"text-gray-600",children:["Paciente ID: ",a," • ",$," prescri\xe7\xe3o",1!==$?"\xf5es":""]})]})]}),(0,i.jsxs)(h.$,{onClick:()=>s.push("/prescriptions/create"),children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Nova Prescri\xe7\xe3o"]})]}),(0,i.jsxs)(u.Zp,{children:[(0,i.jsx)(u.aR,{children:(0,i.jsxs)(u.ZB,{className:"text-lg flex items-center",children:[(0,i.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Filtros"]})}),(0,i.jsx)(u.Wu,{children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Buscar"}),(0,i.jsx)(p.p,{placeholder:"Buscar por observa\xe7\xf5es...",value:n,onChange:e=>d(e.target.value)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Status"}),(0,i.jsxs)(b.l6,{value:j,onValueChange:f,children:[(0,i.jsx)(b.bq,{children:(0,i.jsx)(b.yv,{})}),(0,i.jsxs)(b.gC,{children:[(0,i.jsx)(b.eb,{value:"all",children:"Todos os status"}),C.SY.map(e=>(0,i.jsx)(b.eb,{value:e.value,children:e.label},e.value))]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Tipo"}),(0,i.jsxs)(b.l6,{value:w,onValueChange:P,children:[(0,i.jsx)(b.bq,{children:(0,i.jsx)(b.yv,{})}),(0,i.jsxs)(b.gC,{children:[(0,i.jsx)(b.eb,{value:"all",children:"Todos os tipos"}),(0,i.jsx)(b.eb,{value:"simple",children:"Simples"}),(0,i.jsx)(b.eb,{value:"controlled",children:"Controlada"}),(0,i.jsx)(b.eb,{value:"special",children:"Especial"}),(0,i.jsx)(b.eb,{value:"digital",children:"Digital"})]})]})]}),(0,i.jsx)("div",{className:"flex items-end",children:I&&(0,i.jsx)(h.$,{variant:"outline",onClick:Z,className:"w-full",children:"Limpar Filtros"})})]})})]}),0===S.length?(0,i.jsx)(v.p,{icon:o.A,title:"Nenhuma prescri\xe7\xe3o encontrada",description:I?"Nenhuma prescri\xe7\xe3o corresponde aos filtros aplicados.":"Este paciente ainda n\xe3o possui prescri\xe7\xf5es registradas.",action:I?(0,i.jsx)(h.$,{onClick:Z,children:"Limpar Filtros"}):(0,i.jsxs)(h.$,{onClick:()=>s.push("/prescriptions/create"),children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Criar Primeira Prescri\xe7\xe3o"]})}):(0,i.jsx)("div",{className:"space-y-4",children:S.map(e=>(0,i.jsx)(k,{prescription:e,onView:F,onEdit:z,onDelete:B,onDownloadPDF:q},e.id))}),V>1&&(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(N.dK,{currentPage:t,totalPages:V,onPageChange:c})})]})}},72698:(e,s,a)=>{Promise.resolve().then(a.bind(a,14924))}},e=>{e.O(0,[3455,3942,8250,5061,9855,6671,5954,6967,2960,3464,1118,6733,9860,2902,8441,5964,7358],()=>e(e.s=72698)),_N_E=e.O()}]);