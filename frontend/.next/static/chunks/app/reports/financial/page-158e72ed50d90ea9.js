(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8850],{6260:(e,a,s)=>{"use strict";s.d(a,{default:()=>A});var t=s(95155),l=s(12115),r=s(88482),n=s(97168),i=s(88145),c=s(34964),o=s(87983),d=s(55868),x=s(33109),m=s(72713),u=s(35169),h=s(53904),p=s(68500),g=s(39181),j=s(83115),y=s(82085),f=s(53231),v=s(32944),N=s(63008),b=s(4573),w=s(80929),R=s(56671);let A=function(){let[e,a]=(0,l.useState)("overview"),[s,A]=(0,l.useState)({startDate:(0,f.w)(new Date),endDate:(0,v.p)(new Date),type:"financial"}),[F,D]=(0,l.useState)(!1),{generateFinancialReport:M,isGeneratingFinancial:C,savedReports:E}=(0,g.r)(),{dashboardData:k,financialKPIs:T,cashFlowProjection:S,isLoadingDashboard:B}=(0,j.T)(),Z=(null==E?void 0:E.filter(e=>"financial"===e.report_type))||[],[$,L]=(0,l.useState)(!1);(0,l.useEffect)(()=>{P()},[s]);let P=async()=>{try{await M({startDate:s.startDate,endDate:s.endDate,includeProjections:!0,includeComparisons:!0})}catch(e){R.o.error("Erro ao gerar relat\xf3rio financeiro")}},K=async e=>{try{L(!0);let a={title:"Relat\xf3rio Financeiro",subtitle:"Per\xedodo: ".concat((0,N.GP)(s.startDate,"dd/MM/yyyy",{locale:b.F})," - ").concat((0,N.GP)(s.endDate,"dd/MM/yyyy",{locale:b.F})),data:Z||[{periodo:"Sem dados",receita:0,despesa:0,lucro:0}],metadata:{generatedAt:new Date,period:"".concat((0,N.GP)(s.startDate,"dd/MM/yyyy",{locale:b.F})," - ").concat((0,N.GP)(s.endDate,"dd/MM/yyyy",{locale:b.F}))},filters:s},t={format:e,includeFilters:!0,includeSummary:!0,includeCharts:"pdf"===e};switch(e){case"pdf":await (0,y.Q7)(a,t);break;case"excel":await (0,y.bJ)(a,t);break;case"csv":await (0,y.GF)(a,t);break;case"png":let l=document.querySelector(".financial-chart");l&&await (0,y.vc)(l,t)}R.o.success("Relat\xf3rio exportado em ".concat(e.toUpperCase()))}catch(e){R.o.error("Erro ao exportar relat\xf3rio")}finally{L(!1)}},V={type:"bar",xAxisKey:"month",yAxisKey:"revenue",showLegend:!0,formatters:{revenue:{type:"currency"}},series:[{key:"revenue",name:"Receita",color:"#10B981"},{key:"target",name:"Meta",color:"#6B7280"}]},_={type:"line",xAxisKey:"date",yAxisKey:"balance",showLegend:!0,formatters:{balance:{type:"currency"},inflow:{type:"currency"},outflow:{type:"currency"}},series:[{key:"balance",name:"Saldo",color:"#3B82F6"},{key:"inflow",name:"Entradas",color:"#10B981"},{key:"outflow",name:"Sa\xeddas",color:"#EF4444"}]},Q=[{month:"Jan",revenue:15e4,target:14e4},{month:"Fev",revenue:165e3,target:15e4},{month:"Mar",revenue:18e4,target:16e4},{month:"Abr",revenue:175e3,target:17e4},{month:"Mai",revenue:19e4,target:18e4},{month:"Jun",revenue:205e3,target:19e4}],W=[{category:"Pessoal",amount:85e3},{category:"Medicamentos",amount:45e3},{category:"Equipamentos",amount:25e3},{category:"Infraestrutura",amount:2e4},{category:"Outros",amount:15e3}],G=[{date:"01/06",balance:25e4,inflow:45e3,outflow:35e3},{date:"08/06",balance:26e4,inflow:5e4,outflow:4e4},{date:"15/06",balance:275e3,inflow:55e3,outflow:4e4},{date:"22/06",balance:285e3,inflow:48e3,outflow:38e3},{date:"29/06",balance:295e3,inflow:52e3,outflow:42e3}],q=[{name:"Consultas",value:12e4},{name:"Cirurgias",value:85e3},{name:"Exames",value:65e3},{name:"Interna\xe7\xf5es",value:95e3},{name:"Outros",value:35e3}],I=[{title:"Receita Total",value:"R$ 1.165.000",change:"+12.5%",trend:"up",icon:(0,t.jsx)(d.A,{className:"h-5 w-5"}),color:"text-green-600"},{title:"Despesas Totais",value:"R$ 865.000",change:"+8.2%",trend:"up",icon:(0,t.jsx)(x.A,{className:"h-5 w-5"}),color:"text-red-600"},{title:"Lucro L\xedquido",value:"R$ 300.000",change:"+25.8%",trend:"up",icon:(0,t.jsx)(x.A,{className:"h-5 w-5"}),color:"text-green-600"},{title:"Margem de Lucro",value:"25.8%",change:"+2.1pp",trend:"up",icon:(0,t.jsx)(m.A,{className:"h-5 w-5"}),color:"text-blue-600"}];return(0,t.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(w.N_,{to:"/reports",children:(0,t.jsxs)(n.$,{variant:"ghost",size:"sm",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Voltar"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Relat\xf3rios Financeiros"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"An\xe1lise detalhada de receitas, despesas e fluxo de caixa"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.$,{variant:"outline",onClick:P,disabled:C,children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2 ".concat(C?"animate-spin":"")}),"Atualizar"]}),(0,t.jsx)(o.NV,{onExport:K,loading:$,availableFormats:["pdf","excel","csv"],defaultFormat:"pdf"})]})]}),(0,t.jsx)(o.ZN,{filters:s,onFiltersChange:e=>{A(e)},onApplyFilters:()=>{P(),R.o.success("Filtros aplicados com sucesso")},onClearFilters:()=>{A({startDate:(0,f.w)(new Date),endDate:(0,v.p)(new Date),type:"financial"})},loading:C,collapsed:F,onToggleCollapse:()=>D(!F),availableTypes:[{value:"financial",label:"Financeiro"}],availableCategories:[{value:"revenue",label:"Receitas"},{value:"expenses",label:"Despesas"},{value:"billing",label:"Faturamento"},{value:"cash-flow",label:"Fluxo de Caixa"}]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:I.map((e,a)=>(0,t.jsx)(r.Zp,{children:(0,t.jsxs)(r.Wu,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.value})]}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-gray-50",children:(0,t.jsx)(x.A,{className:"h-5 w-5 text-blue-600"})})]}),(0,t.jsxs)("div",{className:"flex items-center mt-4",children:[(0,t.jsxs)(i.E,{variant:"up"===e.trend?"default":"destructive",className:"text-xs",children:[(0,t.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"+5.2%"]}),(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"vs. per\xedodo anterior"})]})]})},a))}),(0,t.jsxs)(c.Tabs,{value:e,onValueChange:a,className:"space-y-6",children:[(0,t.jsxs)(c.TabsList,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(c.TabsTrigger,{value:"overview",children:"Vis\xe3o Geral"}),(0,t.jsx)(c.TabsTrigger,{value:"revenue",children:"Receitas"}),(0,t.jsx)(c.TabsTrigger,{value:"expenses",children:"Despesas"}),(0,t.jsx)(c.TabsTrigger,{value:"cash-flow",children:"Fluxo de Caixa"})]}),(0,t.jsxs)(c.TabsContent,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(o.Qe,{title:"Receitas vs Meta",description:"Compara\xe7\xe3o entre receitas realizadas e metas estabelecidas",data:Q,config:V,loading:B,onRefresh:()=>P(),onExport:e=>K(e),height:350}),(0,t.jsx)(o.Qe,{title:"Distribui\xe7\xe3o de Receitas",description:"Receitas por tipo de servi\xe7o",data:q,config:{type:"pie",yAxisKey:"value",showLegend:!0,formatters:{value:{type:"currency"}}},loading:B,onRefresh:()=>P(),onExport:e=>K(e),height:350})]}),(0,t.jsx)(o.Qe,{title:"Fluxo de Caixa",description:"Evolu\xe7\xe3o do saldo, entradas e sa\xeddas ao longo do tempo",data:G,config:_,loading:B,onRefresh:()=>P(),onExport:e=>K(e),height:400})]}),(0,t.jsx)(c.TabsContent,{value:"revenue",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(o.Qe,{title:"Evolu\xe7\xe3o das Receitas",description:"Receitas mensais comparadas com as metas",data:Q,config:V,loading:B,onRefresh:()=>P(),onExport:e=>K(e),height:400})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-lg",children:"Resumo de Receitas"})}),(0,t.jsxs)(r.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Receita do M\xeas"}),(0,t.jsx)("span",{className:"font-semibold",children:"R$ 205.000"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Meta do M\xeas"}),(0,t.jsx)("span",{className:"font-semibold",children:"R$ 190.000"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Varia\xe7\xe3o"}),(0,t.jsxs)(i.E,{variant:"default",className:"text-xs",children:[(0,t.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"+7.9%"]})]}),(0,t.jsx)("div",{className:"pt-2 border-t",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"Acumulado no Ano"}),(0,t.jsx)("span",{className:"font-semibold",children:"R$ 1.165.000"})]})})]})]}),(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-lg",children:"Top Servi\xe7os"})}),(0,t.jsx)(r.Wu,{className:"space-y-3",children:q.slice(0,3).map((e,a)=>(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.name}),(0,t.jsx)("span",{className:"font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.value)})]},a))})]})]})]})}),(0,t.jsx)(c.TabsContent,{value:"expenses",className:"space-y-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsx)(o.Qe,{title:"Despesas por Categoria",description:"Distribui\xe7\xe3o das despesas por categoria",data:W,config:{type:"area",xAxisKey:"category",yAxisKey:"amount",showLegend:!0,formatters:{amount:{type:"currency"}},series:[{key:"amount",name:"Valor",color:"#EF4444"}]},loading:B,onRefresh:()=>P(),onExport:e=>K(e),height:400}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{className:"text-lg",children:"An\xe1lise de Despesas"})}),(0,t.jsx)(r.Wu,{className:"space-y-4",children:W.map((e,a)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.category}),(0,t.jsx)("span",{className:"text-sm font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.amount)})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"".concat(e.amount/Math.max(...W.map(e=>e.amount))*100,"%")}})})]},a))})]})})]})}),(0,t.jsxs)(c.TabsContent,{value:"cash-flow",className:"space-y-6",children:[(0,t.jsx)(o.Qe,{title:"Fluxo de Caixa Detalhado",description:"An\xe1lise detalhada do fluxo de caixa com proje\xe7\xf5es",data:G,config:_,loading:B,onRefresh:()=>P(),onExport:e=>K(e),height:450}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(r.Zp,{children:(0,t.jsx)(r.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Saldo Atual"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:"R$ 295.000"})]}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-green-50",children:(0,t.jsx)(d.A,{className:"h-5 w-5 text-green-600"})})]})})}),(0,t.jsx)(r.Zp,{children:(0,t.jsx)(r.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Entradas do M\xeas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:"R$ 250.000"})]}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-blue-50",children:(0,t.jsx)(x.A,{className:"h-5 w-5 text-blue-600"})})]})})}),(0,t.jsx)(r.Zp,{children:(0,t.jsx)(r.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Sa\xeddas do M\xeas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600 mt-1",children:"R$ 195.000"})]}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-red-50",children:(0,t.jsx)(p.A,{className:"h-5 w-5 text-red-600"})})]})})})]})]})]})]})}},24575:(e,a,s)=>{Promise.resolve().then(s.bind(s,63872)),Promise.resolve().then(s.bind(s,6260))},55868:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(19946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},72713:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(19946).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])}},e=>{e.O(0,[3355,3524,3930,3455,3942,8250,5061,9855,6671,5954,6967,2960,3464,5452,1118,7127,3008,5297,7185,2203,8962,9340,1969,8529,5719,8814,8441,5964,7358],()=>e(e.s=24575)),_N_E=e.O()}]);