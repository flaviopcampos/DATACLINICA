(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[226],{14016:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>k});var l=a(95155),i=a(12115),c=a(35695),r=a(76580),t=a(3070),n=a(88482),d=a(97168),o=a(27737),x=a(49026),m=a(67133),u=a(16559),h=a(35169),j=a(92657),N=a(1243),f=a(44020),v=a(13717),p=a(9446),g=a(55670),w=a(50430),y=a(62525),b=a(381),A=a(79397),E=a(56671),_=a(53999);function k(s){let{params:e}=s,a=(0,c.useRouter)(),[k,C]=(0,i.useState)(!1),[z,D]=(0,i.useState)(!1),[R,U]=(0,i.useState)(null),[q,$]=(0,i.useState)("");i.useEffect(()=>{e.then(s=>{$(s.id)})},[e]);let{data:T,isLoading:V,error:Z,refetch:S}=(0,t.Jd)(q),O=(0,t.Qc)(),Y=(0,t.iY)(),F=(0,t.Nu)(),W=(0,t.xJ)(),B=async s=>{try{await O.mutateAsync({id:q,data:s}),E.o.success("Usu\xe1rio atualizado com sucesso!"),S()}catch(s){throw E.o.error("Erro ao atualizar usu\xe1rio"),s}},L=async()=>{U("delete");try{await Y.mutateAsync(q),E.o.success("Usu\xe1rio exclu\xeddo com sucesso!"),a.push("/users")}catch(s){E.o.error("Erro ao excluir usu\xe1rio")}finally{U(null),D(!1)}},I=async()=>{if(T){U("status");try{await F.mutateAsync({id:q,isActive:!T.is_active}),E.o.success("Usu\xe1rio ".concat(T.is_active?"desativado":"ativado"," com sucesso!")),S()}catch(s){E.o.error("Erro ao alterar status do usu\xe1rio")}finally{U(null)}}},J=async()=>{U("unlock");try{await W.mutateAsync(q),E.o.success("Usu\xe1rio desbloqueado com sucesso!"),S()}catch(s){E.o.error("Erro ao desbloquear usu\xe1rio")}finally{U(null)}},P=(null==T?void 0:T.locked_until)&&new Date(T.locked_until)>new Date;return V?(0,l.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)(o.E,{className:"h-9 w-20"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(o.E,{className:"h-8 w-64 mb-2"}),(0,l.jsx)(o.E,{className:"h-4 w-48"})]})]}),(0,l.jsx)(o.E,{className:"h-9 w-32"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,l.jsx)("div",{className:"lg:col-span-2 space-y-6",children:(0,l.jsxs)(n.Zp,{children:[(0,l.jsx)(n.aR,{children:(0,l.jsx)(o.E,{className:"h-6 w-48"})}),(0,l.jsx)(n.Wu,{className:"space-y-4",children:Array.from({length:6}).map((s,e)=>(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(o.E,{className:"h-4 w-4"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(o.E,{className:"h-3 w-20"}),(0,l.jsx)(o.E,{className:"h-4 w-32"})]})]},e))})]})}),(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)(n.Zp,{children:[(0,l.jsx)(n.aR,{children:(0,l.jsx)(o.E,{className:"h-6 w-32"})}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsx)(o.E,{className:"h-20 w-20 rounded-full mb-4"}),(0,l.jsx)(o.E,{className:"h-6 w-full mb-2"}),(0,l.jsx)(o.E,{className:"h-4 w-24"})]})]})})]})]}):Z?(0,l.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>a.push("/users"),className:"flex items-center gap-2",children:[(0,l.jsx)(h.A,{className:"h-4 w-4"}),"Voltar"]}),(0,l.jsx)("div",{children:(0,l.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,l.jsx)(j.A,{className:"h-6 w-6"}),"Detalhes do Usu\xe1rio"]})})]})}),(0,l.jsxs)(x.Fc,{variant:"destructive",className:"max-w-4xl mx-auto",children:[(0,l.jsx)(N.A,{className:"h-4 w-4"}),(0,l.jsxs)(x.TN,{children:["Erro ao carregar os dados do usu\xe1rio.",Z instanceof Error?Z.message:"Tente novamente mais tarde."]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(d.$,{onClick:()=>a.push("/users"),children:"Voltar para Lista de Usu\xe1rios"})})]}):T?(0,l.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>a.push("/users"),className:"flex items-center gap-2",children:[(0,l.jsx)(h.A,{className:"h-4 w-4"}),"Voltar"]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,l.jsx)(j.A,{className:"h-6 w-6"}),"Detalhes do Usu\xe1rio"]}),(0,l.jsxs)("p",{className:"text-muted-foreground",children:[T.full_name," (@",T.username,")"]})]})]}),(0,l.jsxs)(m.rI,{children:[(0,l.jsx)(m.ty,{asChild:!0,children:(0,l.jsxs)(d.$,{variant:"outline",size:"sm",children:[(0,l.jsx)(f.A,{className:"h-4 w-4"}),"A\xe7\xf5es"]})}),(0,l.jsxs)(m.SQ,{align:"end",className:"w-48",children:[(0,l.jsxs)(m._2,{onClick:()=>a.push("/users/".concat(q,"/edit")),children:[(0,l.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,l.jsxs)(m._2,{onClick:I,disabled:!!R,children:[T.is_active?(0,l.jsx)(p.A,{className:"mr-2 h-4 w-4"}):(0,l.jsx)(g.A,{className:"mr-2 h-4 w-4"}),T.is_active?"Desativar":"Ativar"]}),P&&(0,l.jsxs)(m._2,{onClick:J,disabled:!!R,children:[(0,l.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Desbloquear"]}),(0,l.jsx)(m.mB,{}),(0,l.jsxs)(m._2,{onClick:()=>D(!0),className:"text-red-600 focus:text-red-600",children:[(0,l.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,l.jsx)(r.qu,{user:T,variant:"detailed",showActions:!1}),(0,l.jsxs)(n.Zp,{children:[(0,l.jsx)(n.aR,{children:(0,l.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(b.A,{className:"h-5 w-5"}),"A\xe7\xf5es R\xe1pidas"]})}),(0,l.jsx)(n.Wu,{children:(0,l.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,l.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>a.push("/users/".concat(q,"/edit")),children:[(0,l.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Editar Usu\xe1rio"]}),(0,l.jsxs)(d.$,{variant:"outline",size:"sm",onClick:I,disabled:!!R,children:[T.is_active?(0,l.jsx)(p.A,{className:"mr-2 h-4 w-4"}):(0,l.jsx)(g.A,{className:"mr-2 h-4 w-4"}),T.is_active?"Desativar":"Ativar"]}),P&&(0,l.jsxs)(d.$,{variant:"outline",size:"sm",onClick:J,disabled:!!R,children:[(0,l.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Desbloquear"]})]})})]})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)(r.pE,{users:[T]}),(0,l.jsxs)(n.Zp,{children:[(0,l.jsx)(n.aR,{children:(0,l.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,l.jsx)(A.A,{className:"h-5 w-5"}),"Atividade Recente"]})}),(0,l.jsx)(n.Wu,{className:"space-y-3",children:(0,l.jsxs)("div",{className:"text-sm space-y-2",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"\xdaltimo acesso:"}),(0,l.jsx)("span",{className:"font-medium",children:T.last_login?(0,_.Yq)(T.last_login):"Nunca"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Criado em:"}),(0,l.jsx)("span",{className:"font-medium",children:(0,_.Yq)(T.created_at)})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-muted-foreground",children:"Atualizado em:"}),(0,l.jsx)("span",{className:"font-medium",children:(0,_.Yq)(T.updated_at)})]}),T.failed_login_attempts&&T.failed_login_attempts>0&&(0,l.jsxs)("div",{className:"flex justify-between text-amber-600",children:[(0,l.jsx)("span",{children:"Tentativas falharam:"}),(0,l.jsx)("span",{className:"font-medium",children:T.failed_login_attempts})]})]})})]})]})]}),(0,l.jsx)(r.Y_,{user:T,mode:"view",open:k,onOpenChange:C,onSave:B,loading:O.isPending}),(0,l.jsx)(u.Lt,{open:z,onOpenChange:D,children:(0,l.jsxs)(u.EO,{children:[(0,l.jsxs)(u.wd,{children:[(0,l.jsx)(u.r7,{children:"Confirmar Exclus\xe3o"}),(0,l.jsxs)(u.$v,{children:["Tem certeza que deseja excluir o usu\xe1rio ",(0,l.jsx)("strong",{children:T.full_name}),"? Esta a\xe7\xe3o n\xe3o pode ser desfeita e todos os dados relacionados ser\xe3o perdidos."]})]}),(0,l.jsxs)(u.ck,{children:[(0,l.jsx)(u.Zr,{disabled:!!R,children:"Cancelar"}),(0,l.jsx)(u.Rx,{onClick:L,disabled:!!R,className:"bg-red-600 hover:bg-red-700",children:"delete"===R?"Excluindo...":"Excluir"})]})]})})]}):(0,l.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>a.push("/users"),className:"flex items-center gap-2",children:[(0,l.jsx)(h.A,{className:"h-4 w-4"}),"Voltar"]}),(0,l.jsx)("div",{children:(0,l.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,l.jsx)(j.A,{className:"h-6 w-6"}),"Detalhes do Usu\xe1rio"]})})]})}),(0,l.jsxs)(x.Fc,{className:"max-w-4xl mx-auto",children:[(0,l.jsx)(N.A,{className:"h-4 w-4"}),(0,l.jsx)(x.TN,{children:"Usu\xe1rio n\xe3o encontrado. Verifique se o ID est\xe1 correto."})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(d.$,{onClick:()=>a.push("/users"),children:"Voltar para Lista de Usu\xe1rios"})})]})}},27737:(s,e,a)=>{"use strict";a.d(e,{E:()=>c});var l=a(95155),i=a(53999);function c(s){let{className:e,...a}=s;return(0,l.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-muted",e),...a})}},49026:(s,e,a)=>{"use strict";a.d(e,{Fc:()=>n,TN:()=>d});var l=a(95155),i=a(12115),c=a(74466),r=a(53999);let t=(0,c.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=i.forwardRef((s,e)=>{let{className:a,variant:i,...c}=s;return(0,l.jsx)("div",{ref:e,role:"alert",className:(0,r.cn)(t({variant:i}),a),...c})});n.displayName="Alert",i.forwardRef((s,e)=>{let{className:a,...i}=s;return(0,l.jsx)("h5",{ref:e,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",a),...i})}).displayName="AlertTitle";let d=i.forwardRef((s,e)=>{let{className:a,...i}=s;return(0,l.jsx)("div",{ref:e,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",a),...i})});d.displayName="AlertDescription"},68713:(s,e,a)=>{Promise.resolve().then(a.bind(a,14016))}},s=>{s.O(0,[3455,3942,8250,5061,9855,6671,5954,6967,2960,3464,5452,1118,2804,5749,2107,5935,5865,186,9208,6393,8932,3150,6580,8441,5964,7358],()=>s(s.s=68713)),_N_E=s.O()}]);