(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4089],{9159:(e,s,a)=>{Promise.resolve().then(a.bind(a,45154))},35169:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,s,a)=>{"use strict";var t=a(18999);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},40646:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},45154:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>w});var t=a(95155),r=a(12115),l=a(35695),i=a(6874),n=a.n(i),o=a(62177),d=a(90221),c=a(51154),m=a(35169),u=a(40646),h=a(78749),x=a(92657),f=a(68309),p=a(59540),g=a(97168),v=a(89852),b=a(82714),j=a(53999);let N=f.Ik({password:f.Yj().min(8,"A senha deve ter pelo menos 8 caracteres").regex(/[A-Z]/,"A senha deve conter pelo menos uma letra mai\xfascula").regex(/[a-z]/,"A senha deve conter pelo menos uma letra min\xfascula").regex(/[0-9]/,"A senha deve conter pelo menos um n\xfamero"),confirmPassword:f.Yj()}).refine(e=>e.password===e.confirmPassword,{message:"As senhas n\xe3o coincidem",path:["confirmPassword"]});function w(){let[e,s]=(0,r.useState)(!1),[i,f]=(0,r.useState)(!1),[w,y]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),[P,S]=(0,r.useState)(null);(0,l.useRouter)();let z=(0,l.useSearchParams)(),{register:D,handleSubmit:B,formState:{errors:M},setError:R,watch:C}=(0,o.mN)({resolver:(0,d.u)(N)}),F=C("password");(0,r.useEffect)(()=>{(async()=>{try{let{authService:e}=await Promise.all([a.e(5954),a.e(2354),a.e(3168)]).then(a.bind(a,33168)),{data:{session:s}}=await e.getSession(),t=z.get("access_token");z.get("refresh_token"),s||t?S(!0):S(!1)}catch(e){S(!1)}})()},[z]);let L=async e=>{y(!0);try{let{authService:s}=await Promise.all([a.e(5954),a.e(2354),a.e(3168)]).then(a.bind(a,33168)),{error:t}=await s.updatePassword(e.password);t?t.message.includes("session")?R("root",{message:"Sess\xe3o expirada. Solicite um novo link de recupera\xe7\xe3o."}):R("root",{message:t.message||"Erro ao atualizar senha"}):A(!0)}catch(e){R("root",{message:"Erro interno do servidor. Tente novamente."})}finally{y(!1)}},$=(e=>{if(!e)return{score:0,label:"",color:""};let s=0;return(e.length>=8&&s++,/[A-Z]/.test(e)&&s++,/[a-z]/.test(e)&&s++,/[0-9]/.test(e)&&s++,/[^A-Za-z0-9]/.test(e)&&s++,s<=2)?{score:s,label:"Fraca",color:"bg-red-500"}:s<=3?{score:s,label:"M\xe9dia",color:"bg-yellow-500"}:s<=4?{score:s,label:"Forte",color:"bg-green-500"}:{score:s,label:"Muito Forte",color:"bg-green-600"}})(F||"");return null===P?(0,t.jsx)(p.D,{title:"Verificando sess\xe3o...",subtitle:"Aguarde um momento",showBackButton:!1,children:(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(c.A,{className:"h-8 w-8 animate-spin text-primary"})})}):P?k?(0,t.jsx)(p.D,{title:"Senha atualizada!",subtitle:"Sua senha foi alterada com sucesso",showBackButton:!1,children:(0,t.jsxs)("div",{className:"text-center space-y-6",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(u.A,{className:"w-8 h-8 text-green-600"})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"Sua senha foi alterada com sucesso."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Agora voc\xea pode fazer login com sua nova senha."})]}),(0,t.jsx)(n(),{href:"/auth/login",className:"block",children:(0,t.jsx)(g.$,{className:"w-full",children:"Fazer login"})})]})}):(0,t.jsx)(p.D,{title:"Nova senha",subtitle:"Digite sua nova senha",showBackButton:!1,children:(0,t.jsxs)("form",{onSubmit:B(L),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.Label,{htmlFor:"password",children:"Nova senha"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.p,{id:"password",type:e?"text":"password",placeholder:"Digite sua nova senha",...D("password"),className:(0,j.cn)(M.password&&"border-destructive","pr-10")}),(0,t.jsx)("button",{type:"button",onClick:()=>s(!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:e?(0,t.jsx)(h.A,{className:"h-4 w-4"}):(0,t.jsx)(x.A,{className:"h-4 w-4"})})]}),M.password&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:M.password.message}),F&&(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"h-2 rounded-full transition-all ".concat($.color),style:{width:"".concat($.score/5*100,"%")}})}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:$.label})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(b.Label,{htmlFor:"confirmPassword",children:"Confirmar nova senha"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.p,{id:"confirmPassword",type:i?"text":"password",placeholder:"Digite novamente sua nova senha",...D("confirmPassword"),className:(0,j.cn)(M.confirmPassword&&"border-destructive","pr-10")}),(0,t.jsx)("button",{type:"button",onClick:()=>f(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:i?(0,t.jsx)(h.A,{className:"h-4 w-4"}):(0,t.jsx)(x.A,{className:"h-4 w-4"})})]}),M.confirmPassword&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:M.confirmPassword.message})]}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Requisitos da senha:"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,t.jsx)("li",{className:(null==F?void 0:F.length)>=8?"text-green-700":"",children:"• Pelo menos 8 caracteres"}),(0,t.jsx)("li",{className:/[A-Z]/.test(F||"")?"text-green-700":"",children:"• Uma letra mai\xfascula"}),(0,t.jsx)("li",{className:/[a-z]/.test(F||"")?"text-green-700":"",children:"• Uma letra min\xfascula"}),(0,t.jsx)("li",{className:/[0-9]/.test(F||"")?"text-green-700":"",children:"• Um n\xfamero"})]})]}),M.root&&(0,t.jsx)("div",{className:"p-3 text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded-md",children:M.root.message}),(0,t.jsx)(g.$,{type:"submit",className:"w-full",disabled:w,children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Atualizando senha..."]}):"Atualizar senha"}),(0,t.jsx)("div",{className:"text-center space-y-2",children:(0,t.jsxs)(n(),{href:"/auth/login",className:"text-sm text-muted-foreground hover:text-primary transition-colors inline-flex items-center gap-1",children:[(0,t.jsx)(m.A,{className:"w-3 h-3"}),"Voltar ao login"]})})]})}):(0,t.jsx)(p.D,{title:"Link inv\xe1lido ou expirado",subtitle:"N\xe3o foi poss\xedvel verificar sua identidade",showBackButton:!1,children:(0,t.jsxs)("div",{className:"text-center space-y-6",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:"O link de recupera\xe7\xe3o de senha \xe9 inv\xe1lido ou expirou."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Links de recupera\xe7\xe3o expiram em 1 hora por seguran\xe7a."})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(n(),{href:"/auth/forgot-password",className:"block",children:(0,t.jsx)(g.$,{className:"w-full",children:"Solicitar novo link"})}),(0,t.jsx)(n(),{href:"/auth/login",className:"block",children:(0,t.jsxs)(g.$,{variant:"outline",className:"w-full",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Voltar ao login"]})})]})]})})}},51154:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},51976:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},53999:(e,s,a)=>{"use strict";a.d(s,{Yq:()=>i,cn:()=>l,r6:()=>n});var t=a(52596),r=a(39688);function l(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,r.QP)((0,t.$)(s))}function i(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(e))}function n(e){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},59540:(e,s,a)=>{"use strict";a.d(s,{D:()=>o});var t=a(95155),r=a(6874),l=a.n(r),i=a(51976),n=a(35169);function o(e){let{children:s,title:a,subtitle:r,showBackButton:o=!1}=e;return(0,t.jsxs)("div",{className:"min-h-screen flex",children:[(0,t.jsxs)("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 to-blue-800 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/20"}),(0,t.jsxs)("div",{className:"relative z-10 flex flex-col justify-center items-center p-12 text-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,t.jsx)("div",{className:"p-3 bg-white/20 rounded-full backdrop-blur-sm",children:(0,t.jsx)(i.A,{className:"h-8 w-8"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"DataCl\xednica"})]}),(0,t.jsxs)("div",{className:"text-center max-w-md",children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Sistema Interno de Gest\xe3o Cl\xednica"}),(0,t.jsx)("p",{className:"text-blue-100 text-lg leading-relaxed",children:"Plataforma especializada para gest\xe3o de sa\xfade mental com seguran\xe7a, privacidade e efici\xeancia profissional."})]}),(0,t.jsx)("div",{className:"mt-12 space-y-4 text-center",children:(0,t.jsxs)("div",{className:"p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[(0,t.jsx)("div",{className:"text-sm text-blue-200 mb-1",children:"Sistema Corporativo"}),(0,t.jsx)("div",{className:"font-semibold",children:"Acesso Restrito a Profissionais"})]})})]}),(0,t.jsx)("div",{className:"absolute top-20 right-20 w-32 h-32 bg-white/10 rounded-full blur-xl"}),(0,t.jsx)("div",{className:"absolute bottom-20 left-20 w-24 h-24 bg-white/10 rounded-full blur-xl"})]}),(0,t.jsx)("div",{className:"flex-1 flex flex-col justify-center px-6 py-12 lg:px-12",children:(0,t.jsxs)("div",{className:"mx-auto w-full max-w-md",children:[(0,t.jsxs)("div",{className:"mb-8",children:[o&&(0,t.jsxs)(l(),{href:"/",className:"inline-flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground mb-6 transition-colors",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),"Voltar ao in\xedcio"]}),(0,t.jsxs)("div",{className:"lg:hidden flex items-center gap-2 mb-6",children:[(0,t.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,t.jsx)(i.A,{className:"h-6 w-6 text-primary"})}),(0,t.jsx)("span",{className:"text-xl font-bold",children:"DataCl\xednica"})]}),(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:a}),r&&(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:r})]}),s,(0,t.jsxs)("div",{className:"mt-8 text-center text-sm text-muted-foreground",children:[(0,t.jsx)("p",{children:"Sistema corporativo - Credenciais fornecidas pela administra\xe7\xe3o"}),(0,t.jsxs)("p",{className:"mt-2",children:[(0,t.jsx)(l(),{href:"/terms",className:"underline hover:text-foreground",children:"Termos de Uso"})," ","|"," ",(0,t.jsx)(l(),{href:"/privacy",className:"underline hover:text-foreground",children:"Pol\xedtica de Privacidade"})]})]})]})})]})}},63655:(e,s,a)=>{"use strict";a.d(s,{hO:()=>o,sG:()=>n});var t=a(12115),r=a(47650),l=a(99708),i=a(95155),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let a=(0,l.TL)(`Primitive.${s}`),r=t.forwardRef((e,t)=>{let{asChild:r,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(r?a:s,{...l,ref:t})});return r.displayName=`Primitive.${s}`,{...e,[s]:r}},{});function o(e,s){e&&r.flushSync(()=>e.dispatchEvent(s))}},78749:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},82714:(e,s,a)=>{"use strict";a.d(s,{Label:()=>d});var t=a(95155),r=a(12115),l=a(40968),i=a(74466),n=a(53999);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(l.b,{ref:s,className:(0,n.cn)(o(),a),...r})});d.displayName=l.b.displayName},89852:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(95155),r=a(12115),l=a(53999);let i=r.forwardRef((e,s)=>{let{className:a,type:r,...i}=e;return(0,t.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...i})});i.displayName="Input"},92657:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(19946).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},97168:(e,s,a)=>{"use strict";a.d(s,{$:()=>d,r:()=>o});var t=a(95155),r=a(12115),l=a(99708),i=a(74466),n=a(53999);let o=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,s)=>{let{className:a,variant:r,size:i,asChild:d=!1,...c}=e,m=d?l.DX:"button";return(0,t.jsx)(m,{className:(0,n.cn)(o({variant:r,size:i,className:a})),ref:s,...c})});d.displayName="Button"}},e=>{e.O(0,[3455,6874,2804,8441,5964,7358],()=>e(e.s=9159)),_N_E=e.O()}]);