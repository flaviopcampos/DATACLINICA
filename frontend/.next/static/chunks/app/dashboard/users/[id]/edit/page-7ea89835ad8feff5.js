(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1785],{27737:(e,s,a)=>{"use strict";a.d(s,{E:()=>i});var r=a(95155),t=a(53999);function i(e){let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",s),...a})}},28407:(e,s,a)=>{Promise.resolve().then(a.bind(a,55214))},55214:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>j});var r=a(95155),t=a(12115),i=a(35695),l=a(35169),c=a(54416),n=a(4229),d=a(3070),m=a(88255),o=a(3803),u=a(97168),x=a(88482),h=a(27737),p=a(56671);function j(){let e=(0,i.useParams)(),s=(0,i.useRouter)(),a=e.id,{getUserById:j,updateUser:N}=(0,d.kp)(),{roles:v}=(0,m.zn)(),{data:b,isLoading:f,error:g}=j(a),[y,w]=(0,t.useState)(!1),[E,k]=(0,t.useState)(!1),C=async e=>{if(b){w(!0);try{await N.mutateAsync({userId:a,data:e}),p.o.success("Usu\xe1rio atualizado com sucesso!"),k(!1),s.push("/dashboard/users/".concat(a))}catch(e){p.o.error(e.message||"Erro ao atualizar usu\xe1rio")}finally{w(!1)}}},A=()=>{(!E||window.confirm("Voc\xea tem altera\xe7\xf5es n\xe3o salvas. Tem certeza que deseja sair?"))&&s.push("/dashboard/users/".concat(a))};return((0,t.useEffect)(()=>{let e=e=>{E&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[E]),g)?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)(x.Zp,{className:"border-red-200 bg-red-50",children:(0,r.jsx)(x.Wu,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center text-red-600",children:[(0,r.jsx)("p",{className:"font-medium",children:"Erro ao carregar usu\xe1rio"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:g.message}),(0,r.jsx)(u.$,{variant:"outline",className:"mt-4",onClick:()=>s.push("/dashboard/users"),children:"Voltar para Lista"})]})})})}):f?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(h.E,{className:"h-10 w-10"}),(0,r.jsx)(h.E,{className:"h-8 w-64"})]}),(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)(h.E,{className:"h-6 w-48"})}),(0,r.jsx)(x.Wu,{className:"space-y-4",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Array.from({length:8}).map((e,s)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(h.E,{className:"h-4 w-24"}),(0,r.jsx)(h.E,{className:"h-10 w-full"})]},s))})})]})]}):b?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(u.$,{variant:"ghost",size:"icon",onClick:A,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Usu\xe1rio"}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Atualize as informa\xe7\xf5es de ",b.name]})]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)(u.$,{variant:"outline",onClick:A,disabled:y,className:"gap-2",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),"Cancelar"]})})]}),(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsx)(x.ZB,{children:"Informa\xe7\xf5es do Usu\xe1rio"}),E&&(0,r.jsx)("div",{className:"text-sm text-amber-600 bg-amber-50 p-2 rounded border border-amber-200",children:"Voc\xea tem altera\xe7\xf5es n\xe3o salvas"})]}),(0,r.jsx)(x.Wu,{children:(0,r.jsx)(o.q,{initialData:{name:b.name,email:b.email,phone:b.phone||"",cpf:b.cpf||"",crm:b.crm||"",specialty:b.specialty||"",role:b.role,status:b.status,department:b.department||"",permissions:b.permissions||[]},roles:v||[],onSubmit:C,onChange:()=>{k(!0)},isSubmitting:y,submitButtonText:"Salvar Altera\xe7\xf5es",submitButtonIcon:(0,r.jsx)(n.A,{className:"h-4 w-4"}),mode:"edit"})})]}),E&&(0,r.jsx)(x.Zp,{className:"border-amber-200 bg-amber-50",children:(0,r.jsx)(x.Wu,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-amber-800",children:[(0,r.jsx)("div",{className:"h-2 w-2 bg-amber-500 rounded-full"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"Voc\xea tem altera\xe7\xf5es n\xe3o salvas. Certifique-se de salvar antes de sair da p\xe1gina."})]})})})]}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)(x.Zp,{children:(0,r.jsx)(x.Wu,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Usu\xe1rio n\xe3o encontrado"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"O usu\xe1rio solicitado n\xe3o existe ou foi removido."}),(0,r.jsx)(u.$,{variant:"outline",className:"mt-4",onClick:()=>s.push("/dashboard/users"),children:"Voltar para Lista"})]})})})})}}},e=>{e.O(0,[3455,3942,8250,5061,9855,6671,5954,6967,2960,3464,2804,8418,5865,186,9208,8441,5964,7358],()=>e(e.s=28407)),_N_E=e.O()}]);