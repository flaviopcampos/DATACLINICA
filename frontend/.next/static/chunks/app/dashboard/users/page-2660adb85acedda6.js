(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9242],{3070:(e,s,r)=>{"use strict";r.d(s,{Jd:()=>d,Nu:()=>h,Qc:()=>m,Tk:()=>u,iY:()=>x,kp:()=>c,xJ:()=>v});var a=r(32960),l=r(26715),t=r(5041),i=r(56671),n=r(25667);let o={all:["users"],lists:()=>[...o.all,"list"],list:e=>[...o.lists(),{filters:e}],details:()=>[...o.all,"detail"],detail:e=>[...o.details(),e],current:()=>[...o.all,"current"],sessions:e=>[...o.all,"sessions",e],audit:e=>[...o.all,"audit",e]};function c(e){return(0,a.I)({queryKey:o.list(null==e?void 0:e.filters),queryFn:()=>n.Dv.getUsers(e),staleTime:3e5,gcTime:6e5})}function d(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return(0,a.I)({queryKey:o.detail(e),queryFn:()=>n.Dv.getUserById(e),enabled:s&&!!e,staleTime:3e5,gcTime:6e5})}function u(){let e=(0,l.jE)();return(0,t.n)({mutationFn:e=>n.Dv.createUser(e),onSuccess:s=>{e.invalidateQueries({queryKey:o.lists()}),e.setQueryData(o.detail(s.id),s),i.o.success("Usu\xe1rio criado com sucesso!")},onError:e=>{var s,r;let a=(null==e||null==(r=e.response)||null==(s=r.data)?void 0:s.detail)||"Erro ao criar usu\xe1rio";i.o.error(a)}})}function m(){let e=(0,l.jE)();return(0,t.n)({mutationFn:e=>{let{id:s,userData:r}=e;return n.Dv.updateUser(s,r)},onSuccess:s=>{e.setQueryData(o.detail(s.id),s),e.invalidateQueries({queryKey:o.lists()});let r=e.getQueryData(o.current());r&&r.id===s.id&&e.setQueryData(o.current(),s),i.o.success("Usu\xe1rio atualizado com sucesso!")},onError:e=>{var s,r;let a=(null==e||null==(r=e.response)||null==(s=r.data)?void 0:s.detail)||"Erro ao atualizar usu\xe1rio";i.o.error(a)}})}function x(){let e=(0,l.jE)();return(0,t.n)({mutationFn:e=>n.Dv.deleteUser(e),onSuccess:(s,r)=>{e.removeQueries({queryKey:o.detail(r)}),e.invalidateQueries({queryKey:o.lists()}),i.o.success("Usu\xe1rio removido com sucesso!")},onError:e=>{var s,r;let a=(null==e||null==(r=e.response)||null==(s=r.data)?void 0:s.detail)||"Erro ao remover usu\xe1rio";i.o.error(a)}})}function h(){let e=(0,l.jE)();return(0,t.n)({mutationFn:e=>{let{id:s,isActive:r}=e;return n.Dv.toggleUserStatus(s,r)},onSuccess:s=>{e.setQueryData(o.detail(s.id),s),e.invalidateQueries({queryKey:o.lists()});let r=s.is_active?"ativado":"desativado";i.o.success("Usu\xe1rio ".concat(r," com sucesso!"))},onError:e=>{var s,r;let a=(null==e||null==(r=e.response)||null==(s=r.data)?void 0:s.detail)||"Erro ao alterar status do usu\xe1rio";i.o.error(a)}})}function v(){let e=(0,l.jE)();return(0,t.n)({mutationFn:e=>n.Dv.unlockUser(e),onSuccess:s=>{e.setQueryData(o.detail(s.id),s),e.invalidateQueries({queryKey:o.lists()}),i.o.success("Conta desbloqueada com sucesso!")},onError:e=>{var s,r;let a=(null==e||null==(r=e.response)||null==(s=r.data)?void 0:s.detail)||"Erro ao desbloquear conta";i.o.error(a)}})}},23517:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>E});var a=r(95155),l=r(12115),t=r(75525),i=r(84616),n=r(47924),o=r(66932),c=r(71007),d=r(3070),u=r(64483),m=r(45654),x=r(97168),h=r(89852),v=r(67133),j=r(95784),g=r(88482),p=r(27737),f=r(6874),y=r.n(f),N=r(56671);function E(){let[e,s]=(0,l.useState)(""),[r,f]=(0,l.useState)("all"),[E,b]=(0,l.useState)("all"),[w,S]=(0,l.useState)("grid"),{users:A,isLoading:D,error:q,stats:C,deleteUser:U,toggleUserStatus:T,resetPassword:I}=(0,d.kp)({search:e,status:"all"===r?void 0:r,role:"all"===E?void 0:E}),Q=async e=>{if(window.confirm("Tem certeza que deseja excluir este usu\xe1rio?"))try{await U.mutateAsync(e),N.o.success("Usu\xe1rio exclu\xeddo com sucesso!")}catch(e){N.o.error("Erro ao excluir usu\xe1rio")}},k=async(e,s)=>{try{await T.mutateAsync({userId:e,status:"active"===s?"inactive":"active"}),N.o.success("Status do usu\xe1rio atualizado!")}catch(e){N.o.error("Erro ao atualizar status")}},P=async e=>{if(window.confirm("Tem certeza que deseja resetar a senha deste usu\xe1rio?"))try{await I.mutateAsync(e),N.o.success("Senha resetada! Nova senha enviada por email.")}catch(e){N.o.error("Erro ao resetar senha")}};return q?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)(g.Zp,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(g.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center text-red-600",children:[(0,a.jsx)("p",{className:"font-medium",children:"Erro ao carregar usu\xe1rios"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:q.message})]})})})}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Gest\xe3o de Usu\xe1rios"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerencie usu\xe1rios, permiss\xf5es e perfis de acesso"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(y(),{href:"/dashboard/users/roles",children:(0,a.jsxs)(x.$,{variant:"outline",className:"gap-2",children:[(0,a.jsx)(t.A,{className:"h-4 w-4"}),"Perfis"]})}),(0,a.jsx)(y(),{href:"/dashboard/users/permissions",children:(0,a.jsxs)(x.$,{variant:"outline",className:"gap-2",children:[(0,a.jsx)(t.A,{className:"h-4 w-4"}),"Permiss\xf5es"]})}),(0,a.jsx)(y(),{href:"/dashboard/users/new",children:(0,a.jsxs)(x.$,{className:"gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Novo Usu\xe1rio"]})})]})]}),(0,a.jsx)(m.p,{stats:C,isLoading:D}),(0,a.jsxs)(g.Zp,{children:[(0,a.jsx)(g.aR,{children:(0,a.jsx)(g.ZB,{className:"text-lg",children:"Filtros"})}),(0,a.jsx)(g.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(h.p,{placeholder:"Buscar usu\xe1rios...",value:e,onChange:e=>s(e.target.value),className:"pl-10"})]})}),(0,a.jsxs)(j.l6,{value:r,onValueChange:f,children:[(0,a.jsx)(j.bq,{className:"w-full sm:w-[180px]",children:(0,a.jsx)(j.yv,{placeholder:"Status"})}),(0,a.jsxs)(j.gC,{children:[(0,a.jsx)(j.eb,{value:"all",children:"Todos os Status"}),(0,a.jsx)(j.eb,{value:"active",children:"Ativo"}),(0,a.jsx)(j.eb,{value:"inactive",children:"Inativo"}),(0,a.jsx)(j.eb,{value:"pending",children:"Pendente"})]})]}),(0,a.jsxs)(j.l6,{value:E,onValueChange:b,children:[(0,a.jsx)(j.bq,{className:"w-full sm:w-[180px]",children:(0,a.jsx)(j.yv,{placeholder:"Perfil"})}),(0,a.jsxs)(j.gC,{children:[(0,a.jsx)(j.eb,{value:"all",children:"Todos os Perfis"}),(0,a.jsx)(j.eb,{value:"admin",children:"Administrador"}),(0,a.jsx)(j.eb,{value:"doctor",children:"M\xe9dico"}),(0,a.jsx)(j.eb,{value:"nurse",children:"Enfermeiro"}),(0,a.jsx)(j.eb,{value:"receptionist",children:"Recepcionista"})]})]}),(0,a.jsxs)(v.rI,{children:[(0,a.jsx)(v.ty,{asChild:!0,children:(0,a.jsx)(x.$,{variant:"outline",size:"icon",children:(0,a.jsx)(o.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(v.SQ,{align:"end",children:[(0,a.jsx)(v._2,{onClick:()=>S("grid"),children:"Visualiza\xe7\xe3o em Grade"}),(0,a.jsx)(v._2,{onClick:()=>S("list"),children:"Visualiza\xe7\xe3o em Lista"})]})]})]})})]}),D?(0,a.jsx)("div",{className:"grid gap-4 ".concat("grid"===w?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:Array.from({length:6}).map((e,s)=>(0,a.jsx)(g.Zp,{children:(0,a.jsx)(g.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(p.E,{className:"h-12 w-12 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.E,{className:"h-4 w-[200px]"}),(0,a.jsx)(p.E,{className:"h-4 w-[150px]"})]})]})})},s))}):A&&A.length>0?(0,a.jsx)("div",{className:"grid gap-4 ".concat("grid"===w?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:A.map(e=>(0,a.jsx)(u.q,{user:e,viewMode:w,onDelete:()=>Q(e.id),onToggleStatus:()=>k(e.id,e.status),onResetPassword:()=>P(e.id)},e.id))}):(0,a.jsx)(g.Zp,{children:(0,a.jsx)(g.Wu,{className:"py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Nenhum usu\xe1rio encontrado"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:e||"all"!==r||"all"!==E?"Tente ajustar os filtros de busca":"Comece criando seu primeiro usu\xe1rio"}),!e&&"all"===r&&"all"===E&&(0,a.jsx)(y(),{href:"/dashboard/users/new",children:(0,a.jsxs)(x.$,{className:"mt-4 gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4"}),"Criar Primeiro Usu\xe1rio"]})})]})})})]})}},27737:(e,s,r)=>{"use strict";r.d(s,{E:()=>t});var a=r(95155),l=r(53999);function t(e){let{className:s,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...r})}},44602:(e,s,r)=>{Promise.resolve().then(r.bind(r,23517))},66932:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(19946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},88145:(e,s,r)=>{"use strict";r.d(s,{E:()=>n});var a=r(95155);r(12115);var l=r(74466),t=r(53999);let i=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:r,...l}=e;return(0,a.jsx)("div",{className:(0,t.cn)(i({variant:r}),s),...l})}},92188:(e,s,r)=>{"use strict";r.d(s,{HJ:()=>l,QY:()=>a,Rx:()=>t});let a={ADMIN:"admin",DOCTOR:"doctor",NURSE:"nurse",RECEPTIONIST:"receptionist",MANAGER:"manager"},l={ACTIVE:"active",INACTIVE:"inactive",LOCKED:"locked",PENDING:"pending"},t={USER:"user",ROLE:"role",PERMISSION:"permission",MODULE:"module",SESSION:"session"}}},e=>{e.O(0,[3455,3942,8250,5061,9855,6671,5954,6967,2960,3464,6874,5452,1118,5749,2107,5865,186,8932,8441,5964,7358],()=>e(e.s=44602)),_N_E=e.O()}]);