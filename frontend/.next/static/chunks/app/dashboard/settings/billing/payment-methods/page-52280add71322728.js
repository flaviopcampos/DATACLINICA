(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5137],{4229:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});let i=(0,a(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},4884:(e,s,a)=>{"use strict";a.d(s,{bL:()=>b,zi:()=>N});var i=a(12115),t=a(85185),r=a(6101),n=a(46081),c=a(5845),d=a(45503),l=a(11275),o=a(63655),h=a(95155),x="Switch",[m,p]=(0,n.A)(x),[u,j]=m(x),v=i.forwardRef((e,s)=>{let{__scopeSwitch:a,name:n,checked:d,defaultChecked:l,required:m,disabled:p,value:j="on",onCheckedChange:v,form:g,...f}=e,[b,N]=i.useState(null),k=(0,r.s)(s,e=>N(e)),C=i.useRef(!1),w=!b||g||!!b.closest("form"),[A,M]=(0,c.i)({prop:d,defaultProp:null!=l&&l,onChange:v,caller:x});return(0,h.jsxs)(u,{scope:a,checked:A,disabled:p,children:[(0,h.jsx)(o.sG.button,{type:"button",role:"switch","aria-checked":A,"aria-required":m,"data-state":y(A),"data-disabled":p?"":void 0,disabled:p,value:j,...f,ref:k,onClick:(0,t.mK)(e.onClick,e=>{M(e=>!e),w&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),w&&(0,h.jsx)(_,{control:b,bubbles:!C.current,name:n,value:j,checked:A,required:m,disabled:p,form:g,style:{transform:"translateX(-100%)"}})]})});v.displayName=x;var g="SwitchThumb",f=i.forwardRef((e,s)=>{let{__scopeSwitch:a,...i}=e,t=j(g,a);return(0,h.jsx)(o.sG.span,{"data-state":y(t.checked),"data-disabled":t.disabled?"":void 0,...i,ref:s})});f.displayName=g;var _=i.forwardRef((e,s)=>{let{__scopeSwitch:a,control:t,checked:n,bubbles:c=!0,...o}=e,x=i.useRef(null),m=(0,r.s)(x,s),p=(0,d.Z)(n),u=(0,l.X)(t);return i.useEffect(()=>{let e=x.current;if(!e)return;let s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==n&&s){let a=new Event("click",{bubbles:c});s.call(e,n),e.dispatchEvent(a)}},[p,n,c]),(0,h.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:m,style:{...o.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function y(e){return e?"checked":"unchecked"}_.displayName="SwitchBubbleInput";var b=v,N=f},14584:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>L});var i=a(95155),t=a(12115),r=a(88482),n=a(97168),c=a(89852),d=a(82714),l=a(88145),o=a(90088),h=a(99474),x=a(95784),m=a(88524),p=a(99840),u=a(81586),j=a(46767),v=a(23227),g=a(19946);let f=(0,g.A)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var _=a(84616),y=a(54416),b=a(4229),N=a(40646),k=a(55868);let C=(0,g.A)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);var w=a(14186),A=a(85339),M=a(13717),P=a(62525);let S={name:"",description:"",method_type:"credit_card",is_active:!0,is_default:!1,processing_fee:0,processing_days:0,requires_approval:!1,auto_reconciliation:!1,configuration:{}},q=[{id:"1",name:"Cart\xe3o de Cr\xe9dito",description:"Pagamentos via cart\xe3o de cr\xe9dito Visa/Mastercard",method_type:"credit_card",is_active:!0,is_default:!0,processing_fee:3.5,processing_days:30,min_amount:10,max_amount:5e4,requires_approval:!1,auto_reconciliation:!0,provider:"Stripe",configuration:{api_key:"sk_test_***",merchant_id:"acct_***"}},{id:"2",name:"PIX",description:"Pagamento instant\xe2neo via PIX",method_type:"pix",is_active:!0,is_default:!1,processing_fee:.5,processing_days:0,min_amount:1,max_amount:1e5,requires_approval:!1,auto_reconciliation:!0,provider:"Banco Central",configuration:{pix_key:"hospital@dataclinica.com.br"}},{id:"3",name:"Dinheiro",description:"Pagamento em esp\xe9cie no balc\xe3o",method_type:"cash",is_active:!0,is_default:!1,processing_fee:0,processing_days:0,requires_approval:!0,auto_reconciliation:!1,configuration:{}},{id:"4",name:"Conv\xeanio M\xe9dico",description:"Pagamento via conv\xeanio/plano de sa\xfade",method_type:"insurance",is_active:!0,is_default:!1,processing_fee:0,processing_days:45,requires_approval:!0,auto_reconciliation:!1,configuration:{requires_authorization:!0,authorization_timeout:72}}];function L(){let[e,s]=(0,t.useState)(q),[a,g]=(0,t.useState)(!1),[L,F]=(0,t.useState)(null),[E,z]=(0,t.useState)(S),[T,D]=(0,t.useState)("methods"),I=async()=>{try{if(L)s(e=>e.map(e=>e.id===L?{...E,id:L}:e));else{let e={...E,id:Date.now().toString()};s(s=>[...s,e])}g(!1),F(null),z(S)}catch(e){}},R=async e=>{confirm("Tem certeza que deseja excluir este m\xe9todo de pagamento?")&&s(s=>s.filter(s=>s.id!==e))},$=e.filter(e=>e.is_active);e.filter(e=>!e.is_active);let B=e.find(e=>e.is_default);return(0,i.jsxs)("div",{className:"container mx-auto py-6 space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,i.jsx)(u.A,{className:"h-8 w-8 text-primary"}),"M\xe9todos de Pagamento"]}),(0,i.jsx)("p",{className:"text-muted-foreground mt-2",children:"Configure e gerencie os m\xe9todos de pagamento aceitos pelo sistema"})]}),(0,i.jsxs)(p.lG,{open:a,onOpenChange:g,children:[(0,i.jsx)(p.zM,{asChild:!0,children:(0,i.jsxs)(n.$,{onClick:()=>{z(S),F(null)},children:[(0,i.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Novo M\xe9todo"]})}),(0,i.jsxs)(p.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)(p.c7,{children:[(0,i.jsxs)(p.L3,{children:[L?"Editar":"Novo"," M\xe9todo de Pagamento"]}),(0,i.jsx)(p.rr,{children:"Configure um novo m\xe9todo de pagamento para o sistema"})]}),(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.Label,{htmlFor:"name",children:"Nome do M\xe9todo"}),(0,i.jsx)(c.p,{id:"name",value:E.name,onChange:e=>z({...E,name:e.target.value}),placeholder:"Ex: Cart\xe3o de Cr\xe9dito"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.Label,{children:"Tipo de M\xe9todo"}),(0,i.jsxs)(x.l6,{value:E.method_type,onValueChange:e=>z({...E,method_type:e}),children:[(0,i.jsx)(x.bq,{children:(0,i.jsx)(x.yv,{})}),(0,i.jsxs)(x.gC,{children:[(0,i.jsx)(x.eb,{value:"credit_card",children:"Cart\xe3o de Cr\xe9dito"}),(0,i.jsx)(x.eb,{value:"debit_card",children:"Cart\xe3o de D\xe9bito"}),(0,i.jsx)(x.eb,{value:"pix",children:"PIX"}),(0,i.jsx)(x.eb,{value:"bank_transfer",children:"Transfer\xeancia Banc\xe1ria"}),(0,i.jsx)(x.eb,{value:"cash",children:"Dinheiro"}),(0,i.jsx)(x.eb,{value:"check",children:"Cheque"}),(0,i.jsx)(x.eb,{value:"insurance",children:"Conv\xeanio"})]})]})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.Label,{htmlFor:"description",children:"Descri\xe7\xe3o"}),(0,i.jsx)(h.T,{id:"description",value:E.description,onChange:e=>z({...E,description:e.target.value}),placeholder:"Descreva este m\xe9todo de pagamento",rows:3})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.Label,{htmlFor:"provider",children:"Provedor/Gateway"}),(0,i.jsx)(c.p,{id:"provider",value:E.provider||"",onChange:e=>z({...E,provider:e.target.value}),placeholder:"Ex: Stripe, PagSeguro, Mercado Pago"})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(d.Label,{className:"text-lg font-semibold",children:"Configura\xe7\xf5es Financeiras"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.Label,{htmlFor:"processing_fee",children:"Taxa de Processamento (%)"}),(0,i.jsx)(c.p,{id:"processing_fee",type:"number",step:"0.01",value:E.processing_fee,onChange:e=>z({...E,processing_fee:parseFloat(e.target.value)||0}),placeholder:"0.00"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.Label,{htmlFor:"processing_days",children:"Dias para Compensa\xe7\xe3o"}),(0,i.jsx)(c.p,{id:"processing_days",type:"number",value:E.processing_days,onChange:e=>z({...E,processing_days:parseInt(e.target.value)||0}),placeholder:"0"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.Label,{htmlFor:"min_amount",children:"Valor M\xednimo (R$)"}),(0,i.jsx)(c.p,{id:"min_amount",type:"number",step:"0.01",value:E.min_amount||"",onChange:e=>z({...E,min_amount:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"Sem limite"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(d.Label,{htmlFor:"max_amount",children:"Valor M\xe1ximo (R$)"}),(0,i.jsx)(c.p,{id:"max_amount",type:"number",step:"0.01",value:E.max_amount||"",onChange:e=>z({...E,max_amount:e.target.value?parseFloat(e.target.value):void 0}),placeholder:"Sem limite"})]})]})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(d.Label,{className:"text-lg font-semibold",children:"Configura\xe7\xf5es de Comportamento"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(o.Switch,{id:"is_active",checked:E.is_active,onCheckedChange:e=>z({...E,is_active:e})}),(0,i.jsx)(d.Label,{htmlFor:"is_active",children:"M\xe9todo Ativo"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(o.Switch,{id:"is_default",checked:E.is_default,onCheckedChange:e=>z({...E,is_default:e})}),(0,i.jsx)(d.Label,{htmlFor:"is_default",children:"M\xe9todo Padr\xe3o"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(o.Switch,{id:"requires_approval",checked:E.requires_approval,onCheckedChange:e=>z({...E,requires_approval:e})}),(0,i.jsx)(d.Label,{htmlFor:"requires_approval",children:"Requer Aprova\xe7\xe3o"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(o.Switch,{id:"auto_reconciliation",checked:E.auto_reconciliation,onCheckedChange:e=>z({...E,auto_reconciliation:e})}),(0,i.jsx)(d.Label,{htmlFor:"auto_reconciliation",children:"Concilia\xe7\xe3o Autom\xe1tica"})]})]})]})]}),(0,i.jsxs)(p.Es,{children:[(0,i.jsxs)(n.$,{variant:"outline",onClick:()=>g(!1),children:[(0,i.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,i.jsxs)(n.$,{onClick:I,children:[(0,i.jsx)(b.A,{className:"h-4 w-4 mr-2"}),L?"Atualizar":"Criar"," M\xe9todo"]})]})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,i.jsx)(r.Zp,{children:(0,i.jsx)(r.Wu,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Total M\xe9todos"}),(0,i.jsx)("p",{className:"text-2xl font-bold",children:e.length})]}),(0,i.jsx)(u.A,{className:"h-8 w-8 text-blue-600"})]})})}),(0,i.jsx)(r.Zp,{children:(0,i.jsx)(r.Wu,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"M\xe9todos Ativos"}),(0,i.jsx)("p",{className:"text-2xl font-bold",children:$.length})]}),(0,i.jsx)(N.A,{className:"h-8 w-8 text-green-600"})]})})}),(0,i.jsx)(r.Zp,{children:(0,i.jsx)(r.Wu,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"M\xe9todo Padr\xe3o"}),(0,i.jsx)("p",{className:"text-lg font-bold",children:(null==B?void 0:B.name)||"Nenhum"})]}),(0,i.jsx)(k.A,{className:"h-8 w-8 text-purple-600"})]})})}),(0,i.jsx)(r.Zp,{children:(0,i.jsx)(r.Wu,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Taxa M\xe9dia"}),(0,i.jsxs)("p",{className:"text-2xl font-bold",children:[$.length>0?($.reduce((e,s)=>e+s.processing_fee,0)/$.length).toFixed(1):"0.0","%"]})]}),(0,i.jsx)(C,{className:"h-8 w-8 text-orange-600"})]})})})]}),(0,i.jsxs)(r.Zp,{children:[(0,i.jsxs)(r.aR,{children:[(0,i.jsx)(r.ZB,{children:"M\xe9todos Configurados"}),(0,i.jsx)(r.BT,{children:"Gerencie todos os m\xe9todos de pagamento do sistema"})]}),(0,i.jsxs)(r.Wu,{children:[(0,i.jsxs)(m.XI,{children:[(0,i.jsx)(m.A0,{children:(0,i.jsxs)(m.Hj,{children:[(0,i.jsx)(m.nd,{children:"M\xe9todo"}),(0,i.jsx)(m.nd,{children:"Tipo"}),(0,i.jsx)(m.nd,{children:"Taxa"}),(0,i.jsx)(m.nd,{children:"Compensa\xe7\xe3o"}),(0,i.jsx)(m.nd,{children:"Status"}),(0,i.jsx)(m.nd,{children:"A\xe7\xf5es"})]})}),(0,i.jsx)(m.BF,{children:e.map(e=>{var a;return(0,i.jsxs)(m.Hj,{children:[(0,i.jsx)(m.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{let s={credit_card:u.A,debit_card:u.A,pix:j.A,bank_transfer:v.A,cash:f,check:f,insurance:v.A}[e]||u.A;return(0,i.jsx)(s,{className:"h-4 w-4"})})(e.method_type),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{className:"font-medium flex items-center gap-2",children:[e.name,e.is_default&&(0,i.jsx)(l.E,{variant:"outline",className:"text-xs",children:"Padr\xe3o"})]}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),e.provider&&(0,i.jsxs)("p",{className:"text-xs text-muted-foreground",children:["via ",e.provider]})]})]})}),(0,i.jsx)(m.nA,{children:(0,i.jsx)(l.E,{className:{credit_card:"bg-blue-100 text-blue-800",debit_card:"bg-green-100 text-green-800",pix:"bg-purple-100 text-purple-800",bank_transfer:"bg-orange-100 text-orange-800",cash:"bg-gray-100 text-gray-800",check:"bg-yellow-100 text-yellow-800",insurance:"bg-red-100 text-red-800"}[e.method_type]||"bg-gray-100 text-gray-800",children:{credit_card:"Cart\xe3o de Cr\xe9dito",debit_card:"Cart\xe3o de D\xe9bito",pix:"PIX",bank_transfer:"Transfer\xeancia Banc\xe1ria",cash:"Dinheiro",check:"Cheque",insurance:"Conv\xeanio"}[a=e.method_type]||a})}),(0,i.jsx)(m.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(C,{className:"h-3 w-3"}),e.processing_fee,"%"]})}),(0,i.jsx)(m.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(w.A,{className:"h-3 w-3"}),e.processing_days," dias"]})}),(0,i.jsx)(m.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(o.Switch,{checked:e.is_active,onCheckedChange:()=>{var a;return a=e.id,void s(e=>e.map(e=>e.id===a?{...e,is_active:!e.is_active}:e))},size:"sm"}),(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)(l.E,{variant:e.is_active?"default":"secondary",children:e.is_active?"Ativo":"Inativo"}),e.requires_approval&&(0,i.jsxs)(l.E,{variant:"outline",className:"text-xs",children:[(0,i.jsx)(A.A,{className:"h-3 w-3 mr-1"}),"Aprova\xe7\xe3o"]})]})]})}),(0,i.jsx)(m.nA,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[!e.is_default&&(0,i.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{var a;return a=e.id,void s(e=>e.map(e=>({...e,is_default:e.id===a})))},children:"Definir Padr\xe3o"}),(0,i.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{z(e),F(e.id),g(!0)},children:(0,i.jsx)(M.A,{className:"h-4 w-4"})}),(0,i.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>R(e.id),children:(0,i.jsx)(P.A,{className:"h-4 w-4"})})]})})]},e.id)})})]}),0===e.length&&(0,i.jsxs)("div",{className:"text-center py-8",children:[(0,i.jsx)(u.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-muted-foreground",children:"Nenhum m\xe9todo encontrado"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:'Clique em "Novo M\xe9todo" para come\xe7ar'})]})]})]})]})}},46767:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});let i=(0,a(19946).A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},64001:(e,s,a)=>{Promise.resolve().then(a.bind(a,14584))},81586:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});let i=(0,a(19946).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},90088:(e,s,a)=>{"use strict";a.d(s,{Switch:()=>c});var i=a(95155),t=a(12115),r=a(4884),n=a(53999);let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...t,ref:s,children:(0,i.jsx)(r.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});c.displayName=r.bL.displayName}},e=>{e.O(0,[3455,3942,8250,5061,9855,5452,3159,8441,5964,7358],()=>e(e.s=64001)),_N_E=e.O()}]);