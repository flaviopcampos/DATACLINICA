(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1954],{16559:(e,a,t)=>{"use strict";t.d(a,{$v:()=>g,EO:()=>f,Lt:()=>o,Rx:()=>p,Zr:()=>b,ck:()=>h,r7:()=>x,tv:()=>c,wd:()=>m});var r=t(95155),s=t(12115),i=t(17649),n=t(53999),l=t(97168);let o=i.bL,c=i.l9,d=i.ZL,u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});u.displayName=i.hJ.displayName;let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(i.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});f.displayName=i.UC.displayName;let m=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};m.displayName="AlertDialogHeader";let h=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};h.displayName="AlertDialogFooter";let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold",t),...s})});x.displayName=i.hE.displayName;let g=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});g.displayName=i.VY.displayName;let p=s.forwardRef((e,a)=>{let{className:t,variant:s,size:o,...c}=e;return(0,r.jsx)(i.rc,{ref:a,className:(0,n.cn)((0,l.r)({variant:s,size:o}),t),...c})});p.displayName=i.rc.displayName;let b=s.forwardRef((e,a)=>{let{className:t,variant:s="outline",size:o,...c}=e;return(0,r.jsx)(i.ZD,{ref:a,className:(0,n.cn)((0,l.r)({variant:s,size:o}),"mt-2 sm:mt-0",t),...c})});b.displayName=i.ZD.displayName},16891:(e,a,t)=>{"use strict";t.d(a,{F:()=>l});var r=t(95155),s=t(12115),i=t(47655),n=t(53999);let l=s.forwardRef((e,a)=>{let{className:t,children:s,...l}=e;return(0,r.jsxs)(i.bL,{ref:a,className:(0,n.cn)("relative overflow-hidden",t),...l,children:[(0,r.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(o,{}),(0,r.jsx)(i.OK,{})]})});l.displayName=i.bL.displayName;let o=s.forwardRef((e,a)=>{let{className:t,orientation:s="vertical",...l}=e;return(0,r.jsx)(i.VM,{ref:a,orientation:s,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...l,children:(0,r.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=i.VM.displayName},20757:(e,a,t)=>{"use strict";t.d(a,{JZ:()=>s});var r=t(12115);function s(e){let{itemCount:a,onSelect:t,isOpen:s=!0,loop:i=!0,orientation:n="vertical"}=e,l=(0,r.useRef)(-1),o=(0,r.useRef)(null),c=(0,r.useCallback)(e=>{e<0?l.current=i?a-1:0:e>=a?l.current=i?0:a-1:l.current=e;let t=o.current;t&&t.querySelectorAll('[role="option"], [role="menuitem"], [data-keyboard-nav]').forEach((e,a)=>{a===l.current?(e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),e.focus()):(e.setAttribute("aria-selected","false"),e.setAttribute("tabindex","-1"))})},[a,i]),d=(0,r.useCallback)(e=>{if(!s||0===a)return;let{key:r}=e,i="vertical"===n;switch(r){case i?"ArrowDown":"ArrowRight":e.preventDefault(),c(l.current+1);break;case i?"ArrowUp":"ArrowLeft":e.preventDefault(),c(l.current-1);break;case"Home":e.preventDefault(),c(0);break;case"End":e.preventDefault(),c(a-1);break;case"Enter":case" ":e.preventDefault(),l.current>=0&&t&&t(l.current);break;case"Escape":e.preventDefault(),l.current=-1}},[s,a,n,t,c]);return(0,r.useEffect)(()=>{let e=o.current;if(e&&s)return e.addEventListener("keydown",d),()=>e.removeEventListener("keydown",d)},[d,s]),(0,r.useEffect)(()=>{l.current=-1},[a]),{containerRef:o,activeIndex:l.current,setActiveIndex:c}}},30569:(e,a,t)=>{Promise.resolve().then(t.bind(t,61967)),Promise.resolve().then(t.bind(t,95248))},31886:(e,a,t)=>{"use strict";t.d(a,{A:()=>n,O:()=>l});var r=t(23464),s=t(56671);let i=r.A.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>{let{response:a}=e;if((null==a?void 0:a.status)===401)localStorage.removeItem("token"),localStorage.removeItem("user"),s.o.error("Sess\xe3o expirada. Fa\xe7a login novamente."),window.location.href="/auth/login";else if((null==a?void 0:a.status)===403)s.o.error("Acesso negado.");else if((null==a?void 0:a.status)===404)s.o.error("Recurso n\xe3o encontrado.");else if((null==a?void 0:a.status)>=500)s.o.error("Erro interno do servidor. Tente novamente mais tarde.");else if("ECONNABORTED"===e.code)s.o.error("Tempo limite da requisi\xe7\xe3o excedido.");else{var t;s.o.error((null==a||null==(t=a.data)?void 0:t.message)||"Erro inesperado.")}return Promise.reject(e)});let n=i,l={get:async(e,a)=>(await i.get(e,{params:a})).data,post:async(e,a)=>(await i.post(e,a)).data,put:async(e,a)=>(await i.put(e,a)).data,delete:async e=>(await i.delete(e)).data,patch:async(e,a)=>(await i.patch(e,a)).data}},61967:(e,a,t)=>{"use strict";t.d(a,{Header:()=>F});var r=t(95155),s=t(74783),i=t(47924),n=t(71007),l=t(381),o=t(59947),c=t(34835),d=t(97168),u=t(89852),f=t(67133),m=t(69663);t(12115);var h=t(62098),x=t(93509),g=t(51362);function p(){let{setTheme:e,theme:a}=(0,g.D)();return(0,r.jsxs)(f.rI,{children:[(0,r.jsx)(f.ty,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:"ghost",size:"sm",className:"w-9 px-0 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Tema atual: ".concat("light"===a?"claro":"dark"===a?"escuro":"sistema",". Clique para alterar tema"),children:[(0,r.jsx)(h.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0","aria-hidden":"true"}),(0,r.jsx)(x.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100","aria-hidden":"true"})]})}),(0,r.jsxs)(f.SQ,{align:"end",role:"menu","aria-label":"Op\xe7\xf5es de tema",children:[(0,r.jsxs)(f._2,{onClick:()=>e("light"),className:"focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",role:"menuitem","aria-label":"Definir tema claro",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),(0,r.jsx)("span",{children:"Claro"})]}),(0,r.jsxs)(f._2,{onClick:()=>e("dark"),className:"focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",role:"menuitem","aria-label":"Definir tema escuro",children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),(0,r.jsx)("span",{children:"Escuro"})]}),(0,r.jsxs)(f._2,{onClick:()=>e("system"),className:"focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",role:"menuitem","aria-label":"Usar tema do sistema",children:[(0,r.jsx)("span",{className:"mr-2 h-4 w-4","aria-hidden":"true",children:"\uD83D\uDCBB"}),(0,r.jsx)("span",{children:"Sistema"})]})]})]})}var b=t(40646),y=t(1243),v=t(85339),j=t(81284),N=t(5196),w=t(54416),k=t(23861),A=t(88145),C=t(16891),E=t(63417),R=t(20757),S=t(15891),D=t(4573);function z(e){let{notification:a,onMarkAsRead:t,onRemove:s}=e;return(0,r.jsx)("div",{className:"p-3 border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2 ".concat(a.read?"":"bg-blue-50 dark:bg-blue-950/20"),role:"listitem","aria-label":"Notifica\xe7\xe3o: ".concat(a.title),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:function(e){switch(e){case"success":return(0,r.jsx)(b.A,{className:"w-4 h-4 text-green-500","aria-hidden":"true"});case"warning":return(0,r.jsx)(y.A,{className:"w-4 h-4 text-yellow-500","aria-hidden":"true"});case"error":return(0,r.jsx)(v.A,{className:"w-4 h-4 text-red-500","aria-hidden":"true"});default:return(0,r.jsx)(j.A,{className:"w-4 h-4 text-blue-500","aria-hidden":"true"})}}(a.type)}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:a.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a.message}),(0,r.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:(0,S.m)(a.timestamp,{addSuffix:!0,locale:D.F})})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1 ml-2",children:[!a.read&&(0,r.jsx)(d.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",onClick:()=>t(a.id),"aria-label":"Marcar notifica\xe7\xe3o como lida",title:"Marcar como lida",children:(0,r.jsx)(N.A,{className:"w-3 h-3","aria-hidden":"true"})}),(0,r.jsx)(d.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-red-500 focus:ring-2 focus:ring-red-500 focus:ring-offset-1",onClick:()=>s(a.id),"aria-label":"Remover notifica\xe7\xe3o",title:"Remover notifica\xe7\xe3o",children:(0,r.jsx)(w.A,{className:"w-3 h-3","aria-hidden":"true"})})]})]}),a.action&&(0,r.jsx)(d.$,{variant:"outline",size:"sm",className:"mt-2 h-7 text-xs focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",onClick:a.action.onClick,"aria-label":"A\xe7\xe3o: ".concat(a.action.label),children:a.action.label})]})]})})}function I(){let{notifications:e,unreadCount:a,markAsRead:t,markAllAsRead:s,removeNotification:i,clearAll:n}=(0,E.E)(),{containerRef:l}=(0,R.JZ)({orientation:"vertical",loop:!0});return(0,r.jsxs)(f.rI,{children:[(0,r.jsx)(f.ty,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:"ghost",size:"sm",className:"relative focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Notifica\xe7\xf5es".concat(a>0?" (".concat(a," n\xe3o lidas)"):""),children:[(0,r.jsx)(k.A,{className:"w-5 h-5","aria-hidden":"true"}),a>0&&(0,r.jsx)(A.E,{variant:"destructive",className:"absolute -top-1 -right-1 w-5 h-5 flex items-center justify-center p-0 text-xs","aria-label":"".concat(a," notifica\xe7\xf5es n\xe3o lidas"),children:a>99?"99+":a})]})}),(0,r.jsxs)(f.SQ,{className:"w-80",align:"end",forceMount:!0,role:"region","aria-label":"Centro de notifica\xe7\xf5es",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",id:"notifications-heading",children:"Notifica\xe7\xf5es"}),e.length>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[a>0&&(0,r.jsx)(d.$,{variant:"ghost",size:"sm",className:"h-6 text-xs focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",onClick:s,"aria-label":"Marcar todas as notifica\xe7\xf5es como lidas",children:"Marcar todas como lidas"}),(0,r.jsx)(d.$,{variant:"ghost",size:"sm",className:"h-6 text-xs text-red-600 hover:text-red-700 focus:ring-2 focus:ring-red-500 focus:ring-offset-1",onClick:n,"aria-label":"Limpar todas as notifica\xe7\xf5es",children:"Limpar todas"})]})]}),0===e.length?(0,r.jsxs)("div",{className:"p-6 text-center",role:"status","aria-live":"polite",children:[(0,r.jsx)(k.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-2","aria-hidden":"true"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nenhuma notifica\xe7\xe3o"})]}):(0,r.jsx)(C.F,{className:"max-h-96",role:"list","aria-labelledby":"notifications-heading","aria-live":"polite",children:e.map(e=>(0,r.jsx)(z,{notification:e,onMarkAsRead:t,onRemove:i},e.id))})]})]})}var L=t(4236),q=t(35695);function F(e){var a;let{onMenuClick:t,showMenuButton:h=!0}=e,{user:x,logoutAndRedirect:g}=(0,L.As)();return(0,q.useRouter)(),(0,r.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[h&&(0,r.jsx)(d.$,{variant:"ghost",size:"sm",onClick:t,className:cn("p-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",h?"lg:hidden":"hidden"),"aria-label":"Abrir menu de navega\xe7\xe3o","aria-expanded":!1,children:(0,r.jsx)(s.A,{className:"h-5 w-5","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"flex-1 max-w-md mx-4",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4","aria-hidden":"true"}),(0,r.jsx)(u.p,{type:"search",placeholder:"Buscar pacientes, consultas...",className:"pl-10 text-sm bg-gray-50 border-gray-200 focus:bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:focus:bg-gray-900 dark:focus:ring-blue-400 dark:focus:border-blue-400","aria-label":"Campo de busca"})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsx)(I,{})}),(0,r.jsx)("div",{className:"hidden sm:block",children:(0,r.jsx)(p,{})}),(0,r.jsxs)("div",{className:"sm:hidden flex items-center space-x-1",children:[(0,r.jsx)(I,{}),(0,r.jsx)(p,{})]}),(0,r.jsxs)(f.rI,{children:[(0,r.jsx)(f.ty,{asChild:!0,children:(0,r.jsx)(d.$,{variant:"ghost",className:"relative h-8 w-8 rounded-full focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Menu do usu\xe1rio ".concat((null==x?void 0:x.name)||"Usu\xe1rio"),children:(0,r.jsxs)(m.Avatar,{className:"h-8 w-8",children:[(0,r.jsx)(m.AvatarImage,{src:null==x?void 0:x.avatar,alt:"Avatar de ".concat((null==x?void 0:x.name)||"Usu\xe1rio")}),(0,r.jsx)(m.AvatarFallback,{children:(null==x||null==(a=x.name)?void 0:a.charAt(0))||"U"})]})})}),(0,r.jsxs)(f.SQ,{className:"w-56",align:"end",forceMount:!0,children:[(0,r.jsx)(f.lp,{className:"font-normal",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium leading-none",children:null==x?void 0:x.name}),(0,r.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:null==x?void 0:x.email})]})}),(0,r.jsx)(f.mB,{}),(0,r.jsxs)(f._2,{className:"focus:bg-gray-100 dark:focus:bg-gray-800",children:[(0,r.jsx)(n.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),(0,r.jsx)("span",{children:"Perfil"})]}),(0,r.jsxs)(f._2,{className:"focus:bg-gray-100 dark:focus:bg-gray-800",children:[(0,r.jsx)(l.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),(0,r.jsx)("span",{children:"Configura\xe7\xf5es"})]}),(0,r.jsxs)(f._2,{className:"focus:bg-gray-100 dark:focus:bg-gray-800",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),(0,r.jsx)("span",{children:"Suporte"})]}),(0,r.jsx)(f.mB,{}),(0,r.jsxs)(f._2,{onClick:g,className:"focus:bg-red-50 dark:focus:bg-red-900/20 text-red-600 dark:text-red-400",children:[(0,r.jsx)(c.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),(0,r.jsx)("span",{children:"Sair"})]})]})]})]})]})})}},63401:(e,a,t)=>{"use strict";t.d(a,{TM:()=>n,hk:()=>l});var r=t(95155),s=t(16559),i=t(51154);function n(e){let{children:a,title:t,description:n,confirmText:l="Confirmar",cancelText:o="Cancelar",onConfirm:c,onCancel:d,variant:u="default",isLoading:f=!1,disabled:m=!1}=e,h=async()=>{try{await c()}catch(e){}};return(0,r.jsxs)(s.Lt,{children:[(0,r.jsx)(s.tv,{asChild:!0,disabled:m,children:a}),(0,r.jsxs)(s.EO,{children:[(0,r.jsxs)(s.wd,{children:[(0,r.jsx)(s.r7,{children:t}),(0,r.jsx)(s.$v,{children:n})]}),(0,r.jsxs)(s.ck,{children:[(0,r.jsx)(s.Zr,{onClick:d,disabled:f,children:o}),(0,r.jsxs)(s.Rx,{onClick:h,disabled:f,className:"destructive"===u?"bg-red-600 hover:bg-red-700":"",children:[f&&(0,r.jsx)(i.A,{className:"h-4 w-4 mr-2 animate-spin"}),l]})]})]})]})}function l(e){let{children:a,onConfirm:t}=e;return(0,r.jsx)(n,{title:"Confirmar Logout",description:"Tem certeza que deseja sair do sistema?",confirmText:"Sair",cancelText:"Cancelar",onConfirm:t,variant:"destructive",children:a})}},63417:(e,a,t)=>{"use strict";t.d(a,{E:()=>d});var r=t(12115),s=t(26715),i=t(32960),n=t(5041),l=t(56671),o=t(85771);let c={notifications:"appointment-notifications",settings:"notification-settings",stats:"notification-stats"};function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{userId:a,clinicId:t,autoRefresh:d=!0,refreshInterval:u=3e4,enableRealTime:f=!0,maxNotifications:m=50}=e,h=(0,s.jE)(),[x,g]=(0,r.useState)({status:["pending","sent"],types:["reminder","confirmation","cancellation"],priority:["high","medium","low"],dateRange:{start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+6048e5).toISOString().split("T")[0]}}),[p,b]=(0,r.useState)(0),[y,v]=(0,r.useState)(!1),{data:j,isLoading:N,error:w,refetch:k}=(0,i.I)({queryKey:[c.notifications,a,t,x],queryFn:()=>o.u.getNotifications({userId:a,clinicId:t,...x,limit:m}),enabled:!!a||!!t,staleTime:d?u:12e4,refetchInterval:!!d&&u,gcTime:3e5}),{data:A,isLoading:C,error:E}=(0,i.I)({queryKey:[c.settings,a],queryFn:()=>o.u.getNotificationSettings(a),enabled:!!a,staleTime:6e5}),{data:R,isLoading:S}=(0,i.I)({queryKey:[c.stats,a,t],queryFn:()=>o.u.getNotificationStats(a,t),enabled:!!a||!!t,staleTime:3e5}),D=(0,n.n)({mutationFn:e=>o.u.markNotificationsAsRead(e),onSuccess:()=>{h.invalidateQueries({queryKey:[c.notifications]}),h.invalidateQueries({queryKey:[c.stats]})},onError:e=>{var a,t;let r=(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||"Erro ao marcar notifica\xe7\xe3o como lida";l.o.error(r)}}),z=(0,n.n)({mutationFn:e=>o.u.deleteNotifications(e),onSuccess:()=>{h.invalidateQueries({queryKey:[c.notifications]}),h.invalidateQueries({queryKey:[c.stats]}),l.o.success("Notifica\xe7\xe3o(\xf5es) exclu\xedda(s) com sucesso!")},onError:e=>{var a,t;let r=(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||"Erro ao excluir notifica\xe7\xe3o";l.o.error(r)}}),I=(0,n.n)({mutationFn:e=>o.u.updateNotificationSettings(a,e),onSuccess:()=>{h.invalidateQueries({queryKey:[c.settings,a]}),l.o.success("Configura\xe7\xf5es atualizadas com sucesso!")},onError:e=>{var a,t;let r=(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||"Erro ao atualizar configura\xe7\xf5es";l.o.error(r)}}),L=(0,n.n)({mutationFn:e=>o.u.sendNotification(e),onSuccess:()=>{h.invalidateQueries({queryKey:[c.notifications]}),l.o.success("Notifica\xe7\xe3o enviada com sucesso!")},onError:e=>{var a,t;let r=(null==(t=e.response)||null==(a=t.data)?void 0:a.detail)||"Erro ao enviar notifica\xe7\xe3o";l.o.error(r)}});(0,r.useEffect)(()=>{j&&b(j.filter(e=>!e.read).length)},[j]),(0,r.useEffect)(()=>{if(f&&a){v(!0);let e=setInterval(()=>{h.invalidateQueries({queryKey:[c.notifications]})},u);return()=>{clearInterval(e),v(!1)}}},[f,a,u,h]);let q=(0,r.useCallback)(e=>{D.mutate(e)},[D]),F=(0,r.useCallback)(()=>{if(!j)return;let e=j.filter(e=>!e.read).map(e=>e.id);e.length>0&&D.mutate(e)},[j,D]),T=(0,r.useCallback)(e=>{z.mutate(e)},[z]),_=(0,r.useCallback)(e=>{I.mutate(e)},[I]),M=(0,r.useCallback)(e=>{L.mutate(e)},[L]),P=(0,r.useCallback)(e=>{g(a=>({...a,...e}))},[]),K=(0,r.useCallback)(()=>{g({status:["pending","sent"],types:["reminder","confirmation","cancellation"],priority:["high","medium","low"],dateRange:{start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+6048e5).toISOString().split("T")[0]}})},[]),Q=(0,r.useCallback)(e=>j?j.filter(a=>a.type===e):[],[j]),O=(0,r.useCallback)(e=>j?j.filter(a=>a.priority===e):[],[j]),$=(0,r.useCallback)(()=>j?j.filter(e=>!e.read):[],[j]),U=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24;if(!j)return[];let a=new Date(Date.now()-60*e*6e4);return j.filter(e=>new Date(e.createdAt)>a)},[j]),B=(0,r.useCallback)(()=>p>0,[p]),Z=(0,r.useCallback)(async(e,a,t)=>{try{await o.u.createAppointmentReminder(e,a,t),h.invalidateQueries({queryKey:[c.notifications]}),l.o.success("Lembrete criado com sucesso!")}catch(a){var r,s;let e=(null==(s=a.response)||null==(r=s.data)?void 0:r.detail)||"Erro ao criar lembrete";l.o.error(e)}},[h]),J=(0,r.useCallback)(async e=>{try{await o.u.cancelAppointmentReminder(e),h.invalidateQueries({queryKey:[c.notifications]}),l.o.success("Lembrete cancelado com sucesso!")}catch(r){var a,t;let e=(null==(t=r.response)||null==(a=t.data)?void 0:a.detail)||"Erro ao cancelar lembrete";l.o.error(e)}},[h]),V=(0,r.useCallback)(()=>{h.invalidateQueries({queryKey:[c.notifications]}),h.invalidateQueries({queryKey:[c.stats]})},[h]),H=(0,r.useCallback)(function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],M({type:"test",title:"Notifica\xe7\xe3o de Teste",message:"Esta \xe9 uma notifica\xe7\xe3o de teste do sistema.",priority:"low",userId:a,clinicId:t})},[a,t,M]);return{notifications:j||[],settings:A,stats:R,unreadCount:p,filters:x,isConnected:y,isLoadingNotifications:N,isLoadingSettings:C,isLoadingStats:S,isLoading:N||C||S,isMarkingAsRead:D.isPending,isDeleting:z.isPending,isUpdatingSettings:I.isPending,isSending:L.isPending,notificationsError:w,settingsError:E,error:w||E,markAsRead:q,markAllAsRead:F,deleteNotification:T,updateSettings:_,sendNotification:M,createReminder:Z,cancelReminder:J,testNotification:H,updateFilters:P,clearFilters:K,getNotificationsByType:Q,getNotificationsByPriority:O,getUnreadNotifications:$,getRecentNotifications:U,hasUnreadNotifications:B,refresh:V,refetchNotifications:k}}},67133:(e,a,t)=>{"use strict";t.d(a,{SQ:()=>f,_2:()=>m,lp:()=>h,mB:()=>x,rI:()=>d,ty:()=>u});var r=t(95155),s=t(12115),i=t(48698),n=t(13052),l=t(5196),o=t(9428),c=t(53999);let d=i.bL,u=i.l9;i.YJ,i.ZL,i.Pb,i.z6,s.forwardRef((e,a)=>{let{className:t,inset:s,children:l,...o}=e;return(0,r.jsxs)(i.ZP,{ref:a,className:(0,c.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...o,children:[l,(0,r.jsx)(n.A,{className:"ml-auto h-4 w-4"})]})}).displayName=i.ZP.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.G5,{ref:a,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}).displayName=i.G5.displayName;let f=s.forwardRef((e,a)=>{let{className:t,sideOffset:s=4,...n}=e;return(0,r.jsx)(i.ZL,{children:(0,r.jsx)(i.UC,{ref:a,sideOffset:s,className:(0,c.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});f.displayName=i.UC.displayName;let m=s.forwardRef((e,a)=>{let{className:t,inset:s,...n}=e;return(0,r.jsx)(i.q7,{ref:a,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...n})});m.displayName=i.q7.displayName,s.forwardRef((e,a)=>{let{className:t,children:s,checked:n,...o}=e;return(0,r.jsxs)(i.H_,{ref:a,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),s]})}).displayName=i.H_.displayName,s.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,r.jsxs)(i.hN,{ref:a,className:(0,c.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(i.VF,{children:(0,r.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=i.hN.displayName;let h=s.forwardRef((e,a)=>{let{className:t,inset:s,...n}=e;return(0,r.jsx)(i.JU,{ref:a,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...n})});h.displayName=i.JU.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.wv,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...s})});x.displayName=i.wv.displayName},69663:(e,a,t)=>{"use strict";t.d(a,{Avatar:()=>l,AvatarFallback:()=>c,AvatarImage:()=>o});var r=t(95155),s=t(12115),i=t(54011),n=t(53999);let l=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.bL,{ref:a,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s})});l.displayName=i.bL.displayName;let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i._V,{ref:a,className:(0,n.cn)("aspect-square h-full w-full",t),...s})});o.displayName=i._V.displayName;let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(i.H4,{ref:a,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s})});c.displayName=i.H4.displayName},95248:(e,a,t)=>{"use strict";t.d(a,{Sidebar:()=>z});var r=t(95155),s=t(6874),i=t.n(s),n=t(35695),l=t(12115),o=t(53999),c=t(57340),d=t(17580),u=t(69074),f=t(36643),m=t(57434),h=t(72713),x=t(81586),g=t(38164),p=t(33109),b=t(84355),y=t(46697),v=t(55670),j=t(79397),N=t(381),w=t(42355),k=t(54416),A=t(34835),C=t(97168),E=t(63401),R=t(4236),S=t(20757);let D=[{name:"Dashboard",href:"/dashboard",icon:c.A},{name:"Pacientes",href:"/dashboard/patients",icon:d.A},{name:"Consultas",href:"/dashboard/appointments",icon:u.A},{name:"Leitos",href:"/dashboard/beds",icon:f.A},{name:"Prontu\xe1rios",href:"/dashboard/records",icon:m.A},{name:"Relat\xf3rios",href:"/dashboard/reports",icon:h.A},{name:"Financeiro",href:"/dashboard/billing",icon:x.A},{name:"Integra\xe7\xe3o Faturamento",href:"/billing/appointments",icon:g.A},{name:"BI Dashboard",href:"/bi",icon:p.A},{name:"BI Analytics",href:"/bi/analytics",icon:b.A},{name:"BI M\xe9tricas",href:"/bi/metrics",icon:y.A},{name:"BI Pacientes",href:"/bi/patients",icon:v.A},{name:"Atividades",href:"/dashboard/activities",icon:j.A},{name:"Configura\xe7\xf5es",href:"/dashboard/settings",icon:N.A}];function z(e){let{isCollapsed:a=!1,onToggle:t,isMobile:s=!1,isOpen:c=!1,onClose:d}=e,u=(0,n.usePathname)(),{logoutAndRedirect:f}=(0,R.As)(),[m,h]=(0,l.useState)(!1),{containerRef:x}=(0,S.JZ)({itemCount:D.length+1,orientation:"vertical",loop:!0});(0,l.useEffect)(()=>{h(!0)},[]);let g=async()=>{await f()},p=()=>{s&&d&&d()};if((0,l.useEffect)(()=>(s&&c?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s,c]),!m)return null;let b=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center h-16 px-4 border-b border-gray-200 dark:border-gray-700",a?"justify-center":"justify-between"),children:[(0,r.jsxs)("div",{className:(0,o.cn)("flex items-center space-x-2",a&&"justify-center"),children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",role:"img","aria-label":"Logo DataCl\xednica",children:(0,r.jsx)(j.A,{className:"w-5 h-5 text-white"})}),!a&&(0,r.jsx)("span",{className:"text-xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:"DataCl\xednica"})]}),!s&&t&&(0,r.jsx)(C.$,{variant:"ghost",size:"sm",onClick:t,className:(0,o.cn)("p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",a&&"hidden"),"aria-label":a?"Expandir sidebar":"Recolher sidebar","aria-expanded":!a,children:(0,r.jsx)(w.A,{className:"h-4 w-4","aria-hidden":"true"})}),s&&d&&(0,r.jsx)(C.$,{variant:"ghost",size:"sm",onClick:d,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Fechar menu",children:(0,r.jsx)(k.A,{className:"h-4 w-4","aria-hidden":"true"})})]}),(0,r.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",role:"list",children:D.map((e,t)=>{let s=u===e.href;return(0,r.jsxs)(i(),{href:e.href,onClick:p,className:(0,o.cn)("flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors group relative","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","keyboard-user:focus:ring-2 keyboard-user:focus:ring-blue-500",s?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700",a&&"justify-center"),title:a?e.name:void 0,role:"listitem","data-keyboard-nav":!0,tabIndex:-1,"aria-current":s?"page":void 0,"aria-label":"".concat(e.name).concat(s?" (p\xe1gina atual)":""),children:[(0,r.jsx)(e.icon,{className:(0,o.cn)("w-5 h-5 flex-shrink-0",a?"":"mr-3"),"aria-hidden":"true"}),!a&&(0,r.jsx)("span",{className:"whitespace-nowrap",children:e.name}),a&&(0,r.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50",children:e.name})]},e.name)})}),(0,r.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsx)(E.hk,{onConfirm:g,children:(0,r.jsxs)(C.$,{variant:"ghost",className:(0,o.cn)("w-full text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700 group relative","focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2","keyboard-user:focus:ring-2 keyboard-user:focus:ring-red-500",a?"justify-center px-3":"justify-start"),title:a?"Sair":void 0,"data-keyboard-nav":!0,tabIndex:-1,"aria-label":"Sair do sistema",children:[(0,r.jsx)(A.A,{className:(0,o.cn)("w-5 h-5 flex-shrink-0",a?"":"mr-3"),"aria-hidden":"true"}),!a&&(0,r.jsx)("span",{children:"Sair"}),a&&(0,r.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-50",children:"Sair"})]})})})]});return s?(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:d,"aria-hidden":"true"}),(0,r.jsx)("div",{ref:x,className:(0,o.cn)("fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out lg:hidden","focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2",c?"translate-x-0":"-translate-x-full"),role:"navigation","aria-label":"Menu de navega\xe7\xe3o principal",children:(0,r.jsx)("div",{className:"flex flex-col h-full",children:b})})]}):(0,r.jsx)("div",{ref:x,className:(0,o.cn)("flex flex-col bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ease-in-out hidden lg:flex","focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2",a?"w-16":"w-64"),role:"navigation","aria-label":a?"Menu de navega\xe7\xe3o (recolhido)":"Menu de navega\xe7\xe3o principal",children:b})}}},e=>{e.O(0,[3455,3942,8250,5061,6671,5954,6967,2960,3464,6874,5452,1118,7127,2354,5161,9327,3856,3003,5394,2792,7469,8441,5964,7358],()=>e(e.s=30569)),_N_E=e.O()}]);