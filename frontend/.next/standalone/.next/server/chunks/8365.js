"use strict";exports.id=8365,exports.ids=[8365],exports.modules={103:(a,b,c)=>{c.d(b,{M3:()=>A,wM:()=>x,Wm:()=>u,$e:()=>w,kz:()=>C,NZ:()=>z,tF:()=>s,Id:()=>n,Kq:()=>r,$i:()=>q,Ll:()=>m,zU:()=>p,Ny:()=>o,By:()=>y,WW:()=>t,RY:()=>v,ex:()=>B});var d=c(51423),e=c(31074),f=c(54050),g=c(52581),h=c(59556);let i="/prescriptions",j={async getAll(a){let b=new URLSearchParams;a?.page&&b.append("page",a.page.toString()),a?.per_page&&b.append("per_page",a.per_page.toString()),a?.filters&&Object.entries(a.filters).forEach(([a,c])=>{null!=c&&""!==c&&b.append(a,c.toString())});let c=b.toString()?`${i}?${b}`:i;return(await h.O.get(c)).data},getById:async a=>(await h.O.get(`${i}/${a}`)).data,create:async a=>(await h.O.post(i,a)).data,update:async(a,b)=>(await h.O.put(`${i}/${a}`,b)).data,async delete(a){await h.O.delete(`${i}/${a}`)},async getByPatient(a,b){let c=new URLSearchParams;b?.page&&c.append("page",b.page.toString()),b?.per_page&&c.append("per_page",b.per_page.toString()),b?.status&&c.append("status",b.status);let d=c.toString()?`${i}/patient/${a}?${c}`:`${i}/patient/${a}`;return(await h.O.get(d)).data},async getByDoctor(a,b){let c=new URLSearchParams;b?.page&&c.append("page",b.page.toString()),b?.per_page&&c.append("per_page",b.per_page.toString()),b?.status&&c.append("status",b.status);let d=c.toString()?`${i}/doctor/${a}?${c}`:`${i}/doctor/${a}`;return(await h.O.get(d)).data},async getStats(a){let b=new URLSearchParams;a?.date_from&&b.append("date_from",a.date_from),a?.date_to&&b.append("date_to",a.date_to),a?.doctor_id&&b.append("doctor_id",a.doctor_id.toString());let c=b.toString()?`${i}/stats?${b}`:`${i}/stats`;return(await h.O.get(c)).data},cancel:async(a,b)=>(await h.O.patch(`${i}/${a}/cancel`,{reason:b})).data,renew:async(a,b)=>(await h.O.post(`${i}/${a}/renew`,{validity_days:b})).data,async generatePDF(a){let b=await fetch(`/api${i}/${a}/pdf`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!b.ok)throw Error("Erro ao gerar PDF");return b.blob()},validate:async a=>(await h.O.get(`${i}/${a}/validate`)).data,searchMedications:async a=>(await h.O.get(`/medications/search?q=${encodeURIComponent(a)}`)).data},k={getByPrescription:async a=>(await h.O.get(`${i}/${a}/medications`)).data,create:async a=>(await h.O.post(`${i}/${a.prescription_id}/medications`,a)).data,update:async(a,b,c)=>(await h.O.put(`${i}/${a}/medications/${b}`,c)).data,async delete(a,b){await h.O.delete(`${i}/${a}/medications/${b}`)}},l={all:["prescriptions"],lists:()=>[...l.all,"list"],list:a=>[...l.lists(),{filters:a}],details:()=>[...l.all,"detail"],detail:a=>[...l.details(),a],patient:a=>[...l.all,"patient",a],doctor:a=>[...l.all,"doctor",a],stats:a=>[...l.all,"stats",a],medications:a=>[...l.all,"medications",a]};function m(a){return(0,d.I)({queryKey:l.list(a?.filters||{}),queryFn:()=>j.getAll(a),staleTime:3e5})}function n(a){return(0,d.I)({queryKey:l.detail(a),queryFn:()=>j.getById(a),enabled:!!a,staleTime:3e5})}function o(a,b){return(0,d.I)({queryKey:l.patient(a),queryFn:()=>j.getByPatient(a,b),enabled:!!a,staleTime:3e5})}function p(a,b){return(0,d.I)({queryKey:l.doctor(a),queryFn:()=>j.getByDoctor(a,b),enabled:!!a,staleTime:3e5})}function q(a){return(0,d.I)({queryKey:l.stats(a),queryFn:()=>j.getStats(a),staleTime:6e5})}function r(a){return(0,d.I)({queryKey:l.medications(a),queryFn:()=>k.getByPrescription(a),enabled:!!a,staleTime:3e5})}function s(a){return(0,d.I)({queryKey:["medications","search",a],queryFn:()=>j.searchMedications(a),enabled:a.length>=2,staleTime:18e5})}let t=s;function u(){let a=(0,e.jE)();return(0,f.n)({mutationFn:a=>j.create(a),onSuccess:b=>{a.invalidateQueries({queryKey:l.lists()}),a.invalidateQueries({queryKey:l.patient(b.patient_id)}),a.invalidateQueries({queryKey:l.doctor(b.doctor_id)}),a.invalidateQueries({queryKey:l.stats()}),g.o.success("Prescri\xe7\xe3o criada com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao criar prescri\xe7\xe3o")}})}function v(){let a=(0,e.jE)();return(0,f.n)({mutationFn:({id:a,data:b})=>j.update(a,b),onSuccess:b=>{a.setQueryData(l.detail(b.id),b),a.invalidateQueries({queryKey:l.lists()}),a.invalidateQueries({queryKey:l.patient(b.patient_id)}),a.invalidateQueries({queryKey:l.doctor(b.doctor_id)}),g.o.success("Prescri\xe7\xe3o atualizada com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao atualizar prescri\xe7\xe3o")}})}function w(){let a=(0,e.jE)();return(0,f.n)({mutationFn:a=>j.delete(a),onSuccess:(b,c)=>{a.removeQueries({queryKey:l.detail(c)}),a.invalidateQueries({queryKey:l.lists()}),a.invalidateQueries({queryKey:l.stats()}),g.o.success("Prescri\xe7\xe3o exclu\xedda com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao excluir prescri\xe7\xe3o")}})}function x(){let a=(0,e.jE)();return(0,f.n)({mutationFn:({id:a,reason:b})=>j.cancel(a,b),onSuccess:b=>{a.setQueryData(l.detail(b.id),b),a.invalidateQueries({queryKey:l.lists()}),a.invalidateQueries({queryKey:l.patient(b.patient_id)}),g.o.success("Prescri\xe7\xe3o cancelada com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao cancelar prescri\xe7\xe3o")}})}function y(){let a=(0,e.jE)();return(0,f.n)({mutationFn:({id:a,validity_days:b})=>j.renew(a,b),onSuccess:b=>{a.invalidateQueries({queryKey:l.lists()}),a.invalidateQueries({queryKey:l.patient(b.patient_id)}),a.invalidateQueries({queryKey:l.doctor(b.doctor_id)}),g.o.success("Prescri\xe7\xe3o renovada com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao renovar prescri\xe7\xe3o")}})}function z(){return(0,f.n)({mutationFn:a=>j.generatePDF(a),onSuccess:(a,b)=>{let c=window.URL.createObjectURL(a),d=document.createElement("a");d.href=c,d.download=`prescricao-${b}.pdf`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c),g.o.success("PDF gerado com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao gerar PDF")}})}function A(){let a=(0,e.jE)();return(0,f.n)({mutationFn:a=>k.create(a),onSuccess:b=>{a.invalidateQueries({queryKey:l.medications(b.prescription_id)}),a.invalidateQueries({queryKey:l.detail(b.prescription_id)}),g.o.success("Medicamento adicionado com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao adicionar medicamento")}})}function B(){let a=(0,e.jE)();return(0,f.n)({mutationFn:({prescriptionId:a,medicationId:b,data:c})=>k.update(a,b,c),onSuccess:b=>{a.invalidateQueries({queryKey:l.medications(b.prescription_id)}),g.o.success("Medicamento atualizado com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao atualizar medicamento")}})}function C(){let a=(0,e.jE)();return(0,f.n)({mutationFn:({prescriptionId:a,medicationId:b})=>k.delete(a,b),onSuccess:(b,{prescriptionId:c})=>{a.invalidateQueries({queryKey:l.medications(c)}),g.o.success("Medicamento removido com sucesso!")},onError:a=>{g.o.error(a.message||"Erro ao remover medicamento")}})}},24934:(a,b,c)=>{c.d(b,{$:()=>j,r:()=>i});var d=c(60687),e=c(43210),f=c(8730),g=c(24224),h=c(96241);let i=(0,g.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},41862:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},55192:(a,b,c)=>{c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h});var d=c(60687),e=c(43210),f=c(96241);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("h3",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("p",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent",e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b})).displayName="CardFooter"},59556:(a,b,c)=>{c.d(b,{A:()=>g,O:()=>h});var d=c(51060),e=c(52581);let f=d.A.create({baseURL:"http://localhost:8000",timeout:1e4,headers:{"Content-Type":"application/json"}});f.interceptors.request.use(a=>{let b=localStorage.getItem("token");return b&&(a.headers.Authorization=`Bearer ${b}`),a},a=>Promise.reject(a)),f.interceptors.response.use(a=>a,a=>{let{response:b}=a;return b?.status===401?(localStorage.removeItem("token"),localStorage.removeItem("user"),e.o.error("Sess\xe3o expirada. Fa\xe7a login novamente."),window.location.href="/auth/login"):b?.status===403?e.o.error("Acesso negado."):b?.status===404?e.o.error("Recurso n\xe3o encontrado."):b?.status>=500?e.o.error("Erro interno do servidor. Tente novamente mais tarde."):"ECONNABORTED"===a.code?e.o.error("Tempo limite da requisi\xe7\xe3o excedido."):e.o.error(b?.data?.message||"Erro inesperado."),Promise.reject(a)});let g=f,h={get:async(a,b)=>(await f.get(a,{params:b})).data,post:async(a,b)=>(await f.post(a,b)).data,put:async(a,b)=>(await f.put(a,b)).data,delete:async a=>(await f.delete(a)).data,patch:async(a,b)=>(await f.patch(a,b)).data}},86396:(a,b,c)=>{c.d(b,{ID:()=>g,SY:()=>e,rg:()=>f,zE:()=>d});let d={SIMPLE:"simple",CONTROLLED:"controlled",SPECIAL:"special",DIGITAL:"digital"},e={ACTIVE:"active",EXPIRED:"expired",CANCELLED:"cancelled",DISPENSED:"dispensed"},f=[{value:"1x ao dia",label:"1x ao dia"},{value:"2x ao dia",label:"2x ao dia"},{value:"3x ao dia",label:"3x ao dia"},{value:"4x ao dia",label:"4x ao dia"},{value:"6x ao dia",label:"6x ao dia"},{value:"8x ao dia",label:"8x ao dia"},{value:"12x ao dia",label:"12x ao dia"},{value:"A cada 4 horas",label:"A cada 4 horas"},{value:"A cada 6 horas",label:"A cada 6 horas"},{value:"A cada 8 horas",label:"A cada 8 horas"},{value:"A cada 12 horas",label:"A cada 12 horas"},{value:"Quando necess\xe1rio",label:"Quando necess\xe1rio"},{value:"Uso cont\xednuo",label:"Uso cont\xednuo"}],g=[{value:"1 dia",label:"1 dia"},{value:"3 dias",label:"3 dias"},{value:"5 dias",label:"5 dias"},{value:"7 dias",label:"7 dias"},{value:"10 dias",label:"10 dias"},{value:"14 dias",label:"14 dias"},{value:"21 dias",label:"21 dias"},{value:"30 dias",label:"30 dias"},{value:"60 dias",label:"60 dias"},{value:"90 dias",label:"90 dias"},{value:"Uso cont\xednuo",label:"Uso cont\xednuo"}]},88233:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(62688).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},89e3:(a,b,c)=>{c.d(b,{LoadingSpinner:()=>h});var d=c(60687),e=c(41862),f=c(96241);let g={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};function h({size:a="md",className:b="",text:c}){return(0,d.jsx)("div",{className:(0,f.cn)("flex items-center justify-center",b),children:(0,d.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,d.jsx)(e.A,{className:(0,f.cn)("animate-spin text-gray-600",g[a])}),c&&(0,d.jsx)("p",{className:"text-sm text-gray-600 animate-pulse",children:c})]})})}},96241:(a,b,c)=>{c.d(b,{Yq:()=>g,cn:()=>f,r6:()=>h});var d=c(49384),e=c(82348);function f(...a){return(0,e.QP)((0,d.$)(a))}function g(a){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(new Date(a))}function h(a){return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(a))}}};