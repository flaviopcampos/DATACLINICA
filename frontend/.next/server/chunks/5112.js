"use strict";exports.id=5112,exports.ids=[5112],exports.modules={37765:(a,b,c)=>{c.d(b,{r:()=>j});var d=c(43210),e=c(31074),f=c(51423),g=c(54050),h=c(52581),i=c(95539);function j(a={}){let{reportType:b,autoRefresh:c=!1,refreshInterval:k=3e4}=a,l=(0,e.jE)(),[m,n]=(0,d.useState)({}),[o,p]=(0,d.useState)(null),{data:q=[],isLoading:r,error:s,refetch:t}=(0,f.I)({queryKey:["saved-reports",b,m],queryFn:()=>i.N.getSavedReports({report_type:b,...m}),refetchInterval:!!c&&k,staleTime:3e5}),{data:u=[],isLoading:v,refetch:w}=(0,f.I)({queryKey:["report-executions",o?.id],queryFn:()=>i.N.getReportExecutions({saved_report_id:o?.id}),enabled:!!o?.id,staleTime:12e4}),{data:x=[],isLoading:y}=(0,f.I)({queryKey:["report-types"],queryFn:()=>i.N.getReportTypes(),staleTime:6e5}),{data:z=[],isLoading:A}=(0,f.I)({queryKey:["popular-reports"],queryFn:()=>i.N.getPopularReports(),staleTime:3e5}),B=(0,g.n)({mutationFn:a=>i.N.createSavedReport(a),onSuccess:a=>{l.invalidateQueries({queryKey:["saved-reports"]}),h.o.success("Relat\xf3rio criado com sucesso!"),p(a)},onError:a=>{h.o.error(a.response?.data?.message||"Erro ao criar relat\xf3rio")}}),C=(0,g.n)({mutationFn:({id:a,report:b})=>i.N.updateSavedReport(a,b),onSuccess:a=>{l.invalidateQueries({queryKey:["saved-reports"]}),h.o.success("Relat\xf3rio atualizado com sucesso!"),p(a)},onError:a=>{h.o.error(a.response?.data?.message||"Erro ao atualizar relat\xf3rio")}}),D=(0,g.n)({mutationFn:a=>i.N.deleteSavedReport(a),onSuccess:()=>{l.invalidateQueries({queryKey:["saved-reports"]}),h.o.success("Relat\xf3rio exclu\xeddo com sucesso!"),o?.id===D.variables&&p(null)},onError:a=>{h.o.error(a.response?.data?.message||"Erro ao excluir relat\xf3rio")}}),E=(0,g.n)({mutationFn:a=>i.N.executeReport(a),onSuccess:()=>{l.invalidateQueries({queryKey:["report-executions"]}),h.o.success("Relat\xf3rio executado com sucesso!")},onError:a=>{h.o.error(a.response?.data?.message||"Erro ao executar relat\xf3rio")}}),F=(0,g.n)({mutationFn:a=>i.N.generateFinancialReport(a),onError:a=>{h.o.error(a.response?.data?.message||"Erro ao gerar relat\xf3rio financeiro")}}),G=(0,g.n)({mutationFn:a=>i.N.generateOperationalReport(a),onError:a=>{h.o.error(a.response?.data?.message||"Erro ao gerar relat\xf3rio operacional")}}),H=(0,g.n)({mutationFn:a=>i.N.generatePatientReport(a),onError:a=>{h.o.error(a.response?.data?.message||"Erro ao gerar relat\xf3rio de pacientes")}}),I=(0,d.useCallback)(async(a,b)=>{try{return await i.N.searchReports(a,b)}catch(a){return h.o.error(a.response?.data?.message||"Erro ao buscar relat\xf3rios"),[]}},[]),J=(0,d.useCallback)(a=>{n(b=>({...b,...a}))},[]),K=(0,d.useCallback)(()=>{n({})},[]),L=(0,d.useCallback)(a=>{p(a)},[]),M=(0,d.useCallback)(async a=>{let b={name:`${a.name} (C\xf3pia)`,description:a.description,report_type:a.report_type,query_config:a.query_config,visualization_config:a.visualization_config,is_public:!1};B.mutate(b)},[B]),N=(0,d.useCallback)(async(a,b)=>{try{await i.N.scheduleReport(a,b),l.invalidateQueries({queryKey:["saved-reports"]}),h.o.success("Relat\xf3rio agendado com sucesso!")}catch(a){h.o.error(a.response?.data?.message||"Erro ao agendar relat\xf3rio")}},[l]);return{savedReports:q,reportExecutions:u,reportTypes:x,popularReports:z,selectedReport:o,filters:m,isLoadingReports:r,isLoadingExecutions:v,isLoadingTypes:y,isLoadingPopular:A,isCreating:B.isPending,isUpdating:C.isPending,isDeleting:D.isPending,isExecuting:E.isPending,isGeneratingFinancial:F.isPending,isGeneratingOperational:G.isPending,isGeneratingPatient:H.isPending,reportsError:s,financialReport:F.data,operationalReport:G.data,patientReport:H.data,createReport:B.mutate,updateReport:C.mutate,deleteReport:D.mutate,executeReport:E.mutate,generateFinancialReport:F.mutate,generateOperationalReport:G.mutate,generatePatientReport:H.mutate,searchReports:I,applyFilters:J,clearFilters:K,selectReport:L,duplicateReport:M,scheduleReport:N,refetchReports:t,refetchExecutions:w}}},65910:(a,b,c)=>{c.d(b,{LoadingSpinner:()=>e});var d=c(61369);let e=(0,d.registerClientReference)(function(){throw Error("Attempted to call LoadingSpinner() from the server but LoadingSpinner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\flavi\\Documents\\Softwares\\DATACLINICA\\frontend\\components\\ui\\loading-spinner.tsx","LoadingSpinner");(0,d.registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\flavi\\\\Documents\\\\Softwares\\\\DATACLINICA\\\\frontend\\\\components\\\\ui\\\\loading-spinner.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\flavi\\Documents\\Softwares\\DATACLINICA\\frontend\\components\\ui\\loading-spinner.tsx","default")},67353:(a,b,c)=>{c.d(b,{A:()=>d.A});var d=c(59556)},89e3:(a,b,c)=>{c.d(b,{LoadingSpinner:()=>h});var d=c(60687),e=c(41862),f=c(96241);let g={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};function h({size:a="md",className:b="",text:c}){return(0,d.jsx)("div",{className:(0,f.cn)("flex items-center justify-center",b),children:(0,d.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,d.jsx)(e.A,{className:(0,f.cn)("animate-spin text-gray-600",g[a])}),c&&(0,d.jsx)("p",{className:"text-sm text-gray-600 animate-pulse",children:c})]})})}},95539:(a,b,c)=>{c.d(b,{N:()=>e});var d=c(67353);let e={getSavedReports:async a=>(await d.A.get("/saved-reports",{params:a})).data,getSavedReport:async a=>(await d.A.get(`/saved-reports/${a}`)).data,createSavedReport:async a=>(await d.A.post("/saved-reports",a)).data,updateSavedReport:async(a,b)=>(await d.A.put(`/saved-reports/${a}`,b)).data,async deleteSavedReport(a){await d.A.delete(`/saved-reports/${a}`)},executeReport:async a=>(await d.A.post("/report-executions",a)).data,getReportExecutions:async a=>(await d.A.get("/report-executions",{params:a})).data,getReportExecution:async a=>(await d.A.get(`/report-executions/${a}`)).data,getCustomDashboards:async a=>(await d.A.get("/dashboards",{params:a})).data,getCustomDashboard:async a=>(await d.A.get(`/dashboards/${a}`)).data,createCustomDashboard:async a=>(await d.A.post("/dashboards",a)).data,updateCustomDashboard:async(a,b)=>(await d.A.put(`/dashboards/${a}`,b)).data,async deleteCustomDashboard(a){await d.A.delete(`/dashboards/${a}`)},getDashboardWidgets:async a=>(await d.A.get("/dashboard-widgets",{params:a})).data,getDashboardWidget:async a=>(await d.A.get(`/dashboard-widgets/${a}`)).data,createDashboardWidget:async a=>(await d.A.post("/dashboard-widgets",a)).data,updateDashboardWidget:async(a,b)=>(await d.A.put(`/dashboard-widgets/${a}`,b)).data,async deleteDashboardWidget(a){await d.A.delete(`/dashboard-widgets/${a}`)},getPerformanceMetrics:async a=>(await d.A.get("/performance-metrics",{params:a})).data,getPerformanceMetric:async a=>(await d.A.get(`/performance-metrics/${a}`)).data,createPerformanceMetric:async a=>(await d.A.post("/performance-metrics",a)).data,getBIAlerts:async a=>(await d.A.get("/bi-alerts",{params:a})).data,getBIAlert:async a=>(await d.A.get(`/bi-alerts/${a}`)).data,createBIAlert:async a=>(await d.A.post("/bi-alerts",a)).data,resolveBIAlert:async a=>(await d.A.put(`/bi-alerts/${a}/resolve`)).data,getAlertConfigurations:async a=>(await d.A.get("/alert-configurations",{params:a})).data,createAlertConfiguration:async a=>(await d.A.post("/alert-configurations",a)).data,getFinancialAlerts:async()=>(await d.A.get("/financial/alerts")).data,getFinancialKPIs:async a=>(await d.A.get("/financial/kpis",{params:a})).data,getCashFlowProjection:async a=>(await d.A.get("/financial/cash-flow-projection",{params:a})).data,generateReport:async a=>(await d.A.post("/reports/generate",a,{responseType:"blob"})).data,generateFinancialReport:async a=>(await d.A.post("/reports/financial",a)).data,generateOperationalReport:async a=>(await d.A.post("/reports/operational",a)).data,generatePatientReport:async a=>(await d.A.post("/reports/patients",a)).data,exportReport:async(a,b)=>(await d.A.post(`/reports/${a}/export`,b,{responseType:"blob"})).data,exportDashboard:async(a,b)=>(await d.A.post(`/dashboards/${a}/export`,b,{responseType:"blob"})).data,async getDashboardData(a){let b=a?`/dashboards/${a}/data`:"/dashboard/data";return(await d.A.get(b)).data},refreshDashboardData:async a=>(await d.A.post(`/dashboards/${a}/refresh`)).data,getReportTypes:async()=>(await d.A.get("/reports/types")).data,getAvailableMetrics:async()=>(await d.A.get("/reports/metrics")).data,validateReportConfig:async a=>(await d.A.post("/reports/validate-config",a)).data.valid,searchReports:async(a,b)=>(await d.A.get("/reports/search",{params:{q:a,...b}})).data,getReportsByType:async a=>(await d.A.get("/saved-reports",{params:{report_type:a}})).data,getReportUsageStats:async()=>(await d.A.get("/reports/usage-stats")).data,getPopularReports:async()=>(await d.A.get("/reports/popular")).data,scheduleReport:async(a,b)=>(await d.A.post(`/saved-reports/${a}/schedule`,b)).data,unscheduleReport:async a=>(await d.A.delete(`/saved-reports/${a}/schedule`)).data,getScheduledReports:async()=>(await d.A.get("/saved-reports",{params:{is_scheduled:!0}})).data}},96541:(a,b,c)=>{c.d(b,{T:()=>h});var d=c(43210),e=c(51423),f=c(52581),g=c(95539);function h(a={}){let{dashboardId:b,autoRefresh:c=!1,refreshInterval:i=6e4}=a,[j,k]=(0,d.useState)({}),[l,m]=(0,d.useState)(null),[n,o]=(0,d.useState)({}),{data:p,isLoading:q,error:r,refetch:s}=(0,e.I)({queryKey:["dashboard-data",b,n],queryFn:()=>g.N.getDashboardData(b),refetchInterval:!!c&&i,staleTime:12e4}),{data:t=[],isLoading:u,refetch:v}=(0,e.I)({queryKey:["financial-kpis",n],queryFn:()=>g.N.getFinancialKPIs({start_date:n.startDate,end_date:n.endDate}),staleTime:3e5}),{data:w,isLoading:x,refetch:y}=(0,e.I)({queryKey:["cash-flow-projection",n],queryFn:()=>g.N.getCashFlowProjection({months:n.months||12}),staleTime:6e5}),z=(0,d.useCallback)((a,b,c)=>Array.isArray(a)?a.map(a=>({date:a[b],value:Number(a[c])||0})):[],[]),A=(0,d.useCallback)((a,b,c)=>Array.isArray(a)?a.map(a=>({label:a[b],value:Number(a[c])||0})):[],[]),B=(0,d.useCallback)((a,b,c)=>{if(!Array.isArray(a))return[];let d=a.reduce((a,b)=>a+(Number(b[c])||0),0);return a.map(a=>{let e=Number(a[c])||0;return{label:a[b],value:e,percentage:d>0?Math.round(e/d*100):0}})},[]),C=(0,d.useCallback)(a=>{let b=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"],c=[];for(let d=0;d<a;d++)c.push(b[d%b.length]);return c},[]),D=(0,d.useCallback)((a,b)=>{let c={id:a,type:b.type,title:b.title||"",options:{responsive:b.responsive??!0,maintainAspectRatio:!1,plugins:{legend:{display:b.showLegend??!0,position:"top"},tooltip:{enabled:b.showTooltip??!0},title:{display:!!b.title,text:b.title}},scales:"pie"!==b.type&&"doughnut"!==b.type?{x:{display:!0,grid:{display:b.showGrid??!0}},y:{display:!0,grid:{display:b.showGrid??!0}}}:void 0},data:{labels:[],datasets:[]}};return k(b=>({...b,[a]:c})),c},[]),E=(0,d.useCallback)((a,b)=>{k(c=>{let d=c[a];if(!d)return c;if(b.length>0&&"date"in b[0])d.data={labels:b.map(a=>a.date),datasets:[{label:d.title||"Dados",data:b.map(a=>a.value),borderColor:"#3B82F6",backgroundColor:"area"===d.type?"rgba(59, 130, 246, 0.1)":"#3B82F6",fill:"area"===d.type}]};else{let a=C(b.length);d.data={labels:b.map(a=>a.label),datasets:[{label:d.title||"Dados",data:b.map(a=>a.value),backgroundColor:a,borderColor:a,borderWidth:1}]}}return{...c,[a]:{...d}}})},[C]),F=(0,d.useCallback)(a=>{k(b=>{let{[a]:c,...d}=b;return d}),l===a&&m(null)},[l]),G=(0,d.useCallback)(a=>{o(b=>({...b,...a}))},[]),H=(0,d.useCallback)(()=>{o({})},[]),I=(0,d.useCallback)(async(a,b="png")=>{try{let c=document.querySelector(`#chart-${a} canvas`);if(!c)throw Error("Gr\xe1fico n\xe3o encontrado");let d=c.toDataURL(`image/${b}`),e=document.createElement("a");e.download=`chart-${a}.${b}`,e.href=d,e.click(),f.o.success("Gr\xe1fico exportado com sucesso!")}catch(a){f.o.error("Erro ao exportar gr\xe1fico")}},[]),J=(0,d.useMemo)(()=>t.map(a=>({label:a.name,value:a.value,target:a.target,unit:a.unit,trend:a.trend})),[t]),K=(0,d.useCallback)(a=>{let b="kpi-chart";return D(b,{type:"bar",title:"KPIs Financeiros",showLegend:!1}),E(b,a.map(a=>({label:a.name,value:a.value}))),b},[D,E]),L=(0,d.useCallback)(a=>{if(!a?.projections)return null;let b="cash-flow-chart";return D(b,{type:"line",title:"Proje\xe7\xe3o de Fluxo de Caixa",showGrid:!0}),E(b,a.projections.map(a=>({date:a.month,value:a.projected_balance}))),b},[D,E]);return{dashboardData:p,financialKPIs:t,cashFlowProjection:w,chartConfigs:j,selectedChart:l,chartFilters:n,processedKPIs:J,isLoadingDashboard:q,isLoadingKPIs:u,isLoadingCashFlow:x,dashboardError:r,createChartConfig:D,updateChartData:E,removeChart:F,setSelectedChart:m,processLineChartData:z,processBarChartData:A,processPieChartData:B,generateChartColors:C,applyChartFilters:G,clearChartFilters:H,exportChartAsImage:I,createKPIChart:K,createCashFlowChart:L,refetchDashboard:s,refetchKPIs:v,refetchCashFlow:y}}}};