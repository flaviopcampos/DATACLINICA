"use strict";exports.id=9030,exports.ids=[9030],exports.modules={3184:(a,b,c)=>{c.d(b,{B:()=>m});var d=c(43210),e=c(31074),f=c(51423),g=c(54050),h=c(52581),i=c(59556);class j{async getMetrics(a={}){let b=new URLSearchParams;return Object.entries(a).forEach(([a,c])=>{null!=c&&("dateRange"===a&&"object"==typeof c?(b.append("startDate",c.start.toISOString()),b.append("endDate",c.end.toISOString())):Array.isArray(c)||b.append(a,c.toString()))}),(await i.A.get(`${this.baseUrl}?${b}`)).data}async getMetric(a){return(await i.A.get(`${this.baseUrl}/${a}`)).data}async createMetric(a){return(await i.A.post(this.baseUrl,a)).data}async updateMetric(a,b){return(await i.A.put(`${this.baseUrl}/${a}`,b)).data}async deleteMetric(a){await i.A.delete(`${this.baseUrl}/${a}`)}async duplicateMetric(a,b){return(await i.A.post(`${this.baseUrl}/${a}/duplicate`,{name:b||"Copy of Metric"})).data}async calculateMetric(a){return(await i.A.post(`${this.baseUrl}/${a.metricId}/calculate`,{dateRange:a.dateRange,granularity:a.granularity,filters:a.filters,groupBy:a.groupBy})).data}async calculateMultipleMetrics(a){return(await i.A.post(`${this.baseUrl}/calculate-bulk`,a)).data}async recalculateMetric(a,b){return(await i.A.post(`${this.baseUrl}/${a}/recalculate`,{dateRange:b})).data}async getMetricValue(a,b){let c=b?`?date=${b.toISOString()}`:"";return(await i.A.get(`${this.baseUrl}/${a}/value${c}`)).data}async getMetricHistory(a,b,c="day"){return(await i.A.get(`${this.baseUrl}/${a}/history`,{params:{startDate:b.start.toISOString(),endDate:b.end.toISOString(),granularity:c}})).data}async compareMetric(a){return(await i.A.post(`${this.baseUrl}/${a.metricId}/compare`,{basePeriod:a.basePeriod,comparisonPeriod:a.comparisonPeriod,comparisonType:a.comparisonType})).data}async compareMultipleMetrics(a,b){return(await i.A.post(`${this.baseUrl}/compare-multiple`,{metricIds:a,dateRange:b})).data}async getBenchmarkComparison(a,b){return(await i.A.get(`${this.baseUrl}/${a}/benchmark/${b}`)).data}async setTarget(a,b){return(await i.A.post(`${this.baseUrl}/${a}/targets`,b)).data}async updateTarget(a,b,c){return(await i.A.put(`${this.baseUrl}/${a}/targets/${b}`,c)).data}async deleteTarget(a,b){await i.A.delete(`${this.baseUrl}/${a}/targets/${b}`)}async getTargetProgress(a,b){return(await i.A.get(`${this.baseUrl}/${a}/targets/${b}/progress`)).data}async createAlert(a,b){return(await i.A.post(`${this.baseUrl}/${a}/alerts`,b)).data}async updateAlert(a,b,c){return(await i.A.put(`${this.baseUrl}/${a}/alerts/${b}`,c)).data}async deleteAlert(a,b){await i.A.delete(`${this.baseUrl}/${a}/alerts/${b}`)}async getActiveAlerts(a){let b=a?`${this.baseUrl}/${a}/alerts/active`:`${this.baseUrl}/alerts/active`;return(await i.A.get(b)).data}async acknowledgeAlert(a,b){return(await i.A.post(`${this.baseUrl}/${a}/alerts/${b}/acknowledge`)).data}async snoozeAlert(a,b,c){return(await i.A.post(`${this.baseUrl}/${a}/alerts/${b}/snooze`,{duration:c})).data}async analyzeMetric(a,b="last_30_days"){return(await i.A.post(`${this.baseUrl}/${a}/analyze`,{analysisPeriod:b})).data}async getTrendAnalysis(a){return(await i.A.post(`${this.baseUrl}/${a.metricId}/trend`,{dateRange:a.dateRange,analysisPeriod:a.analysisPeriod,includeSeasonality:a.includeSeasonality,includeCycles:a.includeCycles})).data}async getStatistics(a,b){return(await i.A.get(`${this.baseUrl}/${a}/statistics`,{params:{startDate:b.start.toISOString(),endDate:b.end.toISOString()}})).data}async detectAnomalies(a){return(await i.A.post(`${this.baseUrl}/${a.metricId}/anomalies`,{dateRange:a.dateRange,sensitivity:a.sensitivity,algorithm:a.algorithm})).data}async getForecast(a){return(await i.A.post(`${this.baseUrl}/${a.metricId}/forecast`,{historicalPeriod:a.historicalPeriod,forecastPeriod:a.forecastPeriod,confidence:a.confidence,includeSeasonality:a.includeSeasonality,includeExternalFactors:a.includeExternalFactors})).data}async getMetricDashboards(){return(await i.A.get(`${this.baseUrl}/dashboards`)).data}async createMetricDashboard(a){return(await i.A.post(`${this.baseUrl}/dashboards`,a)).data}async updateMetricDashboard(a,b){return(await i.A.put(`${this.baseUrl}/dashboards/${a}`,b)).data}async deleteMetricDashboard(a){await i.A.delete(`${this.baseUrl}/dashboards/${a}`)}async getCategories(){return(await i.A.get(`${this.baseUrl}/categories`)).data}async getMetricTypes(a){let b=a?`?category=${a}`:"";return(await i.A.get(`${this.baseUrl}/types${b}`)).data}async getAvailableDataSources(){return(await i.A.get(`${this.baseUrl}/data-sources`)).data}async validateFormula(a,b){return(await i.A.post(`${this.baseUrl}/validate-formula`,{formula:a,dataSource:b})).data}async testMetricCalculation(a){return(await i.A.post(`${this.baseUrl}/test-calculation`,a)).data}async getClinicalMetrics(a){let b=a?{startDate:a.start.toISOString(),endDate:a.end.toISOString()}:{};return(await i.A.get(`${this.baseUrl}/clinical`,{params:b})).data}async getFinancialMetrics(a){let b=a?{startDate:a.start.toISOString(),endDate:a.end.toISOString()}:{};return(await i.A.get(`${this.baseUrl}/financial`,{params:b})).data}async getOperationalMetrics(a){let b=a?{startDate:a.start.toISOString(),endDate:a.end.toISOString()}:{};return(await i.A.get(`${this.baseUrl}/operational`,{params:b})).data}async getRealTimeMetrics(a){return(await i.A.post(`${this.baseUrl}/real-time`,{metricIds:a})).data}async subscribeToMetricUpdates(a,b){return()=>{}}async exportMetrics(a,b="csv"){return(await i.A.post(`${this.baseUrl}/export`,{metricIds:a,format:b},{responseType:"blob"})).data}async importMetrics(a){let b=new FormData;return b.append("file",a),(await i.A.post(`${this.baseUrl}/import`,b,{headers:{"Content-Type":"multipart/form-data"}})).data}formatMetricValue(a,b,c=2){let d=a.toFixed(c);switch(b){case"percentage":return`${d}%`;case"currency":return`R$ ${d}`;case"count":return Math.round(a).toString();case"time":return`${d}h`;case"rate":return`${d}/min`;default:return`${d} ${b}`}}calculatePercentageChange(a,b){return 0===b?100*(a>0):(a-b)/b*100}getTrendDirection(a,b){let c=this.calculatePercentageChange(a,b);return 1>Math.abs(c)?"stable":c>0?"up":"down"}isMetricHealthy(a,b){if(!a.targets||0===a.targets.length)return!0;let c=a.targets.find(a=>new Date>=new Date(a.startDate)&&new Date<=new Date(a.endDate));if(!c)return!0;switch(c.type){case"minimum":return b>=c.value;case"maximum":return b<=c.value;case"exact":return Math.abs(b-c.value)<=(c.tolerance||0);case"range":return b>=c.minValue&&b<=c.maxValue;default:return!0}}generateMetricId(){return`metric_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}validateMetricConfig(a){let b=[];return a.name&&0!==a.name.trim().length||b.push("Nome da m\xe9trica \xe9 obrigat\xf3rio"),a.category||b.push("Categoria da m\xe9trica \xe9 obrigat\xf3ria"),a.type||b.push("Tipo da m\xe9trica \xe9 obrigat\xf3rio"),a.unit&&0!==a.unit.trim().length||b.push("Unidade da m\xe9trica \xe9 obrigat\xf3ria"),a.dataSource&&0!==a.dataSource.trim().length||b.push("Fonte de dados \xe9 obrigat\xf3ria"),a.refreshInterval&&a.refreshInterval<60&&b.push("Intervalo de atualiza\xe7\xe3o deve ser pelo menos 60 segundos"),{isValid:0===b.length,errors:b}}constructor(){this.baseUrl="/api/bi/metrics"}}let k=new j,l={metrics:(a,b)=>["bi","metrics",{category:a,type:b}],metric:a=>["bi","metric",a],history:(a,b)=>["bi","metric-history",a,b],analysis:a=>["bi","metric-analysis",a],trends:(a,b)=>["bi","metric-trends",a,b],anomalies:a=>["bi","metric-anomalies",a],forecasts:a=>["bi","metric-forecasts",a],targets:a=>["bi","metric-targets",a],alerts:a=>["bi","metric-alerts",a],dashboards:["bi","metric-dashboards"],clinicalMetrics:["bi","clinical-metrics"],financialMetrics:["bi","financial-metrics"],operationalMetrics:["bi","operational-metrics"]};function m(a={}){let{category:b,type:c,autoRefresh:i=!1,refreshInterval:j=3e4,enableAlerts:n=!0,enableRealtime:o=!1}=a,p=(0,e.jE)(),[q,r]=(0,d.useState)(null),[s,t]=(0,d.useState)({}),[u,v]=(0,d.useState)(new Map),{data:w=[],isLoading:x,error:y,refetch:z}=(0,f.I)({queryKey:l.metrics(b,c),queryFn:()=>k.getMetrics({category:b,type:c,filters:s}),refetchInterval:!!i&&j,staleTime:3e5*!i}),{data:A=[],isLoading:B}=(0,f.I)({queryKey:l.history(q?.id||"","30d"),queryFn:()=>k.getMetricHistory(q.id,"30d"),enabled:!!q,refetchInterval:!!i&&j}),{data:C,isLoading:D}=(0,f.I)({queryKey:l.analysis(q?.id||""),queryFn:()=>k.analyzeMetric(q.id),enabled:!!q,staleTime:6e5}),{data:E,isLoading:F}=(0,f.I)({queryKey:l.trends(q?.id||"","30d"),queryFn:()=>k.analyzeTrends(q.id,"30d"),enabled:!!q,staleTime:6e5}),{data:G=[],isLoading:H}=(0,f.I)({queryKey:l.anomalies(q?.id||""),queryFn:()=>k.detectAnomalies(q.id),enabled:!!q,staleTime:9e5}),{data:I=[],isLoading:J}=(0,f.I)({queryKey:l.forecasts(q?.id||""),queryFn:()=>k.generateForecast(q.id,30),enabled:!!q,staleTime:18e5}),{data:K=[],isLoading:L}=(0,f.I)({queryKey:l.targets(q?.id||""),queryFn:()=>k.getMetricTargets(q.id),enabled:!!q}),{data:M=[],isLoading:N}=(0,f.I)({queryKey:l.alerts(q?.id),queryFn:()=>k.getMetricAlerts(q?.id),enabled:n,refetchInterval:6e4}),{data:O=[],isLoading:P}=(0,f.I)({queryKey:l.dashboards,queryFn:()=>k.getMetricDashboards(),staleTime:6e5}),{data:Q,isLoading:R}=(0,f.I)({queryKey:l.clinicalMetrics,queryFn:()=>k.getClinicalMetrics(),enabled:"clinical"===b||!b,refetchInterval:!!i&&j}),{data:S,isLoading:T}=(0,f.I)({queryKey:l.financialMetrics,queryFn:()=>k.getFinancialMetrics(),enabled:"financial"===b||!b,refetchInterval:!!i&&j}),{data:U,isLoading:V}=(0,f.I)({queryKey:l.operationalMetrics,queryFn:()=>k.getOperationalMetrics(),enabled:"operational"===b||!b,refetchInterval:!!i&&j}),W=x||B||D||F||H||J||L||N||P||R||T||V,X=(0,d.useMemo)(()=>[],[]),Y=(0,d.useMemo)(()=>{let a=[...new Set(w.map(a=>a.category))],b=[...new Set(w.map(a=>a.type))];return[{id:"category",name:"Categoria",type:"select",options:a.map(a=>({label:a,value:a}))},{id:"type",name:"Tipo",type:"select",options:b.map(a=>({label:a,value:a}))},{id:"dateRange",name:"Per\xedodo",type:"dateRange"}]},[w]),Z=(0,d.useMemo)(()=>M.filter(a=>a.isActive&&!a.isAcknowledged),[M]),$=(0,g.n)({mutationFn:k.createMetric,onSuccess:()=>{p.invalidateQueries({queryKey:l.metrics(b,c)}),h.o.success("M\xe9trica criada com sucesso!")},onError:a=>{h.o.error("Erro ao criar m\xe9trica: "+a.message)}}),_=(0,g.n)({mutationFn:({id:a,data:b})=>k.updateMetric(a,b),onSuccess:()=>{p.invalidateQueries({queryKey:l.metrics(b,c)}),q&&p.invalidateQueries({queryKey:l.metric(q.id)}),h.o.success("M\xe9trica atualizada com sucesso!")},onError:a=>{h.o.error("Erro ao atualizar m\xe9trica: "+a.message)}}),aa=(0,g.n)({mutationFn:k.deleteMetric,onSuccess:()=>{p.invalidateQueries({queryKey:l.metrics(b,c)}),r(null),h.o.success("M\xe9trica exclu\xedda com sucesso!")},onError:a=>{h.o.error("Erro ao excluir m\xe9trica: "+a.message)}}),ab=(0,d.useCallback)(async a=>$.mutateAsync(a),[$]),ac=(0,d.useCallback)(async(a,b)=>_.mutateAsync({id:a,data:b}),[_]),ad=(0,d.useCallback)(async a=>{await aa.mutateAsync(a)},[aa]),ae=(0,d.useCallback)(async(a,b)=>{try{let c=await k.calculateMetric(a,b);return p.invalidateQueries({queryKey:l.metric(a)}),c}catch(a){throw h.o.error("Erro ao calcular m\xe9trica: "+a.message),a}},[p]),af=(0,d.useCallback)(async(a,b)=>{try{let c=await k.calculateBulkMetrics(a,b);return a.forEach(a=>{p.invalidateQueries({queryKey:l.metric(a)})}),c}catch(a){throw h.o.error("Erro ao calcular m\xe9tricas: "+a.message),a}},[p]),ag=(0,d.useCallback)(async a=>{try{await k.recalculateMetric(a),p.invalidateQueries({queryKey:l.metric(a)}),p.invalidateQueries({queryKey:l.history(a)}),h.o.success("M\xe9trica recalculada com sucesso!")}catch(a){h.o.error("Erro ao recalcular m\xe9trica: "+a.message)}},[p]),ah=(0,d.useCallback)(a=>{r(a)},[]),ai=(0,d.useCallback)(async(a,b="30d")=>{try{return await k.getMetricHistory(a,b)}catch(a){throw h.o.error("Erro ao obter hist\xf3rico: "+a.message),a}},[]),aj=(0,d.useCallback)(async a=>{try{await k.clearMetricHistory(a),p.invalidateQueries({queryKey:l.history(a)}),h.o.success("Hist\xf3rico limpo com sucesso!")}catch(a){h.o.error("Erro ao limpar hist\xf3rico: "+a.message)}},[p]),ak=(0,d.useCallback)(async(a,b)=>{try{let c=await k.analyzeMetric(a,b);return p.setQueryData(l.analysis(a),c),c}catch(a){throw h.o.error("Erro ao analisar m\xe9trica: "+a.message),a}},[p]),al=(0,d.useCallback)(async(a,b="30d")=>{try{let c=await k.analyzeTrends(a,b);return p.setQueryData(l.trends(a,b),c),c}catch(a){throw h.o.error("Erro ao analisar tend\xeancias: "+a.message),a}},[p]),am=(0,d.useCallback)(async(a,b=.8)=>{try{let c=await k.detectAnomalies(a,b);return p.setQueryData(l.anomalies(a),c),c}catch(a){throw h.o.error("Erro ao detectar anomalias: "+a.message),a}},[p]),an=(0,d.useCallback)(async(a,b=30)=>{try{let c=await k.generateForecast(a,b);return p.setQueryData(l.forecasts(a),c),c}catch(a){throw h.o.error("Erro ao gerar previs\xe3o: "+a.message),a}},[p]),ao=(0,d.useCallback)(async(a,b)=>{try{return await k.compareMetrics(a,b)}catch(a){throw h.o.error("Erro ao comparar m\xe9tricas: "+a.message),a}},[]),ap=(0,d.useCallback)(async(a,b)=>{try{return await k.comparePeriods(a,b)}catch(a){throw h.o.error("Erro ao comparar per\xedodos: "+a.message),a}},[]),aq=(0,d.useCallback)(async(a,b)=>{try{let c=await k.setMetricTarget(a,b);return p.invalidateQueries({queryKey:l.targets(a)}),h.o.success("Meta definida com sucesso!"),c}catch(a){throw h.o.error("Erro ao definir meta: "+a.message),a}},[p]),ar=(0,d.useCallback)(async(a,b)=>{try{let c=await k.updateMetricTarget(a,b);return p.invalidateQueries({queryKey:l.targets(q?.id||"")}),h.o.success("Meta atualizada com sucesso!"),c}catch(a){throw h.o.error("Erro ao atualizar meta: "+a.message),a}},[p,q]),as=(0,d.useCallback)(async a=>{try{await k.deleteMetricTarget(a),p.invalidateQueries({queryKey:l.targets(q?.id||"")}),h.o.success("Meta exclu\xedda com sucesso!")}catch(a){h.o.error("Erro ao excluir meta: "+a.message)}},[p,q]),at=(0,d.useCallback)(async(a,b)=>{try{let c=await k.createMetricAlert(a,b);return p.invalidateQueries({queryKey:l.alerts(a)}),h.o.success("Alerta criado com sucesso!"),c}catch(a){throw h.o.error("Erro ao criar alerta: "+a.message),a}},[p]),au=(0,d.useCallback)(async(a,b)=>{try{let c=await k.updateMetricAlert(a,b);return p.invalidateQueries({queryKey:l.alerts()}),h.o.success("Alerta atualizado com sucesso!"),c}catch(a){throw h.o.error("Erro ao atualizar alerta: "+a.message),a}},[p]),av=(0,d.useCallback)(async a=>{try{await k.deleteMetricAlert(a),p.invalidateQueries({queryKey:l.alerts()}),h.o.success("Alerta exclu\xeddo com sucesso!")}catch(a){h.o.error("Erro ao excluir alerta: "+a.message)}},[p]),aw=(0,d.useCallback)(async a=>{try{await k.acknowledgeAlert(a),p.invalidateQueries({queryKey:l.alerts()}),h.o.success("Alerta reconhecido!")}catch(a){h.o.error("Erro ao reconhecer alerta: "+a.message)}},[p]),ax=(0,d.useCallback)(async(a,b)=>{try{await k.snoozeAlert(a,b),p.invalidateQueries({queryKey:l.alerts()}),h.o.success("Alerta adiado!")}catch(a){h.o.error("Erro ao adiar alerta: "+a.message)}},[p]),ay=(0,d.useCallback)(async a=>{try{let b=await k.createMetricDashboard(a);return p.invalidateQueries({queryKey:l.dashboards}),h.o.success("Dashboard criado com sucesso!"),b}catch(a){throw h.o.error("Erro ao criar dashboard: "+a.message),a}},[p]),az=(0,d.useCallback)(async(a,b)=>{try{let c=await k.updateMetricDashboard(a,b);return p.invalidateQueries({queryKey:l.dashboards}),h.o.success("Dashboard atualizado com sucesso!"),c}catch(a){throw h.o.error("Erro ao atualizar dashboard: "+a.message),a}},[p]),aA=(0,d.useCallback)(async a=>{try{await k.deleteMetricDashboard(a),p.invalidateQueries({queryKey:l.dashboards}),h.o.success("Dashboard exclu\xeddo com sucesso!")}catch(a){h.o.error("Erro ao excluir dashboard: "+a.message)}},[p]),aB=(0,d.useCallback)((a,b)=>{t(c=>({...c,[a]:b})),z()},[z]),aC=(0,d.useCallback)(a=>{t(b=>{let c={...b};return delete c[a],c}),z()},[z]),aD=(0,d.useCallback)(()=>{t({}),z()},[z]),aE=(0,d.useCallback)(async()=>{try{await z(),q&&(p.invalidateQueries({queryKey:l.history(q.id)}),p.invalidateQueries({queryKey:l.analysis(q.id)})),h.o.success("Dados atualizados com sucesso!")}catch(a){h.o.error("Erro ao atualizar dados: "+a.message)}},[z,q,p]),aF=(0,d.useCallback)(async(a,b)=>{try{let c=b||w.map(a=>a.id),d=await k.exportMetrics(c,a),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`metrics-export.${a}`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(e),h.o.success("M\xe9tricas exportadas com sucesso!")}catch(a){h.o.error("Erro ao exportar m\xe9tricas: "+a.message)}},[w]),aG=(0,d.useCallback)(async a=>{try{return await k.getRealTimeMetrics(a)}catch(a){throw h.o.error("Erro ao obter m\xe9tricas em tempo real: "+a.message),a}},[]),aH=(0,d.useCallback)((a,b)=>{if(!o)return()=>{};let c=k.subscribeToMetricUpdates(a,b);return v(b=>{let d=new Map(b);return d.set(a,c),d}),()=>{c(),v(b=>{let c=new Map(b);return c.delete(a),c})}},[o]),aI=(0,d.useCallback)(a=>{let b=w.find(b=>b.id===a);return b?.currentValue||null},[w]),aJ=(0,d.useCallback)(a=>{let b=w.find(b=>b.id===a);return b?k.getMetricHealthStatus(b):"unknown"},[w]),aK=(0,d.useCallback)(a=>{let b=w.find(b=>b.id===a);return b?k.getTrendDirection(b):"stable"},[w]);return{metrics:w,selectedMetric:q,isLoading:W,isError:!!y,error:y,history:A,analysis:C||null,trends:E||null,anomalies:G,forecasts:I,comparisons:X,targets:K,alerts:M,activeAlerts:Z,dashboards:O,filters:Y,activeFilters:s,clinicalMetrics:Q||null,financialMetrics:S||null,operationalMetrics:U||null,createMetric:ab,updateMetric:ac,deleteMetric:ad,calculateMetric:ae,calculateBulkMetrics:af,recalculateMetric:ag,selectMetric:ah,getHistory:ai,clearHistory:aj,analyzeMetric:ak,analyzeTrends:al,detectAnomalies:am,generateForecast:an,compareMetrics:ao,comparePeriods:ap,setTarget:aq,updateTarget:ar,deleteTarget:as,createAlert:at,updateAlert:au,deleteAlert:av,acknowledgeAlert:aw,snoozeAlert:ax,createDashboard:ay,updateDashboard:az,deleteDashboard:aA,applyFilter:aB,removeFilter:aC,clearFilters:aD,refreshData:aE,exportMetrics:aF,getRealTimeMetrics:aG,subscribeToMetric:aH,getMetricValue:aI,getMetricStatus:aJ,getMetricTrend:aK,formatMetricValue:(0,d.useCallback)((a,b)=>k.formatValue(a,b.unit,b.precision),[])}}},71463:(a,b,c)=>{c.d(b,{E:()=>f});var d=c(60687),e=c(96241);function f({className:a,...b}){return(0,d.jsx)("div",{className:(0,e.cn)("animate-pulse rounded-md bg-muted",a),...b})}},75714:(a,b,c)=>{c.d(b,{C:()=>ag});var d=c(60687),e=c(43210),f=c(96241),g=c(55192),h=c(24934),i=c(71463),j=c(63974),k=c(55629),l=c(61678),m=c(85168),n=c(27747),o=c(9920),p=c(38246),q=c(57359),r=c(50326),s=c(46245),t=c(62422),u=c(51327),v=c(61855),w=c(49481),x=c(2041),y=c(90812),z=c(88032),A=c(69206),B=c(25679),C=c(86940),D=c(28274),E=c(11466),F=c(61276),G=c(87780),H=c(7515),I=c(12172),J=c(38904),K=c(48482),L=c(25541),M=c(58559),N=c(53411),O=c(27235),P=c(28947),Q=c(45583),R=c(13861),S=c(78272),T=c(12597),U=c(31158),V=c(78122),W=c(79351),X=c(80462),Y=c(84027),Z=c(6943),$=c(96882),_=c(43649);let aa={default:["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#f97316","#84cc16"],medical:["#059669","#dc2626","#2563eb","#7c3aed","#db2777","#ea580c","#65a30d","#0891b2"],professional:["#1f2937","#374151","#4b5563","#6b7280","#9ca3af","#d1d5db","#e5e7eb","#f3f4f6"],vibrant:["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd"],pastel:["#a8e6cf","#dcedc1","#ffd3a5","#ffa8a8","#b4a7d6","#d4a4eb","#f8c8dc","#c7ceea"]},ab={line:{icon:L.A,label:"Linha"},area:{icon:M.A,label:"\xc1rea"},bar:{icon:N.A,label:"Barras"},pie:{icon:O.A,label:"Pizza"},scatter:{icon:P.A,label:"Dispers\xe3o"},radar:{icon:Q.A,label:"Radar"},composed:{icon:N.A,label:"Composto"}};function ac(a,b){if(null==a)return"N/A";switch(b){case"currency":return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a);case"percentage":return`${(100*a).toFixed(1)}%`;case"decimal":return Number(a).toFixed(2);case"integer":return Math.round(Number(a)).toString();case"date":return new Date(a).toLocaleDateString("pt-BR");case"datetime":return new Date(a).toLocaleString("pt-BR");default:return"number"==typeof a?a.toLocaleString("pt-BR"):String(a)}}function ad({active:a,payload:b,label:c,config:e}){return a&&b&&b.length?(0,d.jsxs)("div",{className:"bg-background border border-border rounded-lg shadow-lg p-3 min-w-[200px]",children:[(0,d.jsx)("p",{className:"font-medium text-foreground mb-2",children:ac(c,e?.xAxis?.format)}),b.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center justify-between space-x-4 text-sm",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),(0,d.jsxs)("span",{className:"text-muted-foreground",children:[a.name,":"]})]}),(0,d.jsx)("span",{className:"font-medium text-foreground",children:ac(a.value,a.format)})]},b))]}):null}function ae({type:a,config:b,series:c,showExport:e=!0,showRefresh:f=!0,showMaximize:g=!0,showFilters:i=!1,onTypeChange:l,onConfigChange:m,onSeriesToggle:n,onExport:o,onRefresh:p,onMaximize:q}){return(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsxs)(j.l6,{value:a,onValueChange:l,children:[(0,d.jsx)(j.bq,{className:"w-32",children:(0,d.jsx)(j.yv,{})}),(0,d.jsx)(j.gC,{children:Object.entries(ab).map(([a,{icon:b,label:c}])=>(0,d.jsx)(j.eb,{value:a,children:(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(b,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:c})]})},a))})]}),(0,d.jsxs)(k.rI,{children:[(0,d.jsx)(k.ty,{asChild:!0,children:(0,d.jsxs)(h.$,{variant:"outline",size:"sm",children:[(0,d.jsx)(R.A,{className:"h-4 w-4 mr-2"}),"S\xe9ries",(0,d.jsx)(S.A,{className:"h-4 w-4 ml-2"})]})}),(0,d.jsxs)(k.SQ,{children:[(0,d.jsx)(k.lp,{children:"Mostrar/Ocultar S\xe9ries"}),(0,d.jsx)(k.mB,{}),c.map(a=>(0,d.jsxs)(k._2,{onClick:()=>n?.(a.id),className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),(0,d.jsx)("span",{children:a.name})]}),a.visible?(0,d.jsx)(R.A,{className:"h-4 w-4"}):(0,d.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground"})]},a.id))]})]}),e&&(0,d.jsxs)(k.rI,{children:[(0,d.jsx)(k.ty,{asChild:!0,children:(0,d.jsx)(h.$,{variant:"outline",size:"sm",children:(0,d.jsx)(U.A,{className:"h-4 w-4"})})}),(0,d.jsxs)(k.SQ,{children:[(0,d.jsx)(k.lp,{children:"Exportar como"}),(0,d.jsx)(k.mB,{}),(0,d.jsx)(k._2,{onClick:()=>o?.("png"),children:"Imagem PNG"}),(0,d.jsx)(k._2,{onClick:()=>o?.("svg"),children:"Vetor SVG"}),(0,d.jsx)(k._2,{onClick:()=>o?.("pdf"),children:"Documento PDF"}),(0,d.jsx)(k._2,{onClick:()=>o?.("csv"),children:"Dados CSV"})]})]}),f&&(0,d.jsx)(h.$,{variant:"outline",size:"sm",onClick:p,children:(0,d.jsx)(V.A,{className:"h-4 w-4"})}),g&&(0,d.jsx)(h.$,{variant:"outline",size:"sm",onClick:q,children:(0,d.jsx)(W.A,{className:"h-4 w-4"})}),i&&(0,d.jsx)(h.$,{variant:"outline",size:"sm",children:(0,d.jsx)(X.A,{className:"h-4 w-4"})}),(0,d.jsxs)(k.rI,{children:[(0,d.jsx)(k.ty,{asChild:!0,children:(0,d.jsx)(h.$,{variant:"outline",size:"sm",children:(0,d.jsx)(Y.A,{className:"h-4 w-4"})})}),(0,d.jsxs)(k.SQ,{children:[(0,d.jsx)(k.lp,{children:"Configura\xe7\xf5es"}),(0,d.jsx)(k.mB,{}),(0,d.jsxs)(k._2,{onClick:()=>m?.({showGrid:!b.showGrid}),children:[(0,d.jsx)(Z.A,{className:"h-4 w-4 mr-2"}),b.showGrid?"Ocultar":"Mostrar"," Grade"]}),(0,d.jsxs)(k._2,{onClick:()=>m?.({showLegend:!b.showLegend}),children:[(0,d.jsx)($.A,{className:"h-4 w-4 mr-2"}),b.showLegend?"Ocultar":"Mostrar"," Legenda"]}),(0,d.jsxs)(k._2,{onClick:()=>m?.({animation:!b.animation}),children:[(0,d.jsx)(Q.A,{className:"h-4 w-4 mr-2"}),b.animation?"Desabilitar":"Habilitar"," Anima\xe7\xe3o"]})]})]})]})}function af({series:a,colors:b,onSeriesToggle:c,position:e="bottom",align:g="center",className:h}){return(0,d.jsx)("div",{className:(0,f.cn)("flex flex-wrap gap-4 text-sm",{start:"justify-start",center:"justify-center",end:"justify-end"}[g],h),children:a.map((a,e)=>(0,d.jsxs)("div",{className:(0,f.cn)("flex items-center space-x-2 cursor-pointer transition-opacity",!a.visible&&"opacity-50"),onClick:()=>c?.(a.id),children:[(0,d.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color||b[e%b.length]}}),(0,d.jsx)("span",{className:(0,f.cn)("text-muted-foreground hover:text-foreground transition-colors",!a.visible&&"line-through"),children:a.name})]},a.id))})}function ag({data:a,config:b,type:c="line",title:j,description:k,series:L=[],xAxis:M,yAxis:O,legend:P,tooltip:Q,theme:R="default",colors:S,animation:T,interaction:U,width:W="100%",height:X=400,responsive:Y=!0,showControls:Z=!0,showExport:$=!0,showRefresh:ab=!0,showMaximize:ag=!0,showFilters:ah=!1,showGrid:ai=!0,showBrush:aj=!1,showReferenceLine:ak=!1,referenceLines:al=[],referenceAreas:am=[],className:an,loading:ao=!1,error:ap=null,onDataPointClick:aq,onLegendClick:ar,onBrushChange:as,onExport:at,onRefresh:au,onMaximize:av,onConfigChange:aw}){let[ax,ay]=(0,e.useState)(c),[az,aA]=(0,e.useState)(b),[aB,aC]=(0,e.useState)(L.map(a=>a.id)),aD=(0,e.useMemo)(()=>S||function(a="default"){return aa[a]||aa.default}(R),[S,R]),aE=(0,e.useMemo)(()=>L.map((a,b)=>({...a,color:a.color||aD[b%aD.length],visible:aB.includes(a.id)})),[L,aD,aB]),aF=(0,e.useMemo)(()=>a&&0!==a.length?a:[],[a]),aG=(0,e.useCallback)(a=>{ay(a)},[]),aH=(0,e.useCallback)(a=>{let b={...az,...a};aA(b),aw?.(b)},[az,aw]),aI=(0,e.useCallback)(a=>{aC(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},[]),aJ=()=>{let a={data:aF,margin:{top:20,right:30,left:20,bottom:20},onClick:aq},b={dataKey:M?.dataKey||"name",tick:{fontSize:12},tickFormatter:a=>ac(a,M?.format),...M?.label&&{label:{value:M.label,position:"insideBottom",offset:-10}}},c={tick:{fontSize:12},tickFormatter:a=>ac(a,O?.format),...O?.label&&{label:{value:O.label,angle:-90,position:"insideLeft"}}},e={content:(0,d.jsx)(ad,{config:az}),cursor:{strokeDasharray:"3 3"}};switch(ax){case"line":return(0,d.jsxs)(l.b,{...a,children:[ai&&(0,d.jsx)(m.d,{strokeDasharray:"3 3",opacity:.3}),(0,d.jsx)(n.W,{...b}),(0,d.jsx)(o.h,{...c}),(0,d.jsx)(p.m,{...e}),az.showLegend&&(0,d.jsx)(q.s,{onClick:ar}),aE.filter(a=>a.visible).map((a,b)=>(0,d.jsx)(r.N,{type:"monotone",dataKey:a.dataKey,stroke:a.color,strokeWidth:2,dot:{r:4},activeDot:{r:6},animationDuration:T?.duration||1e3,connectNulls:!1},a.id)),al.map((a,b)=>(0,d.jsx)(s.e,{y:a.value,stroke:a.color||"#666",strokeDasharray:a.strokeDasharray||"5 5",label:a.label},b)),am.map((a,b)=>(0,d.jsx)(t.T,{x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2,fill:a.fill||"rgba(0,0,0,0.1)",label:a.label},b)),aj&&(0,d.jsx)(u.v,{dataKey:M?.dataKey||"name",height:30,onChange:as})]});case"area":return(0,d.jsxs)(v.Q,{...a,children:[ai&&(0,d.jsx)(m.d,{strokeDasharray:"3 3",opacity:.3}),(0,d.jsx)(n.W,{...b}),(0,d.jsx)(o.h,{...c}),(0,d.jsx)(p.m,{...e}),az.showLegend&&(0,d.jsx)(q.s,{onClick:ar}),aE.filter(a=>a.visible).map((a,b)=>(0,d.jsx)(w.G,{type:"monotone",dataKey:a.dataKey,stroke:a.color,fill:a.color,fillOpacity:.3,strokeWidth:2,animationDuration:T?.duration||1e3},a.id)),aj&&(0,d.jsx)(u.v,{dataKey:M?.dataKey||"name",height:30,onChange:as})]});case"bar":return(0,d.jsxs)(x.E,{...a,children:[ai&&(0,d.jsx)(m.d,{strokeDasharray:"3 3",opacity:.3}),(0,d.jsx)(n.W,{...b}),(0,d.jsx)(o.h,{...c}),(0,d.jsx)(p.m,{...e}),az.showLegend&&(0,d.jsx)(q.s,{onClick:ar}),aE.filter(a=>a.visible).map((a,b)=>(0,d.jsx)(y.y,{dataKey:a.dataKey,fill:a.color,radius:[2,2,0,0],animationDuration:T?.duration||1e3},a.id)),aj&&(0,d.jsx)(u.v,{dataKey:M?.dataKey||"name",height:30,onChange:as})]});case"pie":return(0,d.jsxs)(z.r,{...a,children:[(0,d.jsx)(p.m,{...e}),az.showLegend&&(0,d.jsx)(q.s,{onClick:ar}),(0,d.jsx)(A.F,{data:aF,cx:"50%",cy:"50%",outerRadius:120,fill:"#8884d8",dataKey:aE[0]?.dataKey||"value",animationDuration:T?.duration||1e3,label:({name:a,percent:b})=>`${a} ${(100*b).toFixed(0)}%`,children:aF.map((a,b)=>(0,d.jsx)(B.f,{fill:aD[b%aD.length]},`cell-${b}`))})]});case"scatter":return(0,d.jsxs)(C.t,{...a,children:[ai&&(0,d.jsx)(m.d,{strokeDasharray:"3 3",opacity:.3}),(0,d.jsx)(n.W,{...b}),(0,d.jsx)(o.h,{...c}),(0,d.jsx)(p.m,{...e}),az.showLegend&&(0,d.jsx)(q.s,{onClick:ar}),aE.filter(a=>a.visible).map((a,b)=>(0,d.jsx)(D.X,{name:a.name,data:aF,fill:a.color,animationDuration:T?.duration||1e3},a.id))]});case"radar":return(0,d.jsxs)(E.V,{...a,cx:"50%",cy:"50%",outerRadius:"80%",children:[(0,d.jsx)(F.z,{}),(0,d.jsx)(G.r,{dataKey:M?.dataKey||"name"}),(0,d.jsx)(H.E,{}),(0,d.jsx)(p.m,{...e}),az.showLegend&&(0,d.jsx)(q.s,{onClick:ar}),aE.filter(a=>a.visible).map((a,b)=>(0,d.jsx)(I.V,{name:a.name,dataKey:a.dataKey,stroke:a.color,fill:a.color,fillOpacity:.3,strokeWidth:2,animationDuration:T?.duration||1e3},a.id))]});case"composed":return(0,d.jsxs)(J.X,{...a,children:[ai&&(0,d.jsx)(m.d,{strokeDasharray:"3 3",opacity:.3}),(0,d.jsx)(n.W,{...b}),(0,d.jsx)(o.h,{...c}),(0,d.jsx)(p.m,{...e}),az.showLegend&&(0,d.jsx)(q.s,{onClick:ar}),aE.filter(a=>a.visible).map((a,b)=>{switch(a.type){case"bar":return(0,d.jsx)(y.y,{dataKey:a.dataKey,fill:a.color,animationDuration:T?.duration||1e3},a.id);case"area":return(0,d.jsx)(w.G,{type:"monotone",dataKey:a.dataKey,stroke:a.color,fill:a.color,fillOpacity:.3,animationDuration:T?.duration||1e3},a.id);default:return(0,d.jsx)(r.N,{type:"monotone",dataKey:a.dataKey,stroke:a.color,strokeWidth:2,animationDuration:T?.duration||1e3},a.id)}}),aj&&(0,d.jsx)(u.v,{dataKey:M?.dataKey||"name",height:30,onChange:as})]});default:return null}};return ao?(0,d.jsxs)(g.Zp,{className:(0,f.cn)("w-full",an),children:[(0,d.jsx)(g.aR,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(i.E,{className:"h-6 w-48"}),(0,d.jsx)(i.E,{className:"h-4 w-32"})]}),(0,d.jsx)(i.E,{className:"h-8 w-32"})]})}),(0,d.jsx)(g.Wu,{children:(0,d.jsx)(i.E,{className:"w-full",style:{height:X}})})]}):ap?(0,d.jsx)(g.Zp,{className:(0,f.cn)("w-full border-destructive",an),children:(0,d.jsx)(g.Wu,{className:"flex items-center justify-center",style:{height:X},children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)(_.A,{className:"h-12 w-12 text-destructive mx-auto"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Erro ao carregar gr\xe1fico"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:ap})]}),au&&(0,d.jsxs)(h.$,{variant:"outline",onClick:au,children:[(0,d.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Tentar novamente"]})]})})}):aF&&0!==aF.length?(0,d.jsxs)(g.Zp,{className:(0,f.cn)("w-full",an),children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[j&&(0,d.jsx)(g.ZB,{children:j}),k&&(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:k})]}),Z&&(0,d.jsx)(ae,{type:ax,config:az,series:aE,showExport:$,showRefresh:ab,showMaximize:ag,showFilters:ah,onTypeChange:aG,onConfigChange:aH,onSeriesToggle:aI,onExport:at,onRefresh:au,onMaximize:av})]}),P&&P.show&&(0,d.jsx)(af,{series:aE,colors:aD,onSeriesToggle:aI,position:P.position,align:P.align})]}),(0,d.jsx)(g.Wu,{children:(0,d.jsx)("div",{style:{width:W,height:X},children:Y?(0,d.jsx)(K.u,{width:"100%",height:"100%",children:aJ()}):aJ()})})]}):(0,d.jsxs)(g.Zp,{className:(0,f.cn)("w-full",an),children:[(0,d.jsxs)(g.aR,{children:[(j||k)&&(0,d.jsxs)("div",{className:"space-y-2",children:[j&&(0,d.jsx)(g.ZB,{children:j}),k&&(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:k})]}),Z&&(0,d.jsx)(ae,{type:ax,config:az,series:aE,showExport:$,showRefresh:ab,showMaximize:ag,showFilters:ah,onTypeChange:aG,onConfigChange:aH,onSeriesToggle:aI,onExport:at,onRefresh:au,onMaximize:av})]}),(0,d.jsx)(g.Wu,{className:"flex items-center justify-center",style:{height:X},children:(0,d.jsxs)("div",{className:"text-center space-y-4",children:[(0,d.jsx)(N.A,{className:"h-12 w-12 text-muted-foreground mx-auto"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-muted-foreground",children:"Nenhum dado dispon\xedvel"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"N\xe3o h\xe1 dados para exibir neste gr\xe1fico"})]})]})})]})}},94180:(a,b,c)=>{c.d(b,{h:()=>m});var d=c(43210),e=c(31074),f=c(51423),g=c(54050),h=c(52581),i=c(59556);class j{async getKPIs(a={}){let b=new URLSearchParams;return Object.entries(a).forEach(([a,c])=>{null!=c&&("dateRange"===a&&"object"==typeof c?(b.append("startDate",c.start.toISOString()),b.append("endDate",c.end.toISOString())):Array.isArray(c)||b.append(a,c.toString()))}),(await i.A.get(`${this.baseUrl}?${b}`)).data}async getKPI(a){return(await i.A.get(`${this.baseUrl}/${a}`)).data}async createKPI(a){return(await i.A.post(this.baseUrl,a)).data}async updateKPI(a,b){return(await i.A.put(`${this.baseUrl}/${a}`,b)).data}async deleteKPI(a){await i.A.delete(`${this.baseUrl}/${a}`)}async duplicateKPI(a,b){return(await i.A.post(`${this.baseUrl}/${a}/duplicate`,{name:b||"Copy of KPI"})).data}async activateKPI(a){return(await i.A.post(`${this.baseUrl}/${a}/activate`)).data}async deactivateKPI(a){return(await i.A.post(`${this.baseUrl}/${a}/deactivate`)).data}async calculateKPI(a){return(await i.A.post(`${this.baseUrl}/${a.kpiId}/calculate`,{dateRange:a.dateRange,granularity:a.granularity,filters:a.filters,groupBy:a.groupBy})).data}async recalculateKPI(a,b){return(await i.A.post(`${this.baseUrl}/${a}/recalculate`,{dateRange:b})).data}async getKPIValue(a,b){let c=b?`?date=${b.toISOString()}`:"";return(await i.A.get(`${this.baseUrl}/${a}/value${c}`)).data}async getKPIHistory(a,b,c="day"){return(await i.A.get(`${this.baseUrl}/${a}/history`,{params:{startDate:b.start.toISOString(),endDate:b.end.toISOString(),granularity:c}})).data}async getKPISnapshot(a){return(await i.A.get(`${this.baseUrl}/${a}/snapshot`)).data}async setTarget(a,b){return(await i.A.post(`${this.baseUrl}/${a}/targets`,b)).data}async updateTarget(a,b,c){return(await i.A.put(`${this.baseUrl}/${a}/targets/${b}`,c)).data}async deleteTarget(a,b){await i.A.delete(`${this.baseUrl}/${a}/targets/${b}`)}async getTargetProgress(a,b){return(await i.A.get(`${this.baseUrl}/${a}/targets/${b}/progress`)).data}async updateThresholds(a,b){return(await i.A.put(`${this.baseUrl}/${a}/thresholds`,b)).data}async createAlert(a,b){return(await i.A.post(`${this.baseUrl}/${a}/alerts`,b)).data}async updateAlert(a,b,c){return(await i.A.put(`${this.baseUrl}/${a}/alerts/${b}`,c)).data}async deleteAlert(a,b){await i.A.delete(`${this.baseUrl}/${a}/alerts/${b}`)}async getActiveAlerts(a){let b=a?`${this.baseUrl}/${a}/alerts/active`:`${this.baseUrl}/alerts/active`;return(await i.A.get(b)).data}async acknowledgeAlert(a,b){return(await i.A.post(`${this.baseUrl}/${a}/alerts/${b}/acknowledge`)).data}async snoozeAlert(a,b,c){return(await i.A.post(`${this.baseUrl}/${a}/alerts/${b}/snooze`,{duration:c})).data}async analyzeKPI(a,b="basic"){return(await i.A.post(`${this.baseUrl}/${a}/analyze`,{analysisDepth:b})).data}async getKPIPerformance(a){return(await i.A.post(`${this.baseUrl}/performance`,a)).data}async getTrendAnalysis(a,b){return(await i.A.post(`${this.baseUrl}/${a}/trend`,{dateRange:b})).data}async getCorrelationAnalysis(a,b){return(await i.A.post(`${this.baseUrl}/correlation`,{kpiIds:a,dateRange:b})).data}async getBenchmark(a){return(await i.A.post(`${this.baseUrl}/${a.kpiId}/benchmark`,{benchmarkType:a.benchmarkType,dateRange:a.dateRange,comparisonPeriod:a.comparisonPeriod})).data}async getIndustryBenchmarks(a){return(await i.A.get(`${this.baseUrl}/benchmarks/industry/${a}`)).data}async getPeerBenchmarks(a){return(await i.A.get(`${this.baseUrl}/${a}/benchmarks/peer`)).data}async getRecommendations(a){return(await i.A.post(`${this.baseUrl}/${a.kpiId}/recommendations`,{analysisDepth:a.analysisDepth,includeActionItems:a.includeActionItems,includeRiskAssessment:a.includeRiskAssessment})).data}async getRiskAssessment(a){return(await i.A.get(`${this.baseUrl}/${a}/risk-assessment`)).data}async getActionItems(a,b){let c=b?`?status=${b}`:"";return(await i.A.get(`${this.baseUrl}/${a}/action-items${c}`)).data}async updateActionItem(a,b,c){return(await i.A.put(`${this.baseUrl}/${a}/action-items/${b}`,c)).data}async getKPIDashboards(){return(await i.A.get(`${this.baseUrl}/dashboards`)).data}async createKPIDashboard(a){return(await i.A.post(`${this.baseUrl}/dashboards`,a)).data}async updateKPIDashboard(a,b){return(await i.A.put(`${this.baseUrl}/dashboards/${a}`,b)).data}async deleteKPIDashboard(a){await i.A.delete(`${this.baseUrl}/dashboards/${a}`)}async getClinicalKPIs(a){let b=a?{startDate:a.start.toISOString(),endDate:a.end.toISOString()}:{};return(await i.A.get(`${this.baseUrl}/clinical`,{params:b})).data}async getFinancialKPIs(a){let b=a?{startDate:a.start.toISOString(),endDate:a.end.toISOString()}:{};return(await i.A.get(`${this.baseUrl}/financial`,{params:b})).data}async getOperationalKPIs(a){let b=a?{startDate:a.start.toISOString(),endDate:a.end.toISOString()}:{};return(await i.A.get(`${this.baseUrl}/operational`,{params:b})).data}async getStaffKPIs(a){let b=a?{startDate:a.start.toISOString(),endDate:a.end.toISOString()}:{};return(await i.A.get(`${this.baseUrl}/staff`,{params:b})).data}async getKPIScorecard(a,b){return(await i.A.post(`${this.baseUrl}/scorecard`,{kpiIds:a,dateRange:b})).data}async getExecutiveSummary(a){return(await i.A.get(`${this.baseUrl}/executive-summary`,{params:{startDate:a.start.toISOString(),endDate:a.end.toISOString()}})).data}async getDepartmentSummary(a,b){return(await i.A.get(`${this.baseUrl}/department-summary/${a}`,{params:{startDate:b.start.toISOString(),endDate:b.end.toISOString()}})).data}async getRealTimeKPIs(a){return(await i.A.post(`${this.baseUrl}/real-time`,{kpiIds:a})).data}async subscribeToKPIUpdates(a,b){return()=>{}}async exportKPIs(a,b="csv"){return(await i.A.post(`${this.baseUrl}/export`,{kpiIds:a,format:b},{responseType:"blob"})).data}async exportKPIReport(a,b,c="pdf"){return(await i.A.post(`${this.baseUrl}/${a}/export-report`,{dateRange:b,format:c},{responseType:"blob"})).data}async importKPIs(a){let b=new FormData;return b.append("file",a),(await i.A.post(`${this.baseUrl}/import`,b,{headers:{"Content-Type":"multipart/form-data"}})).data}getKPIStatus(a,b){let{thresholds:c}=a;return b>=c.excellent?"excellent":b>=c.good?"good":b>=c.warning?"warning":"critical"}getKPIColor(a){let b={excellent:"#10B981",good:"#3B82F6",warning:"#F59E0B",critical:"#EF4444",inactive:"#6B7280"};return b[a]||b.inactive}formatKPIValue(a,b,c=2){let d=a.toFixed(c);switch(b){case"percentage":return`${d}%`;case"currency":return`R$ ${d}`;case"count":return Math.round(a).toString();case"time":return`${d}h`;case"rate":return`${d}/min`;case"ratio":return`${d}:1`;default:return`${d} ${b}`}}calculateKPIScore(a,b){let c=0,d=0;return a.forEach(a=>{let e=b[a.id];if(void 0!==e){let b=a.weight||1,f=this.getKPIStatus(a,e),g=this.getStatusScore(f);c+=b,d+=g*b}}),c>0?d/c:0}getStatusScore(a){return({excellent:100,good:80,warning:60,critical:40,inactive:0})[a]||0}getTrendDirection(a,b){let c=(a-b)/b*100;return 1>Math.abs(c)?"stable":c>0?"up":"down"}getRiskLevel(a,b){switch(this.getKPIStatus(a,b)){case"critical":return"high";case"warning":default:return"medium";case"good":case"excellent":return"low"}}generateKPIId(){return`kpi_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}validateKPIConfig(a){let b=[];if(a.name&&0!==a.name.trim().length||b.push("Nome do KPI \xe9 obrigat\xf3rio"),a.category||b.push("Categoria do KPI \xe9 obrigat\xf3ria"),a.type||b.push("Tipo do KPI \xe9 obrigat\xf3rio"),a.unit&&0!==a.unit.trim().length||b.push("Unidade do KPI \xe9 obrigat\xf3ria"),a.dataSource&&0!==a.dataSource.trim().length||b.push("Fonte de dados \xe9 obrigat\xf3ria"),a.thresholds){let{excellent:c,good:d,warning:e,critical:f}=a.thresholds;(c<=d||d<=e||e<=f)&&b.push("Thresholds devem estar em ordem decrescente: excellent > good > warning > critical")}else b.push("Thresholds s\xe3o obrigat\xf3rios");return a.refreshInterval&&a.refreshInterval<60&&b.push("Intervalo de atualiza\xe7\xe3o deve ser pelo menos 60 segundos"),{isValid:0===b.length,errors:b}}constructor(){this.baseUrl="/api/bi/kpis"}}let k=new j,l={kpis:(a,b,c)=>["bi","kpis",{category:a,type:b,includeInactive:c}],kpi:a=>["bi","kpi",a],performance:(a,b)=>["bi","kpi-performance",a,b],analysis:a=>["bi","kpi-analysis",a],trends:(a,b)=>["bi","kpi-trends",a,b],benchmarks:(a,b)=>["bi","kpi-benchmarks",a,b],recommendations:a=>["bi","kpi-recommendations",a],riskAssessment:a=>["bi","kpi-risk-assessment",a],history:(a,b)=>["bi","kpi-history",a,b],targets:a=>["bi","kpi-targets",a],alerts:a=>["bi","kpi-alerts",a],dashboards:["bi","kpi-dashboards"],scorecards:["bi","kpi-scorecards"],executiveSummary:a=>["bi","executive-summary",a],clinicalKPIs:["bi","clinical-kpis"],financialKPIs:["bi","financial-kpis"],operationalKPIs:["bi","operational-kpis"],staffKPIs:["bi","staff-kpis"]};function m(a={}){let{category:b,type:c,autoRefresh:i=!1,refreshInterval:j=3e4,enableAlerts:n=!0,enableRealtime:o=!1,includeInactive:p=!1}=a,q=(0,e.jE)(),[r,s]=(0,d.useState)(null),[t,u]=(0,d.useState)({}),[v,w]=(0,d.useState)(new Map),{data:x=[],isLoading:y,error:z,refetch:A}=(0,f.I)({queryKey:l.kpis(b,c,p),queryFn:()=>k.getKPIs({category:b,type:c,includeInactive:p,filters:t}),refetchInterval:!!i&&j,staleTime:3e5*!i}),{data:B=[],isLoading:C}=(0,f.I)({queryKey:l.performance(r?.id||"","30d"),queryFn:()=>k.analyzePerformance(r.id,"30d"),enabled:!!r,refetchInterval:!!i&&j}),{data:D,isLoading:E}=(0,f.I)({queryKey:l.analysis(r?.id||""),queryFn:()=>k.analyzeKPI(r.id),enabled:!!r,staleTime:6e5}),{data:F,isLoading:G}=(0,f.I)({queryKey:l.trends(r?.id||"","30d"),queryFn:()=>k.analyzeTrends(r.id,"30d"),enabled:!!r,staleTime:6e5}),{data:H=[],isLoading:I}=(0,f.I)({queryKey:l.benchmarks(r?.id||""),queryFn:()=>k.getBenchmarks(r.id),enabled:!!r,staleTime:18e5}),{data:J=[],isLoading:K}=(0,f.I)({queryKey:l.recommendations(r?.id||""),queryFn:()=>k.getRecommendations(r.id),enabled:!!r,staleTime:9e5}),{data:L,isLoading:M}=(0,f.I)({queryKey:l.riskAssessment(r?.id||""),queryFn:()=>k.assessRisk(r.id),enabled:!!r,staleTime:12e5}),{data:N=[],isLoading:O}=(0,f.I)({queryKey:l.history(r?.id||"","30d"),queryFn:()=>k.getKPIHistory(r.id,"30d"),enabled:!!r,refetchInterval:!!i&&j}),{data:P=[],isLoading:Q}=(0,f.I)({queryKey:l.targets(r?.id||""),queryFn:()=>k.getKPITargets(r.id),enabled:!!r}),{data:R=[],isLoading:S}=(0,f.I)({queryKey:l.alerts(r?.id),queryFn:()=>k.getKPIAlerts(r?.id),enabled:n,refetchInterval:6e4}),{data:T=[],isLoading:U}=(0,f.I)({queryKey:l.dashboards,queryFn:()=>k.getKPIDashboards(),staleTime:6e5}),{data:V=[],isLoading:W}=(0,f.I)({queryKey:l.scorecards,queryFn:()=>k.getScorecards(),staleTime:9e5}),{data:X,isLoading:Y}=(0,f.I)({queryKey:l.executiveSummary("current"),queryFn:()=>k.getExecutiveSummary("current"),staleTime:18e5}),{data:Z,isLoading:$}=(0,f.I)({queryKey:l.clinicalKPIs,queryFn:()=>k.getClinicalKPIs(),enabled:"clinical"===b||!b,refetchInterval:!!i&&j}),{data:_,isLoading:aa}=(0,f.I)({queryKey:l.financialKPIs,queryFn:()=>k.getFinancialKPIs(),enabled:"financial"===b||!b,refetchInterval:!!i&&j}),{data:ab,isLoading:ac}=(0,f.I)({queryKey:l.operationalKPIs,queryFn:()=>k.getOperationalKPIs(),enabled:"operational"===b||!b,refetchInterval:!!i&&j}),{data:ad,isLoading:ae}=(0,f.I)({queryKey:l.staffKPIs,queryFn:()=>k.getStaffKPIs(),enabled:"staff"===b||!b,refetchInterval:!!i&&j}),af=y||C||E||G||I||K||M||O||Q||S||U||W||Y||$||aa||ac||ae,ag=(0,d.useMemo)(()=>{let a=[...new Set(x.map(a=>a.category))],b=[...new Set(x.map(a=>a.type))],c=[...new Set(x.map(a=>a.status))];return[{id:"category",name:"Categoria",type:"select",options:a.map(a=>({label:a,value:a}))},{id:"type",name:"Tipo",type:"select",options:b.map(a=>({label:a,value:a}))},{id:"status",name:"Status",type:"select",options:c.map(a=>({label:a,value:a}))},{id:"dateRange",name:"Per\xedodo",type:"dateRange"}]},[x]),ah=(0,d.useMemo)(()=>R.filter(a=>a.isActive&&!a.isAcknowledged),[R]),ai=(0,g.n)({mutationFn:k.createKPI,onSuccess:()=>{q.invalidateQueries({queryKey:l.kpis(b,c,p)}),h.o.success("KPI criado com sucesso!")},onError:a=>{h.o.error("Erro ao criar KPI: "+a.message)}}),aj=(0,g.n)({mutationFn:({id:a,data:b})=>k.updateKPI(a,b),onSuccess:()=>{q.invalidateQueries({queryKey:l.kpis(b,c,p)}),r&&q.invalidateQueries({queryKey:l.kpi(r.id)}),h.o.success("KPI atualizado com sucesso!")},onError:a=>{h.o.error("Erro ao atualizar KPI: "+a.message)}}),ak=(0,g.n)({mutationFn:k.deleteKPI,onSuccess:()=>{q.invalidateQueries({queryKey:l.kpis(b,c,p)}),s(null),h.o.success("KPI exclu\xeddo com sucesso!")},onError:a=>{h.o.error("Erro ao excluir KPI: "+a.message)}}),al=(0,d.useCallback)(async a=>ai.mutateAsync(a),[ai]),am=(0,d.useCallback)(async(a,b)=>aj.mutateAsync({id:a,data:b}),[aj]),an=(0,d.useCallback)(async a=>{await ak.mutateAsync(a)},[ak]),ao=(0,d.useCallback)(async(a,b)=>{try{let c=await k.calculateKPI(a,b);return q.invalidateQueries({queryKey:l.kpi(a)}),c}catch(a){throw h.o.error("Erro ao calcular KPI: "+a.message),a}},[q]),ap=(0,d.useCallback)(async(a,b)=>{try{let c=await k.calculateBulkKPIs(a,b);return a.forEach(a=>{q.invalidateQueries({queryKey:l.kpi(a)})}),c}catch(a){throw h.o.error("Erro ao calcular KPIs: "+a.message),a}},[q]),aq=(0,d.useCallback)(a=>{s(a)},[]),ar=(0,d.useCallback)(async(a,b="30d")=>{try{let c=await k.analyzePerformance(a,b);return q.setQueryData(l.performance(a,b),c),c}catch(a){throw h.o.error("Erro ao analisar performance: "+a.message),a}},[q]),as=(0,d.useCallback)(async a=>{try{return await k.getPerformanceScore(a)}catch(a){throw h.o.error("Erro ao obter score de performance: "+a.message),a}},[]),at=(0,d.useCallback)(async(a,b)=>{try{return await k.comparePerformance(a,b)}catch(a){throw h.o.error("Erro ao comparar performance: "+a.message),a}},[]),au=(0,d.useCallback)(async(a,b)=>{try{let c=await k.analyzeKPI(a,b);return q.setQueryData(l.analysis(a),c),c}catch(a){throw h.o.error("Erro ao analisar KPI: "+a.message),a}},[q]),av=(0,d.useCallback)(async(a,b="30d")=>{try{let c=await k.analyzeTrends(a,b);return q.setQueryData(l.trends(a,b),c),c}catch(a){throw h.o.error("Erro ao analisar tend\xeancias: "+a.message),a}},[q]),aw=(0,d.useCallback)(async a=>{try{return await k.generateInsights(a)}catch(a){throw h.o.error("Erro ao gerar insights: "+a.message),a}},[]),ax=(0,d.useCallback)(async(a,b)=>{try{let c=await k.getBenchmarks(a,b);return q.setQueryData(l.benchmarks(a,b),c),c}catch(a){throw h.o.error("Erro ao obter benchmarks: "+a.message),a}},[q]),ay=(0,d.useCallback)(async(a,b)=>{try{return await k.compareToBenchmark(a,b)}catch(a){throw h.o.error("Erro ao comparar com benchmark: "+a.message),a}},[]),az=(0,d.useCallback)(async a=>{try{let b=await k.getRecommendations(a);return q.setQueryData(l.recommendations(a),b),b}catch(a){throw h.o.error("Erro ao obter recomenda\xe7\xf5es: "+a.message),a}},[q]),aA=(0,d.useCallback)(async a=>{try{await k.implementRecommendation(a),q.invalidateQueries({queryKey:l.recommendations(r?.id||"")}),h.o.success("Recomenda\xe7\xe3o implementada com sucesso!")}catch(a){h.o.error("Erro ao implementar recomenda\xe7\xe3o: "+a.message)}},[q,r]),aB=(0,d.useCallback)(async a=>{try{await k.dismissRecommendation(a),q.invalidateQueries({queryKey:l.recommendations(r?.id||"")}),h.o.success("Recomenda\xe7\xe3o dispensada!")}catch(a){h.o.error("Erro ao dispensar recomenda\xe7\xe3o: "+a.message)}},[q,r]),aC=(0,d.useCallback)(async a=>{try{let b=await k.assessRisk(a);return q.setQueryData(l.riskAssessment(a),b),b}catch(a){throw h.o.error("Erro ao avaliar risco: "+a.message),a}},[q]),aD=(0,d.useCallback)(async(a,b)=>{try{await k.updateRiskMitigation(a,b),q.invalidateQueries({queryKey:l.riskAssessment(a)}),h.o.success("Estrat\xe9gias de mitiga\xe7\xe3o atualizadas!")}catch(a){h.o.error("Erro ao atualizar mitiga\xe7\xe3o: "+a.message)}},[q]),aE=(0,d.useCallback)(async(a,b)=>{try{let c=await k.setKPITarget(a,b);return q.invalidateQueries({queryKey:l.targets(a)}),h.o.success("Meta definida com sucesso!"),c}catch(a){throw h.o.error("Erro ao definir meta: "+a.message),a}},[q]),aF=(0,d.useCallback)(async(a,b)=>{try{let c=await k.updateKPITarget(a,b);return q.invalidateQueries({queryKey:l.targets(r?.id||"")}),h.o.success("Meta atualizada com sucesso!"),c}catch(a){throw h.o.error("Erro ao atualizar meta: "+a.message),a}},[q,r]),aG=(0,d.useCallback)(async a=>{try{await k.deleteKPITarget(a),q.invalidateQueries({queryKey:l.targets(r?.id||"")}),h.o.success("Meta exclu\xedda com sucesso!")}catch(a){h.o.error("Erro ao excluir meta: "+a.message)}},[q,r]),aH=(0,d.useCallback)(async(a,b)=>{try{let c=await k.createKPIAlert(a,b);return q.invalidateQueries({queryKey:l.alerts(a)}),h.o.success("Alerta criado com sucesso!"),c}catch(a){throw h.o.error("Erro ao criar alerta: "+a.message),a}},[q]),aI=(0,d.useCallback)(async(a,b)=>{try{let c=await k.updateKPIAlert(a,b);return q.invalidateQueries({queryKey:l.alerts()}),h.o.success("Alerta atualizado com sucesso!"),c}catch(a){throw h.o.error("Erro ao atualizar alerta: "+a.message),a}},[q]),aJ=(0,d.useCallback)(async a=>{try{await k.deleteKPIAlert(a),q.invalidateQueries({queryKey:l.alerts()}),h.o.success("Alerta exclu\xeddo com sucesso!")}catch(a){h.o.error("Erro ao excluir alerta: "+a.message)}},[q]),aK=(0,d.useCallback)(async a=>{try{await k.acknowledgeAlert(a),q.invalidateQueries({queryKey:l.alerts()}),h.o.success("Alerta reconhecido!")}catch(a){h.o.error("Erro ao reconhecer alerta: "+a.message)}},[q]),aL=(0,d.useCallback)(async a=>{try{let b=await k.createKPIDashboard(a);return q.invalidateQueries({queryKey:l.dashboards}),h.o.success("Dashboard criado com sucesso!"),b}catch(a){throw h.o.error("Erro ao criar dashboard: "+a.message),a}},[q]),aM=(0,d.useCallback)(async(a,b)=>{try{let c=await k.updateKPIDashboard(a,b);return q.invalidateQueries({queryKey:l.dashboards}),h.o.success("Dashboard atualizado com sucesso!"),c}catch(a){throw h.o.error("Erro ao atualizar dashboard: "+a.message),a}},[q]),aN=(0,d.useCallback)(async a=>{try{await k.deleteKPIDashboard(a),q.invalidateQueries({queryKey:l.dashboards}),h.o.success("Dashboard exclu\xeddo com sucesso!")}catch(a){h.o.error("Erro ao excluir dashboard: "+a.message)}},[q]),aO=(0,d.useCallback)(async a=>{try{let b=await k.createScorecard(a);return q.invalidateQueries({queryKey:l.scorecards}),h.o.success("Scorecard criado com sucesso!"),b}catch(a){throw h.o.error("Erro ao criar scorecard: "+a.message),a}},[q]),aP=(0,d.useCallback)(async(a,b)=>{try{let c=await k.updateScorecard(a,b);return q.invalidateQueries({queryKey:l.scorecards}),h.o.success("Scorecard atualizado com sucesso!"),c}catch(a){throw h.o.error("Erro ao atualizar scorecard: "+a.message),a}},[q]),aQ=(0,d.useCallback)(async(a="current")=>{try{let b=await k.getExecutiveSummary(a);return q.setQueryData(l.executiveSummary(a),b),b}catch(a){throw h.o.error("Erro ao obter resumo executivo: "+a.message),a}},[q]),aR=(0,d.useCallback)((a,b)=>{u(c=>({...c,[a]:b})),A()},[A]),aS=(0,d.useCallback)(a=>{u(b=>{let c={...b};return delete c[a],c}),A()},[A]),aT=(0,d.useCallback)(()=>{u({}),A()},[A]),aU=(0,d.useCallback)(async()=>{try{await A(),r&&(q.invalidateQueries({queryKey:l.performance(r.id)}),q.invalidateQueries({queryKey:l.analysis(r.id)})),h.o.success("Dados atualizados com sucesso!")}catch(a){h.o.error("Erro ao atualizar dados: "+a.message)}},[A,r,q]),aV=(0,d.useCallback)(async(a,b)=>{try{let c=b||x.map(a=>a.id),d=await k.exportKPIs(c,a),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`kpis-export.${a}`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(e),h.o.success("KPIs exportados com sucesso!")}catch(a){h.o.error("Erro ao exportar KPIs: "+a.message)}},[x]),aW=(0,d.useCallback)(async a=>{try{await k.importKPIs(a),q.invalidateQueries({queryKey:l.kpis(b,c,p)}),h.o.success("KPIs importados com sucesso!")}catch(a){h.o.error("Erro ao importar KPIs: "+a.message)}},[q,b,c,p]),aX=(0,d.useCallback)(async a=>{try{return await k.getRealTimeKPIs(a)}catch(a){throw h.o.error("Erro ao obter KPIs em tempo real: "+a.message),a}},[]),aY=(0,d.useCallback)((a,b)=>{if(!o)return()=>{};let c=k.subscribeToKPIUpdates(a,b);return w(b=>{let d=new Map(b);return d.set(a,c),d}),()=>{c(),w(b=>{let c=new Map(b);return c.delete(a),c})}},[o]),aZ=(0,d.useCallback)(a=>{let b=x.find(b=>b.id===a);return b?.currentValue||null},[x]),a$=(0,d.useCallback)(a=>{let b=x.find(b=>b.id===a);return b?k.getKPIStatus(b):"unknown"},[x]),a_=(0,d.useCallback)(a=>{let b=x.find(b=>b.id===a);return b?k.getTrendDirection(b):"stable"},[x]),a0=(0,d.useCallback)(a=>{let b=x.find(b=>b.id===a);return b?k.getKPIColor(b):"#gray"},[x]),a1=(0,d.useCallback)((a,b)=>k.formatValue(a,b.unit,b.precision),[]),a2=(0,d.useCallback)(a=>{let b=x.find(b=>b.id===a);return b?k.calculateScore(b):0},[x]);return{kpis:x,selectedKPI:r,isLoading:af,isError:!!z,error:z,performance:B,analysis:D||null,trends:F||null,benchmarks:H,recommendations:J,riskAssessment:L||null,history:N,targets:P,alerts:R,activeAlerts:ah,dashboards:T,scorecards:V,executiveSummary:X,filters:ag,activeFilters:t,clinicalKPIs:Z||null,financialKPIs:_||null,operationalKPIs:ab||null,staffKPIs:ad||null,createKPI:al,updateKPI:am,deleteKPI:an,calculateKPI:ao,calculateBulkKPIs:ap,selectKPI:aq,analyzePerformance:ar,getPerformanceScore:as,comparePerformance:at,analyzeKPI:au,analyzeTrends:av,generateInsights:aw,getBenchmarks:ax,compareToBenchmark:ay,getRecommendations:az,implementRecommendation:aA,dismissRecommendation:aB,assessRisk:aC,updateRiskMitigation:aD,setTarget:aE,updateTarget:aF,deleteTarget:aG,createAlert:aH,updateAlert:aI,deleteAlert:aJ,acknowledgeAlert:aK,createDashboard:aL,updateDashboard:aM,deleteDashboard:aN,createScorecard:aO,updateScorecard:aP,getExecutiveSummary:aQ,applyFilter:aR,removeFilter:aS,clearFilters:aT,refreshData:aU,exportKPIs:aV,importKPIs:aW,getRealTimeKPIs:aX,subscribeToKPI:aY,getKPIValue:aZ,getKPIStatus:a$,getKPITrend:a_,getKPIColor:a0,formatKPIValue:a1,calculateScore:a2}}}};