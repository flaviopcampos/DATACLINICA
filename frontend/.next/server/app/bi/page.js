(()=>{var a={};a.id=7538,a.ids=[7538],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4273:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(61369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\flavi\\\\Documents\\\\Softwares\\\\DATACLINICA\\\\frontend\\\\app\\\\bi\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\flavi\\Documents\\Softwares\\DATACLINICA\\frontend\\app\\bi\\page.tsx","default")},4339:(a,b,c)=>{Promise.resolve().then(c.bind(c,12254))},8086:a=>{"use strict";a.exports=require("module")},8819:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11860:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},11997:a=>{"use strict";a.exports=require("punycode")},12254:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>a8});var d=c(60687),e=c(43210),f=c(96241),g=c(55192),h=c(24934),i=c(59821),j=c(85910),k=c(63974),l=c(39390),m=c(78377),n=c(96474),o=c(31158),p=c(78122),q=c(13861),r=c(84027),s=c(41312),t=c(23928),u=c(5263),v=c(67760),w=c(43649),x=c(6943),y=c(25366),z=c(53411),A=c(28947),B=c(20835),C=c(99891),D=c(52581),E=function(a){return a.COUNTER="counter",a.GAUGE="gauge",a.HISTOGRAM="histogram",a.RATE="rate",a.RATIO="ratio",a.PERCENTAGE="percentage",a.CURRENCY="currency",a.DURATION="duration",a.COUNT="count",a}({}),F=function(a){return a.NUMBER="number",a.COUNT="count",a.PERCENTAGE="percentage",a.RATIO="ratio",a.BRL="BRL",a.USD="USD",a.EUR="EUR",a.SECONDS="seconds",a.MINUTES="minutes",a.HOURS="hours",a.DAYS="days",a.WEEKS="weeks",a.MONTHS="months",a.PER_SECOND="per_second",a.PER_MINUTE="per_minute",a.PER_HOUR="per_hour",a.PER_DAY="per_day",a.BYTES="bytes",a.KILOBYTES="kilobytes",a.MEGABYTES="megabytes",a.GIGABYTES="gigabytes",a}({}),G=c(59759),H=c(75714),I=c(96882),J=c(93613),K=c(45583),L=c(48730),M=c(5336),N=c(93661),O=c(11860),P=c(97051),Q=c(80462),R=c(55629),S=c(93437),T=c(69327),U=c(67353);class V{async getAppointmentMetrics(a){try{return(await U.A.get(`${this.baseUrl}/metrics`,{params:a})).data}catch(a){return this.getMockMetrics()}}async getAppointmentTrends(a="daily",b){try{return(await U.A.get(`${this.baseUrl}/trends`,{params:{period:a,...b}})).data}catch(a){return this.getMockTrends()}}async getDoctorPerformance(a){try{return(await U.A.get(`${this.baseUrl}/doctor-performance`,{params:a})).data}catch(a){return this.getMockDoctorPerformance()}}async getAppointmentAnalytics(a){try{return(await U.A.get(`${this.baseUrl}/analytics`,{params:a})).data}catch(a){return this.getMockAnalytics()}}async getAppointmentKPIs(a){try{let b=await this.getAppointmentMetrics(a);return[{id:"total-appointments",title:"Total de Agendamentos",value:b.totalAppointments,target:1e3,unit:"agendamentos",trend:"up",change:12.5,period:"mensal",status:"good"},{id:"occupancy-rate",title:"Taxa de Ocupa\xe7\xe3o",value:b.occupancyRate,target:85,unit:"%",trend:"up",change:5.2,period:"mensal",status:b.occupancyRate>=80?"good":b.occupancyRate>=60?"warning":"critical"},{id:"completion-rate",title:"Taxa de Conclus\xe3o",value:b.completedAppointments/b.totalAppointments*100,target:90,unit:"%",trend:"stable",change:.8,period:"mensal",status:"good"},{id:"no-show-rate",title:"Taxa de Faltas",value:b.noShowAppointments/b.totalAppointments*100,target:5,unit:"%",trend:"down",change:-2.1,period:"mensal",status:"good"}]}catch(a){return this.getMockKPIs()}}async getAppointmentChartData(a,b){try{return(await U.A.get(`${this.baseUrl}/charts/${a}`,{params:b})).data}catch(b){return this.getMockChartData(a)}}getMockMetrics(){return{totalAppointments:1247,completedAppointments:1089,cancelledAppointments:98,noShowAppointments:60,averageDuration:45,occupancyRate:78.5,patientSatisfaction:4.6,revenuePerAppointment:150.75}}getMockTrends(){return{daily:(()=>{let a=[];for(let b=30;b>=0;b--){let c=new Date;c.setDate(c.getDate()-b),a.push({date:c.toISOString().split("T")[0],value:Math.floor(50*Math.random())+20,label:c.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})}return a})(),weekly:[{date:"2024-01-01",value:245,label:"Sem 1"},{date:"2024-01-08",value:289,label:"Sem 2"},{date:"2024-01-15",value:312,label:"Sem 3"},{date:"2024-01-22",value:298,label:"Sem 4"}],monthly:[{date:"2024-01",value:1247,label:"Jan"},{date:"2024-02",value:1189,label:"Fev"},{date:"2024-03",value:1356,label:"Mar"}],hourly:[{hour:8,count:45},{hour:9,count:67},{hour:10,count:89},{hour:11,count:78},{hour:14,count:92},{hour:15,count:85},{hour:16,count:73},{hour:17,count:56}]}}getMockDoctorPerformance(){return[{doctorId:1,doctorName:"Dr. Jo\xe3o Silva",totalAppointments:234,completedRate:92.3,cancelledRate:5.1,noShowRate:2.6,averageRating:4.8,revenue:35250},{doctorId:2,doctorName:"Dra. Maria Santos",totalAppointments:198,completedRate:89.4,cancelledRate:7.1,noShowRate:3.5,averageRating:4.6,revenue:29700},{doctorId:3,doctorName:"Dr. Carlos Oliveira",totalAppointments:156,completedRate:94.2,cancelledRate:3.8,noShowRate:2,averageRating:4.9,revenue:23400}]}getMockAnalytics(){return{metrics:this.getMockMetrics(),trends:this.getMockTrends(),doctorPerformance:this.getMockDoctorPerformance(),busyHours:[{hour:9,count:67},{hour:10,count:89},{hour:14,count:92},{hour:15,count:85}],busyDays:[{day:"Segunda",count:245},{day:"Ter\xe7a",count:289},{day:"Quarta",count:267},{day:"Quinta",count:298},{day:"Sexta",count:234}],statusDistribution:[{status:"Conclu\xeddo",count:1089,percentage:87.3},{status:"Cancelado",count:98,percentage:7.9},{status:"Faltou",count:60,percentage:4.8}],typeDistribution:[{type:"Consulta",count:789,percentage:63.3},{type:"Retorno",count:298,percentage:23.9},{type:"Exame",count:160,percentage:12.8}]}}getMockKPIs(){return[{id:"total-appointments",title:"Total de Agendamentos",value:1247,target:1e3,unit:"agendamentos",trend:"up",change:12.5,period:"mensal",status:"good"},{id:"occupancy-rate",title:"Taxa de Ocupa\xe7\xe3o",value:78.5,target:85,unit:"%",trend:"up",change:5.2,period:"mensal",status:"warning"}]}getMockChartData(a){switch(a){case"status":return{type:"pie",data:[{name:"Conclu\xeddo",value:1089,color:"#10b981"},{name:"Cancelado",value:98,color:"#f59e0b"},{name:"Faltou",value:60,color:"#ef4444"}],title:"Distribui\xe7\xe3o por Status"};case"trends":return{type:"line",data:this.getMockTrends().daily.map(a=>({name:a.label,value:a.value})),title:"Tend\xeancia de Agendamentos"};case"doctors":return{type:"bar",data:this.getMockDoctorPerformance().map(a=>({name:a.doctorName,value:a.totalAppointments})),title:"Agendamentos por M\xe9dico"};case"hours":return{type:"bar",data:this.getMockTrends().hourly.map(a=>({name:`${a.hour}h`,value:a.count})),title:"Agendamentos por Hor\xe1rio"};default:return{type:"line",data:[],title:"Dados n\xe3o encontrados"}}}constructor(){this.baseUrl="/api/bi/appointments"}}let W=new V,X={async getMetrics(a){try{return(await U.A.get("/billing/bi/metrics",{params:{period:a}})).data}catch(a){return{totalRevenue:125e3,monthlyRevenue:45e3,pendingAmount:18500,overdueAmount:7200,totalInvoices:342,paidInvoices:298,overdueInvoices:23,averageInvoiceValue:365.5,paymentRate:87.1,overdueRate:6.7,collectionEfficiency:92.3,daysToPayment:12.5}}},async getTrends(a){try{return(await U.A.get("/billing/bi/trends",{params:{period:a}})).data}catch(a){return{revenueByMonth:[{month:"2024-01",revenue:38e3,invoices:95,payments:88},{month:"2024-02",revenue:42e3,invoices:108,payments:102},{month:"2024-03",revenue:45e3,invoices:123,payments:115}],paymentMethodDistribution:[{method:"CREDIT_CARD",amount:65e3,count:180,percentage:52},{method:"CASH",amount:35e3,count:95,percentage:28},{method:"BANK_TRANSFER",amount:25e3,count:67,percentage:20}],statusDistribution:[{status:InvoiceStatus.PAID,count:298,amount:108800,percentage:87.1},{status:InvoiceStatus.PENDING,count:21,amount:7700,percentage:6.1},{status:InvoiceStatus.OVERDUE,count:23,amount:8500,percentage:6.7}]}}},async getPaymentAnalytics(a){try{return(await U.A.get("/billing/bi/payments",{params:{period:a}})).data}catch(a){return{averagePaymentTime:12.5,paymentSuccessRate:94.2,refundRate:2.1,partialPaymentRate:8.3,paymentsByDay:[{day:"2024-03-01",amount:1500,count:4},{day:"2024-03-02",amount:2200,count:6},{day:"2024-03-03",amount:1800,count:5}],topPaymentMethods:[{method:"CREDIT_CARD",usage:52,amount:65e3},{method:"CASH",usage:28,amount:35e3},{method:"BANK_TRANSFER",usage:20,amount:25e3}]}}},async getOverdueAnalytics(a){try{return(await U.A.get("/billing/bi/overdue",{params:{period:a}})).data}catch(a){return{totalOverdueAmount:7200,overdueInvoicesCount:23,averageOverdueDays:18.5,overdueByAgeGroup:[{ageGroup:"1-30 dias",count:12,amount:3200},{ageGroup:"31-60 dias",count:7,amount:2500},{ageGroup:"60+ dias",count:4,amount:1500}],overdueByPatient:[{patientId:"1",patientName:"Jo\xe3o Silva",overdueAmount:850,overdueCount:2,oldestOverdueDays:45},{patientId:"2",patientName:"Maria Santos",overdueAmount:620,overdueCount:1,oldestOverdueDays:32}]}}},async getAnalytics(a){try{let[b,c,d,e]=await Promise.all([this.getMetrics(a),this.getTrends(a),this.getPaymentAnalytics(a),this.getOverdueAnalytics(a)]);return{metrics:b,trends:c,payments:d,overdue:e,forecast:{nextMonthRevenue:1.08*b.monthlyRevenue,expectedCollections:.85*b.pendingAmount,riskAmount:.3*b.overdueAmount}}}catch(a){throw a}},async getKPIs(a){let b=await this.getMetrics(a);return{revenue:{current:b.totalRevenue,target:15e4,trend:8.5},collectionRate:{current:b.paymentRate,target:90,trend:2.1},overdueRate:{current:b.overdueRate,target:5,trend:-1.2},averagePaymentTime:{current:b.daysToPayment,target:10,trend:-.8}}},async getChartData(a,b){switch(a){case"revenue-trend":return(await this.getTrends(b)).revenueByMonth.map(a=>({name:a.month,value:a.revenue,invoices:a.invoices}));case"payment-methods":return(await this.getTrends(b)).paymentMethodDistribution.map(a=>({name:a.method,value:a.amount,percentage:a.percentage}));case"invoice-status":return(await this.getTrends(b)).statusDistribution.map(a=>({name:a.status,value:a.count,amount:a.amount}));default:return[]}}};class Y{async getBedMetrics(a){return{totalBeds:120,occupiedBeds:95,availableBeds:18,maintenanceBeds:4,blockedBeds:2,cleaningBeds:1,occupancyRate:79.2,averageStayDuration:4.5,turnoverRate:2.1,revenuePerBed:850}}async getBedOccupancyTrends(a){let b=[],c=new Date;for(let a=29;a>=0;a--){let d=new Date(c);d.setDate(d.getDate()-a),b.push({date:d.toISOString().split("T")[0],totalBeds:120,occupiedBeds:Math.floor(30*Math.random())+70,availableBeds:Math.floor(20*Math.random())+15,occupancyRate:20*Math.random()+70,admissions:Math.floor(15*Math.random())+5,discharges:Math.floor(12*Math.random())+3,transfers:Math.floor(5*Math.random())+1})}return b}async getDepartmentBedAnalytics(a){return[{departmentId:"1",departmentName:"UTI",totalBeds:20,occupiedBeds:18,occupancyRate:90,averageStayDuration:7.2,revenue:45e3,patientSatisfaction:4.5},{departmentId:"2",departmentName:"Cl\xednica M\xe9dica",totalBeds:40,occupiedBeds:32,occupancyRate:80,averageStayDuration:3.8,revenue:28e3,patientSatisfaction:4.2},{departmentId:"3",departmentName:"Cirurgia",totalBeds:30,occupiedBeds:25,occupancyRate:83.3,averageStayDuration:2.5,revenue:35e3,patientSatisfaction:4.7},{departmentId:"4",departmentName:"Pediatria",totalBeds:25,occupiedBeds:18,occupancyRate:72,averageStayDuration:4.1,revenue:18e3,patientSatisfaction:4.8},{departmentId:"5",departmentName:"Maternidade",totalBeds:15,occupiedBeds:12,occupancyRate:80,averageStayDuration:2.8,revenue:15e3,patientSatisfaction:4.6}]}async getBedTypeAnalytics(a){return[{bedType:"STANDARD",totalBeds:70,occupiedBeds:55,occupancyRate:78.6,averageStayDuration:3.2,revenue:85e3,demandRate:85},{bedType:"ICU",totalBeds:25,occupiedBeds:22,occupancyRate:88,averageStayDuration:8.5,revenue:12e4,demandRate:95},{bedType:"SEMI_ICU",totalBeds:15,occupiedBeds:12,occupancyRate:80,averageStayDuration:5.8,revenue:45e3,demandRate:78},{bedType:"ISOLATION",totalBeds:10,occupiedBeds:6,occupancyRate:60,averageStayDuration:6.2,revenue:25e3,demandRate:65}]}async getBedAnalytics(a){let[b,c,d,e]=await Promise.all([this.getBedMetrics(a),this.getBedOccupancyTrends(a),this.getDepartmentBedAnalytics(a),this.getBedTypeAnalytics(a)]);return{metrics:b,trends:c,departmentAnalytics:d,bedTypeAnalytics:e,alerts:{highOccupancy:b.occupancyRate>85,maintenanceNeeded:b.maintenanceBeds>5,lowTurnover:b.turnoverRate<1.5,revenueDecline:b.revenuePerBed<800}}}async getBedKPIs(a){let b=await this.getBedMetrics(a);return{occupancyRate:{value:b.occupancyRate,target:80,trend:"up",format:"percentage"},averageStay:{value:b.averageStayDuration,target:4,trend:"stable",format:"decimal"},turnoverRate:{value:b.turnoverRate,target:2,trend:"up",format:"decimal"},revenuePerBed:{value:b.revenuePerBed,target:900,trend:"down",format:"currency"}}}async getBedChartData(a,b){switch(a){case"occupancy-trends":return this.getBedOccupancyTrends(b);case"department-comparison":return this.getDepartmentBedAnalytics(b);case"bed-type-analysis":return this.getBedTypeAnalytics(b);default:return[]}}constructor(){this.baseUrl="/api/bi/beds"}}let Z=new Y;var $=c(46590);class _{constructor(){this.rules=[],this.notifications=[],this.metrics=[],this.monitoringInterval=null,this.listeners=[],this.initializeMetrics(),this.loadDefaultRules(),this.startMonitoring()}initializeMetrics(){this.metrics=[{id:"bed_occupancy_rate",name:"Taxa de Ocupa\xe7\xe3o de Leitos",description:"Percentual de leitos ocupados",category:"beds",dataType:"percentage",unit:"%",getCurrentValue:async()=>{let a=await Z.getBedStats();return a.occupied/a.total*100}},{id:"overdue_bills_count",name:"Faturas em Atraso",description:"N\xfamero de faturas vencidas",category:"billing",dataType:"number",unit:"faturas",getCurrentValue:async()=>(await X.getOverdueBills()).length},{id:"cancelled_appointments_today",name:"Agendamentos Cancelados Hoje",description:"N\xfamero de agendamentos cancelados no dia atual",category:"appointments",dataType:"number",unit:"agendamentos",getCurrentValue:async()=>{let a=new Date;return(await W.getAppointmentStats(a,a)).cancelled}},{id:"daily_revenue",name:"Receita Di\xe1ria",description:"Receita total do dia",category:"billing",dataType:"number",unit:"R$",getCurrentValue:async()=>{let a=new Date;return await X.getDailyRevenue(a)}},{id:"available_beds",name:"Leitos Dispon\xedveis",description:"N\xfamero de leitos dispon\xedveis",category:"beds",dataType:"number",unit:"leitos",getCurrentValue:async()=>(await Z.getBedStats()).available},{id:"total_patients",name:"Total de Pacientes",description:"N\xfamero total de pacientes cadastrados",category:"patients",dataType:"number",unit:"pacientes",getCurrentValue:async()=>{let a=(await $.z.getPatientMetrics()).find(a=>"total-patients"===a.id);return a?.value||0}},{id:"new_patients_today",name:"Novos Pacientes Hoje",description:"N\xfamero de pacientes cadastrados hoje",category:"patients",dataType:"number",unit:"pacientes",getCurrentValue:async()=>{let a=(await $.z.getPatientMetrics("day")).find(a=>"new-patients"===a.id);return a?.value||0}},{id:"inactive_patients",name:"Pacientes Inativos",description:"N\xfamero de pacientes sem atividade recente",category:"patients",dataType:"number",unit:"pacientes",getCurrentValue:async()=>{let a=(await $.z.getPatientMetrics()).find(a=>"inactive-patients"===a.id);return a?.value||0}},{id:"patient_growth_rate",name:"Taxa de Crescimento de Pacientes",description:"Taxa de crescimento mensal de pacientes",category:"patients",dataType:"percentage",unit:"%",getCurrentValue:async()=>(await $.z.getPatientTrends()).monthlyGrowth}]}loadDefaultRules(){[{name:"Ocupa\xe7\xe3o Cr\xedtica de Leitos",description:"Alerta quando a ocupa\xe7\xe3o de leitos excede 90%",type:"bed_occupancy",severity:"critical",conditions:[{metric:"bed_occupancy_rate",operator:"gt",value:90}],actions:[{type:"notification",target:"system"}]},{name:"Faturas em Atraso",description:"Alerta quando h\xe1 mais de 5 faturas em atraso",type:"billing_overdue",severity:"high",conditions:[{metric:"overdue_bills_count",operator:"gt",value:5}],actions:[{type:"notification",target:"billing_team"}]},{name:"Muitos Cancelamentos",description:"Alerta quando h\xe1 mais de 10 cancelamentos no dia",type:"appointment_cancelled",severity:"medium",conditions:[{metric:"cancelled_appointments_today",operator:"gt",value:10}],actions:[{type:"notification",target:"reception"}]},{name:"Poucos Leitos Dispon\xedveis",description:"Alerta quando h\xe1 menos de 3 leitos dispon\xedveis",type:"bed_occupancy",severity:"high",conditions:[{metric:"available_beds",operator:"lt",value:3}],actions:[{type:"notification",target:"management"}]},{name:"Muitos Pacientes Inativos",description:"Alerta quando h\xe1 mais de 100 pacientes inativos",type:"patient_inactive",severity:"medium",conditions:[{metric:"inactive_patients",operator:"gt",value:100}],actions:[{type:"notification",target:"patient_care"}]},{name:"Baixo Crescimento de Pacientes",description:"Alerta quando o crescimento mensal \xe9 menor que 2%",type:"patient_growth",severity:"low",conditions:[{metric:"patient_growth_rate",operator:"lt",value:2}],actions:[{type:"notification",target:"marketing"}]},{name:"Poucos Novos Pacientes",description:"Alerta quando h\xe1 menos de 5 novos pacientes no dia",type:"patient_registration",severity:"low",conditions:[{metric:"new_patients_today",operator:"lt",value:5}],actions:[{type:"notification",target:"reception"}]}].forEach(a=>{this.createRule(a)})}startMonitoring(){this.monitoringInterval&&clearInterval(this.monitoringInterval),this.monitoringInterval=setInterval(()=>{this.checkAllRules()},3e5),setTimeout(()=>this.checkAllRules(),1e3)}async checkAllRules(){for(let a of this.rules.filter(a=>a.isActive))try{await this.checkRule(a)}catch(a){}}async checkRule(a){let b=!0;for(let c of a.conditions){let a=this.metrics.find(a=>a.id===c.metric);if(!a)continue;let d=await a.getCurrentValue();if(!this.evaluateCondition(d,c)){b=!1;break}}b&&(this.notifications.find(b=>b.ruleId===a.id&&!b.isResolved)||await this.triggerAlert(a))}evaluateCondition(a,b){let{operator:c,value:d}=b;if("number"==typeof a&&"number"==typeof d)switch(c){case"gt":return a>d;case"lt":return a<d;case"gte":return a>=d;case"lte":return a<=d;case"eq":return a===d;case"ne":return a!==d;default:return!1}return"eq"===c?a===d:"ne"===c&&a!==d}async triggerAlert(a){let b={id:`alert_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ruleId:a.id,ruleName:a.name,type:a.type,severity:a.severity,title:a.name,message:a.description,data:{},isRead:!1,isResolved:!1,triggeredAt:new Date};for(let c of(this.notifications.unshift(b),a.actions))await this.executeAction(c,b);this.notifyListeners()}async executeAction(a,b){a.type}notifyListeners(){this.listeners.forEach(a=>{a([...this.notifications])})}async getRules(){return[...this.rules]}async getNotifications(a){let b=[...this.notifications];return a&&(a.severity&&(b=b.filter(b=>a.severity.includes(b.severity))),a.type&&(b=b.filter(b=>a.type.includes(b.type))),void 0!==a.isRead&&(b=b.filter(b=>b.isRead===a.isRead)),void 0!==a.isResolved&&(b=b.filter(b=>b.isResolved===a.isResolved)),a.dateRange&&(b=b.filter(b=>b.triggeredAt>=a.dateRange.start&&b.triggeredAt<=a.dateRange.end))),b}async getMetrics(){return[...this.metrics]}async createRule(a){let b={id:`rule_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...a,isActive:!0,conditions:a.conditions.map(a=>({...a,id:`condition_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})),actions:a.actions.map(a=>({...a,id:`action_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})),createdAt:new Date,updatedAt:new Date,createdBy:"system"};return this.rules.push(b),b}async updateRule(a){let b=this.rules.findIndex(b=>b.id===a.id);if(-1===b)throw Error("Regra n\xe3o encontrada");let c=this.rules[b];return this.rules[b]={...c,...a,updatedAt:new Date},this.rules[b]}async deleteRule(a){let b=this.rules.findIndex(b=>b.id===a);if(-1===b)throw Error("Regra n\xe3o encontrada");this.rules.splice(b,1)}async markAsRead(a){let b=this.notifications.find(b=>b.id===a);b&&(b.isRead=!0,this.notifyListeners())}async markAsResolved(a,b){let c=this.notifications.find(b=>b.id===a);c&&(c.isResolved=!0,c.resolvedAt=new Date,c.resolvedBy=b,this.notifyListeners())}async getStats(){let a=this.notifications,b=a.length,c=a.filter(a=>!a.isRead).length,d=a.filter(a=>!a.isResolved).length;return{total:b,unread:c,unresolved:d,bySeverity:a.reduce((a,b)=>(a[b.severity]=(a[b.severity]||0)+1,a),{}),byType:a.reduce((a,b)=>(a[b.type]=(a[b.type]||0)+1,a),{}),recentTrends:[]}}addListener(a){return this.listeners.push(a),()=>{let b=this.listeners.indexOf(a);b>-1&&this.listeners.splice(b,1)}}stopMonitoring(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null)}}let aa=new _;function ab(){let[a,b]=(0,e.useState)({rules:[],notifications:[],metrics:[],isLoading:!0,error:null}),[c,d]=(0,e.useState)(null),[f,g]=(0,e.useState)(null),[h,i]=(0,e.useState)([]),j=(0,e.useCallback)(async()=>{try{b(a=>({...a,isLoading:!0,error:null}));let[a,c,e,g]=await Promise.all([aa.getRules(),aa.getNotifications(),aa.getMetrics(),aa.getStats()]);i(c),d(g),b({rules:a,notifications:f?await aa.getNotifications(f):c,metrics:e,isLoading:!1,error:null})}catch(a){b(b=>({...b,isLoading:!1,error:a instanceof Error?a.message:"Erro ao carregar alertas"}))}},[f]),k=(0,e.useCallback)(async a=>{try{await aa.createRule(a),await j()}catch(a){throw b(b=>({...b,error:a instanceof Error?a.message:"Erro ao criar regra"})),a}},[j]),l=(0,e.useCallback)(async a=>{try{await aa.updateRule(a),await j()}catch(a){throw b(b=>({...b,error:a instanceof Error?a.message:"Erro ao atualizar regra"})),a}},[j]),m=(0,e.useCallback)(async a=>{try{await aa.deleteRule(a),await j()}catch(a){throw b(b=>({...b,error:a instanceof Error?a.message:"Erro ao excluir regra"})),a}},[j]),n=(0,e.useCallback)(async c=>{try{let b=a.rules.find(a=>a.id===c);if(!b)throw Error("Regra n\xe3o encontrada");await aa.updateRule({id:c,isActive:!b.isActive}),await j()}catch(a){throw b(b=>({...b,error:a instanceof Error?a.message:"Erro ao alterar status da regra"})),a}},[a.rules,j]),o=(0,e.useCallback)(async a=>{try{await aa.markAsRead(a)}catch(a){b(b=>({...b,error:a instanceof Error?a.message:"Erro ao marcar como lida"}))}},[]),p=(0,e.useCallback)(async(a,c)=>{try{await aa.markAsResolved(a,c)}catch(a){b(b=>({...b,error:a instanceof Error?a.message:"Erro ao marcar como resolvida"}))}},[]),q=(0,e.useCallback)(async()=>{try{let b=a.notifications.filter(a=>!a.isRead);await Promise.all(b.map(a=>aa.markAsRead(a.id)))}catch(a){b(b=>({...b,error:a instanceof Error?a.message:"Erro ao marcar todas como lidas"}))}},[a.notifications]),r=(0,e.useCallback)(a=>{g(a)},[]),s=(0,e.useCallback)(()=>{g(null)},[]),t=(0,e.useCallback)(async()=>{await j()},[j]);return{rules:a.rules,notifications:a.notifications,metrics:a.metrics,stats:c,isLoading:a.isLoading,error:a.error,createRule:k,updateRule:l,deleteRule:m,toggleRule:n,markAsRead:o,markAsResolved:p,markAllAsRead:q,applyFilters:r,clearFilters:s,refresh:t}}var ac=c(68358),ad=c(882);let ae={low:{icon:I.A,color:"bg-blue-100 text-blue-800 border-blue-200",bgColor:"bg-blue-50"},medium:{icon:J.A,color:"bg-yellow-100 text-yellow-800 border-yellow-200",bgColor:"bg-yellow-50"},high:{icon:w.A,color:"bg-orange-100 text-orange-800 border-orange-200",bgColor:"bg-orange-50"},critical:{icon:K.A,color:"bg-red-100 text-red-800 border-red-200",bgColor:"bg-red-50"}},af={bed_occupancy:"Ocupa\xe7\xe3o de Leitos",billing_overdue:"Faturamento em Atraso",appointment_cancelled:"Agendamentos Cancelados",patient_inactive:"Pacientes Inativos",revenue_drop:"Queda de Receita",system_performance:"Performance do Sistema",custom:"Personalizado"};function ag({notification:a,onMarkAsRead:b,onMarkAsResolved:c}){let e=ae[a.severity],f=e.icon;return(0,d.jsx)("div",{className:`p-4 border rounded-lg transition-all hover:shadow-sm ${a.isRead?"bg-gray-50":e.bgColor} ${a.isResolved?"opacity-60":""}`,children:(0,d.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,d.jsx)("div",{className:`p-2 rounded-full ${e.color}`,children:(0,d.jsx)(f,{className:"h-4 w-4"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)("h4",{className:`font-medium text-sm ${a.isRead?"text-gray-700":"text-gray-900"}`,children:a.title}),(0,d.jsx)(i.E,{variant:"outline",className:`text-xs ${e.color}`,children:a.severity.toUpperCase()}),!a.isRead&&(0,d.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),(0,d.jsx)("p",{className:`text-sm mb-2 ${a.isRead?"text-gray-600":"text-gray-700"}`,children:a.message}),(0,d.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(L.A,{className:"h-3 w-3"}),(0,ac.m)(a.triggeredAt,{addSuffix:!0,locale:ad.F})]}),(0,d.jsx)(i.E,{variant:"secondary",className:"text-xs",children:af[a.type]}),a.isResolved&&(0,d.jsxs)("span",{className:"flex items-center gap-1 text-green-600",children:[(0,d.jsx)(M.A,{className:"h-3 w-3"}),"Resolvido"]})]})]})]}),(0,d.jsxs)(R.rI,{children:[(0,d.jsx)(R.ty,{asChild:!0,children:(0,d.jsx)(h.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,d.jsx)(N.A,{className:"h-4 w-4"})})}),(0,d.jsxs)(R.SQ,{align:"end",children:[!a.isRead&&(0,d.jsxs)(R._2,{onClick:()=>b(a.id),children:[(0,d.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"Marcar como lida"]}),!a.isResolved&&(0,d.jsxs)(R._2,{onClick:()=>c(a.id),children:[(0,d.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Marcar como resolvida"]}),(0,d.jsx)(R.mB,{}),(0,d.jsxs)(R._2,{className:"text-gray-500",children:[(0,d.jsx)(I.A,{className:"h-4 w-4 mr-2"}),"Ver detalhes"]})]})]})]})})}function ah({onFiltersChange:a}){let[b,c]=(0,e.useState)([]),[f,g]=(0,e.useState)([]),[i,j]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!1);return(0,d.jsxs)("div",{className:"space-y-4 p-4 border-b",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h3",{className:"font-medium text-sm",children:"Filtros"}),(0,d.jsx)(h.$,{variant:"ghost",size:"sm",onClick:()=>{c([]),g([]),j(!1),m(!1),a(null)},children:"Limpar"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-xs font-medium text-gray-700 mb-2 block",children:"Severidade"}),(0,d.jsxs)(k.l6,{value:b.join(","),onValueChange:a=>c(a?a.split(","):[]),children:[(0,d.jsx)(k.bq,{className:"h-8",children:(0,d.jsx)(k.yv,{placeholder:"Todas"})}),(0,d.jsxs)(k.gC,{children:[(0,d.jsx)(k.eb,{value:"critical",children:"Cr\xedtica"}),(0,d.jsx)(k.eb,{value:"high",children:"Alta"}),(0,d.jsx)(k.eb,{value:"medium",children:"M\xe9dia"}),(0,d.jsx)(k.eb,{value:"low",children:"Baixa"})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"text-xs font-medium text-gray-700 mb-2 block",children:"Tipo"}),(0,d.jsxs)(k.l6,{value:f.join(","),onValueChange:a=>g(a?a.split(","):[]),children:[(0,d.jsx)(k.bq,{className:"h-8",children:(0,d.jsx)(k.yv,{placeholder:"Todos"})}),(0,d.jsxs)(k.gC,{children:[(0,d.jsx)(k.eb,{value:"bed_occupancy",children:"Ocupa\xe7\xe3o de Leitos"}),(0,d.jsx)(k.eb,{value:"billing_overdue",children:"Faturamento"}),(0,d.jsx)(k.eb,{value:"appointment_cancelled",children:"Agendamentos"}),(0,d.jsx)(k.eb,{value:"patient_inactive",children:"Pacientes"})]})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(S.S,{id:"unread",checked:i,onCheckedChange:j}),(0,d.jsx)("label",{htmlFor:"unread",className:"text-xs text-gray-700",children:"Apenas n\xe3o lidas"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(S.S,{id:"unresolved",checked:l,onCheckedChange:m}),(0,d.jsx)("label",{htmlFor:"unresolved",className:"text-xs text-gray-700",children:"Apenas n\xe3o resolvidas"})]})]})]})}function ai({className:a="",maxHeight:b="600px",showFilters:c=!0,showStats:f=!0}){let{notifications:j,stats:k,isLoading:l,error:m,markAsRead:n,markAsResolved:o,markAllAsRead:p,applyFilters:q,clearFilters:r}=ab(),[s,t]=(0,e.useState)(!1);return l?(0,d.jsx)(g.Zp,{className:a,children:(0,d.jsx)(g.Wu,{className:"p-6",children:(0,d.jsx)("div",{className:"flex items-center justify-center",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):m?(0,d.jsx)(g.Zp,{className:a,children:(0,d.jsx)(g.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"text-center text-red-600",children:[(0,d.jsx)(w.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,d.jsx)("p",{children:m})]})})}):(0,d.jsxs)(g.Zp,{className:a,children:[(0,d.jsxs)(g.aR,{className:"pb-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(P.A,{className:"h-5 w-5"}),(0,d.jsx)(g.ZB,{className:"text-lg",children:"Alertas"}),k&&k.unread>0&&(0,d.jsx)(i.E,{variant:"destructive",className:"text-xs",children:k.unread})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[c&&(0,d.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>t(!s),children:(0,d.jsx)(Q.A,{className:"h-4 w-4"})}),k&&k.unread>0&&(0,d.jsx)(h.$,{variant:"outline",size:"sm",onClick:p,children:"Marcar todas como lidas"})]})]}),f&&k&&(0,d.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-2",children:[(0,d.jsxs)("span",{children:["Total: ",k.total]}),(0,d.jsxs)("span",{children:["N\xe3o lidas: ",k.unread]}),(0,d.jsxs)("span",{children:["N\xe3o resolvidas: ",k.unresolved]})]})]}),s&&(0,d.jsx)(ah,{onFiltersChange:q}),(0,d.jsx)(g.Wu,{className:"p-0",children:(0,d.jsx)(T.F,{style:{maxHeight:b},children:0===j.length?(0,d.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,d.jsx)(P.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,d.jsx)("p",{children:"Nenhum alerta encontrado"})]}):(0,d.jsx)("div",{className:"space-y-2 p-4",children:j.map(a=>(0,d.jsx)(ag,{notification:a,onMarkAsRead:n,onMarkAsResolved:o},a.id))})})})]})}var aj=c(19169),ak=c(17581),al=c(88233),am=c(8819),an=c(63143),ao=c(68988),ap=c(15616),aq=c(42902),ar=c(37826);let as=[{value:"low",label:"Baixa",color:"bg-blue-100 text-blue-800"},{value:"medium",label:"M\xe9dia",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"Alta",color:"bg-orange-100 text-orange-800"},{value:"critical",label:"Cr\xedtica",color:"bg-red-100 text-red-800"}],at=[{value:"bed_occupancy",label:"Ocupa\xe7\xe3o de Leitos"},{value:"billing_overdue",label:"Faturamento em Atraso"},{value:"appointment_cancelled",label:"Agendamentos Cancelados"},{value:"patient_inactive",label:"Pacientes Inativos"},{value:"revenue_drop",label:"Queda de Receita"},{value:"system_performance",label:"Performance do Sistema"},{value:"custom",label:"Personalizado"}],au=[{value:"greater_than",label:"Maior que (>)"},{value:"less_than",label:"Menor que (<)"},{value:"equal",label:"Igual a (=)"},{value:"greater_equal",label:"Maior ou igual (>=)"},{value:"less_equal",label:"Menor ou igual (<=)"},{value:"not_equal",label:"Diferente de (!=)"}],av=[{value:"notification",label:"Notifica\xe7\xe3o",icon:P.A},{value:"email",label:"Email",icon:aj.A},{value:"sms",label:"SMS",icon:ak.A}];function aw({rule:a,onSave:b,onCancel:c}){let[f,j]=(0,e.useState)({name:a?.name||"",description:a?.description||"",type:a?.type||"custom",severity:a?.severity||"medium",isActive:a?.isActive??!0,conditions:a?.conditions||[{metric:"",operator:"greater_than",value:0,timeWindow:300}],actions:a?.actions||[{type:"notification",config:{}}]}),o=(a,b,c)=>{j(d=>({...d,conditions:d.conditions.map((d,e)=>e===a?{...d,[b]:c}:d)}))};return(0,d.jsxs)("form",{onSubmit:a=>{a.preventDefault(),b(f)},className:"space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{htmlFor:"name",children:"Nome da Regra"}),(0,d.jsx)(ao.p,{id:"name",value:f.name,onChange:a=>j(b=>({...b,name:a.target.value})),placeholder:"Ex: Ocupa\xe7\xe3o cr\xedtica de leitos",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{htmlFor:"type",children:"Tipo"}),(0,d.jsxs)(k.l6,{value:f.type,onValueChange:a=>j(b=>({...b,type:a})),children:[(0,d.jsx)(k.bq,{children:(0,d.jsx)(k.yv,{})}),(0,d.jsx)(k.gC,{children:at.map(a=>(0,d.jsx)(k.eb,{value:a.value,children:a.label},a.value))})]})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{htmlFor:"description",children:"Descri\xe7\xe3o"}),(0,d.jsx)(ap.T,{id:"description",value:f.description,onChange:a=>j(b=>({...b,description:a.target.value})),placeholder:"Descreva quando este alerta deve ser disparado...",rows:3})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{htmlFor:"severity",children:"Severidade"}),(0,d.jsxs)(k.l6,{value:f.severity,onValueChange:a=>j(b=>({...b,severity:a})),children:[(0,d.jsx)(k.bq,{children:(0,d.jsx)(k.yv,{})}),(0,d.jsx)(k.gC,{children:as.map(a=>(0,d.jsx)(k.eb,{value:a.value,children:(0,d.jsx)("div",{className:"flex items-center gap-2",children:(0,d.jsx)(i.E,{className:a.color,children:a.label})})},a.value))})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 pt-6",children:[(0,d.jsx)(aq.Switch,{id:"isActive",checked:f.isActive,onCheckedChange:a=>j(b=>({...b,isActive:a}))}),(0,d.jsx)(l.Label,{htmlFor:"isActive",children:"Regra ativa"})]})]})]}),(0,d.jsx)(m.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("h3",{className:"font-medium flex items-center gap-2",children:[(0,d.jsx)(A.A,{className:"h-4 w-4"}),"Condi\xe7\xf5es"]}),(0,d.jsxs)(h.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{j(a=>({...a,conditions:[...a.conditions,{metric:"",operator:"greater_than",value:0,timeWindow:300}]}))},children:[(0,d.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Adicionar Condi\xe7\xe3o"]})]}),f.conditions.map((a,b)=>(0,d.jsx)(g.Zp,{className:"p-4",children:(0,d.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{children:"M\xe9trica"}),(0,d.jsx)(ao.p,{value:a.metric,onChange:a=>o(b,"metric",a.target.value),placeholder:"Ex: bed_occupancy_rate"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{children:"Operador"}),(0,d.jsxs)(k.l6,{value:a.operator,onValueChange:a=>o(b,"operator",a),children:[(0,d.jsx)(k.bq,{children:(0,d.jsx)(k.yv,{})}),(0,d.jsx)(k.gC,{children:au.map(a=>(0,d.jsx)(k.eb,{value:a.value,children:a.label},a.value))})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{children:"Valor"}),(0,d.jsx)(ao.p,{type:"number",value:a.value,onChange:a=>o(b,"value",parseFloat(a.target.value)),placeholder:"0"})]}),(0,d.jsxs)("div",{className:"flex items-end gap-2",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)(l.Label,{children:"Janela (seg)"}),(0,d.jsx)(ao.p,{type:"number",value:a.timeWindow,onChange:a=>o(b,"timeWindow",parseInt(a.target.value)),placeholder:"300"})]}),f.conditions.length>1&&(0,d.jsx)(h.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{j(a=>({...a,conditions:a.conditions.filter((a,c)=>c!==b)}))},children:(0,d.jsx)(al.A,{className:"h-4 w-4"})})]})]})},b))]}),(0,d.jsx)(m.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("h3",{className:"font-medium flex items-center gap-2",children:[(0,d.jsx)(P.A,{className:"h-4 w-4"}),"A\xe7\xf5es"]}),(0,d.jsxs)(h.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{j(a=>({...a,actions:[...a.actions,{type:"notification",config:{}}]}))},children:[(0,d.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Adicionar A\xe7\xe3o"]})]}),f.actions.map((a,b)=>(0,d.jsx)(g.Zp,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)(l.Label,{children:"Tipo de A\xe7\xe3o"}),(0,d.jsxs)(k.l6,{value:a.type,onValueChange:a=>{j(c=>({...c,actions:c.actions.map((c,d)=>d===b?{...c,type:a}:c)}))},children:[(0,d.jsx)(k.bq,{children:(0,d.jsx)(k.yv,{})}),(0,d.jsx)(k.gC,{children:av.map(a=>{let b=a.icon;return(0,d.jsx)(k.eb,{value:a.value,children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(b,{className:"h-4 w-4"}),a.label]})},a.value)})})]})]}),f.actions.length>1&&(0,d.jsx)(h.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{j(a=>({...a,actions:a.actions.filter((a,c)=>c!==b)}))},children:(0,d.jsx)(al.A,{className:"h-4 w-4"})})]})},b))]}),(0,d.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,d.jsxs)(h.$,{type:"button",variant:"outline",onClick:c,children:[(0,d.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Cancelar"]}),(0,d.jsxs)(h.$,{type:"submit",children:[(0,d.jsx)(am.A,{className:"h-4 w-4 mr-2"}),a?"Atualizar":"Criar"," Regra"]})]})]})}function ax({rule:a,onEdit:b,onDelete:c,onToggle:e}){let f=as.find(b=>b.value===a.severity),j=at.find(b=>b.value===a.type);return(0,d.jsx)(g.Zp,{className:`transition-all ${a.isActive?"":"opacity-60"}`,children:(0,d.jsxs)(g.Wu,{className:"p-4",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)("h3",{className:"font-medium",children:a.name}),(0,d.jsx)(i.E,{className:f?.color,children:f?.label}),!a.isActive&&(0,d.jsx)(i.E,{variant:"secondary",children:"Inativa"})]}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),(0,d.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,d.jsxs)("span",{children:["Tipo: ",j?.label]}),(0,d.jsxs)("span",{children:["Condi\xe7\xf5es: ",a.conditions.length]}),(0,d.jsxs)("span",{children:["A\xe7\xf5es: ",a.actions.length]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(aq.Switch,{checked:a.isActive,onCheckedChange:b=>e(a.id,b)}),(0,d.jsx)(h.$,{variant:"ghost",size:"sm",onClick:()=>b(a),children:(0,d.jsx)(an.A,{className:"h-4 w-4"})}),(0,d.jsx)(h.$,{variant:"ghost",size:"sm",onClick:()=>c(a.id),className:"text-red-600 hover:text-red-700",children:(0,d.jsx)(al.A,{className:"h-4 w-4"})})]})]}),(0,d.jsxs)("div",{className:"space-y-1",children:[a.conditions.slice(0,2).map((a,b)=>(0,d.jsx)("div",{className:"text-xs bg-gray-50 p-2 rounded",children:(0,d.jsxs)("code",{children:[a.metric," ",au.find(b=>b.value===a.operator)?.label.split(" ")[0]," ",a.value]})},b)),a.conditions.length>2&&(0,d.jsxs)("div",{className:"text-xs text-gray-500",children:["+",a.conditions.length-2," condi\xe7\xf5es adicionais"]})]})]})})}function ay({className:a=""}){let{rules:b,isLoading:c,error:f,createRule:i,updateRule:j,deleteRule:k,toggleRule:l}=ab(),[m,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(null),s=async a=>{try{await i(a),o(!1)}catch(a){}},t=async a=>{if(p)try{await j(p.id,a),q(null)}catch(a){}},u=async a=>{if(confirm("Tem certeza que deseja excluir esta regra?"))try{await k(a)}catch(a){}},v=async(a,b)=>{try{await l(a,b)}catch(a){}};return c?(0,d.jsx)(g.Zp,{className:a,children:(0,d.jsx)(g.Wu,{className:"p-6",children:(0,d.jsx)("div",{className:"flex items-center justify-center",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):f?(0,d.jsx)(g.Zp,{className:a,children:(0,d.jsx)(g.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"text-center text-red-600",children:[(0,d.jsx)(w.A,{className:"h-8 w-8 mx-auto mb-2"}),(0,d.jsx)("p",{children:f})]})})}):(0,d.jsxs)(g.Zp,{className:a,children:[(0,d.jsx)(g.aR,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{className:"h-5 w-5"}),(0,d.jsx)(g.ZB,{children:"Configura\xe7\xe3o de Alertas"})]}),(0,d.jsxs)(ar.lG,{open:m,onOpenChange:o,children:[(0,d.jsx)(ar.zM,{asChild:!0,children:(0,d.jsxs)(h.$,{children:[(0,d.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Nova Regra"]})}),(0,d.jsxs)(ar.Cf,{className:"max-w-4xl max-h-[90vh]",children:[(0,d.jsx)(ar.c7,{children:(0,d.jsx)(ar.L3,{children:"Criar Nova Regra de Alerta"})}),(0,d.jsx)(T.F,{className:"max-h-[70vh]",children:(0,d.jsx)(aw,{onSave:s,onCancel:()=>o(!1)})})]})]})]})}),(0,d.jsxs)(g.Wu,{children:[0===b.length?(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)(r.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,d.jsx)("p",{className:"text-gray-500 mb-4",children:"Nenhuma regra de alerta configurada"}),(0,d.jsxs)(h.$,{onClick:()=>o(!0),children:[(0,d.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Criar Primeira Regra"]})]}):(0,d.jsx)("div",{className:"space-y-4",children:b.map(a=>(0,d.jsx)(ax,{rule:a,onEdit:q,onDelete:u,onToggle:v},a.id))}),(0,d.jsx)(ar.lG,{open:!!p,onOpenChange:()=>q(null),children:(0,d.jsxs)(ar.Cf,{className:"max-w-4xl max-h-[90vh]",children:[(0,d.jsx)(ar.c7,{children:(0,d.jsx)(ar.L3,{children:"Editar Regra de Alerta"})}),(0,d.jsx)(T.F,{className:"max-h-[70vh]",children:p&&(0,d.jsx)(aw,{rule:p,onSave:t,onCancel:()=>q(null)})})]})})]})]})}let az=(0,e.createContext)(void 0),aA={low:{icon:I.A,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"},medium:{icon:J.A,color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200"},high:{icon:w.A,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"},critical:{icon:K.A,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}};function aB({notification:a,onMarkAsRead:b}){let c=aA[a.severity],e=c.icon;return(0,d.jsxs)("div",{className:`flex items-start gap-3 p-4 rounded-lg border ${c.bgColor} ${c.borderColor} max-w-md`,children:[(0,d.jsx)("div",{className:`p-2 rounded-full ${c.color}`,children:(0,d.jsx)(e,{className:"h-4 w-4"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,d.jsx)("h4",{className:"font-medium text-sm text-gray-900",children:a.title}),(0,d.jsx)("button",{onClick:()=>b(a.id),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,d.jsx)(O.A,{className:"h-4 w-4"})})]}),(0,d.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:a.message}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:`text-xs font-medium px-2 py-1 rounded ${c.color} ${c.bgColor}`,children:a.severity.toUpperCase()}),(0,d.jsx)("button",{onClick:()=>b(a.id),className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Marcar como lida"})]})]})]})}function aC({children:a}){let[b,c]=(0,e.useState)(!0),[f,g]=(0,e.useState)(!0),[h,i]=(0,e.useState)(null),{notifications:j,markAsRead:k}=ab(),l=(0,e.useCallback)(a=>{if(f)try{let b=new(window.AudioContext||window.webkitAudioContext),c=b.createOscillator(),d=b.createGain();c.connect(d),d.connect(b.destination);let e={low:440,medium:523,high:659,critical:880};c.frequency.setValueAtTime(e[a],b.currentTime),c.type="critical"===a?"sawtooth":"sine";let f={low:.1,medium:.2,high:.3,critical:.4};d.gain.setValueAtTime(f[a],b.currentTime),d.gain.exponentialRampToValueAtTime(.01,b.currentTime+.5),c.start(b.currentTime),c.stop(b.currentTime+.5),"critical"===a&&setTimeout(()=>{let c=b.createOscillator(),d=b.createGain();c.connect(d),d.connect(b.destination),c.frequency.setValueAtTime(e[a],b.currentTime),c.type="sawtooth",d.gain.setValueAtTime(f[a],b.currentTime),d.gain.exponentialRampToValueAtTime(.01,b.currentTime+.5),c.start(b.currentTime),c.stop(b.currentTime+.5)},600)}catch(a){}},[f]),m=(0,e.useCallback)(a=>{if(!b)return;l(a.severity);let c=D.o.custom((0,d.jsx)(aB,{notification:a,onMarkAsRead:a=>{k(a),D.o.dismiss(c)}}),{duration:"critical"===a.severity?1e4:"high"===a.severity?7e3:"medium"===a.severity?5e3:4e3,position:"top-right"});if("Notification"in window&&"granted"===Notification.permission){let b=new Notification(a.title,{body:a.message,icon:"/favicon.ico",tag:a.id,requireInteraction:"critical"===a.severity});b.onclick=()=>{window.focus(),b.close(),k(a.id)},setTimeout(()=>{b.close()},"critical"===a.severity?1e4:5e3)}},[b,l,k]),n=(0,e.useCallback)((a,b="info")=>{let c={success:M.A,error:w.A,warning:J.A,info:I.A}[b];D.o.custom((0,d.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border shadow-lg",children:[(0,d.jsx)(c,{className:`h-5 w-5 ${{success:"text-green-600",error:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"}[b]}`}),(0,d.jsx)("span",{className:"text-sm text-gray-900",children:a})]}),{duration:3e3,position:"bottom-right"})},[]);return(0,d.jsx)(az.Provider,{value:{showNotification:m,showToast:n,isEnabled:b,setEnabled:c,soundEnabled:f,setSoundEnabled:g},children:a})}var aD=c(91391),aE=c(89925),aF=c(58887),aG=c(45989);function aH({className:a}){let{isEnabled:b,setEnabled:c,soundEnabled:f,setSoundEnabled:j,showToast:k,showNotification:n}=function(){let a=(0,e.useContext)(az);if(void 0===a)throw Error("useNotifications deve ser usado dentro de um NotificationProvider");return a}(),o=a=>{n({low:{id:`test-${Date.now()}`,title:"Teste - Informa\xe7\xe3o",message:"Esta \xe9 uma notifica\xe7\xe3o de teste com severidade baixa.",severity:"low",type:"info",triggeredAt:new Date().toISOString(),isRead:!1,ruleId:"test-rule",ruleName:"Teste",actions:[]},medium:{id:`test-${Date.now()}`,title:"Teste - Aten\xe7\xe3o",message:"Esta \xe9 uma notifica\xe7\xe3o de teste com severidade m\xe9dia.",severity:"medium",type:"warning",triggeredAt:new Date().toISOString(),isRead:!1,ruleId:"test-rule",ruleName:"Teste",actions:[]},high:{id:`test-${Date.now()}`,title:"Teste - Importante",message:"Esta \xe9 uma notifica\xe7\xe3o de teste com severidade alta.",severity:"high",type:"warning",triggeredAt:new Date().toISOString(),isRead:!1,ruleId:"test-rule",ruleName:"Teste",actions:[]},critical:{id:`test-${Date.now()}`,title:"Teste - Cr\xedtico",message:"Esta \xe9 uma notifica\xe7\xe3o de teste com severidade cr\xedtica.",severity:"critical",type:"error",triggeredAt:new Date().toISOString(),isRead:!1,ruleId:"test-rule",ruleName:"Teste",actions:[]}}[a])},p="Notification"in window?Notification.permission:"unsupported",q=async()=>{"Notification"in window&&("granted"===await Notification.requestPermission()?k("Permiss\xe3o para notifica\xe7\xf5es concedida!","success"):k("Permiss\xe3o para notifica\xe7\xf5es negada.","error"))};return(0,d.jsx)("div",{className:a,children:(0,d.jsxs)(g.Zp,{children:[(0,d.jsxs)(g.aR,{children:[(0,d.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{className:"h-5 w-5"}),"Configura\xe7\xf5es de Notifica\xe7\xe3o"]}),(0,d.jsx)(g.BT,{children:"Configure como voc\xea deseja receber alertas e notifica\xe7\xf5es do sistema."})]}),(0,d.jsxs)(g.Wu,{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Configura\xe7\xf5es Gerais"}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(P.A,{className:"h-4 w-4 text-gray-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{htmlFor:"notifications-enabled",className:"text-sm font-medium",children:"Ativar Notifica\xe7\xf5es"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Receber alertas e notifica\xe7\xf5es do sistema"})]})]}),(0,d.jsx)(aq.Switch,{id:"notifications-enabled",checked:b,onCheckedChange:c})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[f?(0,d.jsx)(aD.A,{className:"h-4 w-4 text-gray-500"}):(0,d.jsx)(aE.A,{className:"h-4 w-4 text-gray-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{htmlFor:"sound-enabled",className:"text-sm font-medium",children:"Sons de Notifica\xe7\xe3o"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Reproduzir sons quando receber alertas"})]})]}),(0,d.jsx)(aq.Switch,{id:"sound-enabled",checked:f,onCheckedChange:j,disabled:!b})]})]}),(0,d.jsx)(m.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Notifica\xe7\xf5es do Navegador"}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(ak.A,{className:"h-4 w-4 text-gray-500"}),(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{className:"text-sm font-medium",children:"Notifica\xe7\xf5es do Sistema"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Mostrar notifica\xe7\xf5es mesmo quando a aba n\xe3o estiver ativa"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(i.E,{variant:"granted"===p?"default":"denied"===p?"destructive":"secondary",children:"granted"===p?"Ativado":"denied"===p?"Negado":"default"===p?"Pendente":"N\xe3o Suportado"}),"granted"!==p&&"unsupported"!==p&&(0,d.jsx)(h.$,{size:"sm",variant:"outline",onClick:q,children:"Ativar"})]})]})]}),(0,d.jsx)(m.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Canais de Notifica\xe7\xe3o"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Funcionalidades futuras para integra\xe7\xe3o com outros sistemas."}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg opacity-50",children:[(0,d.jsx)(aj.A,{className:"h-4 w-4 text-gray-400"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-400",children:"Email"}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Em breve"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg opacity-50",children:[(0,d.jsx)(aF.A,{className:"h-4 w-4 text-gray-400"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-400",children:"SMS"}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Em breve"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg opacity-50",children:[(0,d.jsx)(P.A,{className:"h-4 w-4 text-gray-400"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-400",children:"Push"}),(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Em breve"})]})]})]})]}),(0,d.jsx)(m.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("h3",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[(0,d.jsx)(aG.A,{className:"h-4 w-4"}),"Testar Notifica\xe7\xf5es"]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Teste diferentes tipos de notifica\xe7\xe3o para verificar suas configura\xe7\xf5es."}),(0,d.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,d.jsx)(h.$,{size:"sm",variant:"outline",onClick:()=>o("low"),disabled:!b,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:"Baixa"}),(0,d.jsx)(h.$,{size:"sm",variant:"outline",onClick:()=>o("medium"),disabled:!b,className:"text-yellow-600 border-yellow-200 hover:bg-yellow-50",children:"M\xe9dia"}),(0,d.jsx)(h.$,{size:"sm",variant:"outline",onClick:()=>o("high"),disabled:!b,className:"text-orange-600 border-orange-200 hover:bg-orange-50",children:"Alta"}),(0,d.jsx)(h.$,{size:"sm",variant:"outline",onClick:()=>o("critical"),disabled:!b,className:"text-red-600 border-red-200 hover:bg-red-50",children:"Cr\xedtica"})]})]})]})]})})}var aI=c(76605),aJ=c(10022),aK=c(82164),aL=c(4403),aM=c(33103),aN=c(85650);class aO{async exportToPDF(a,b={format:"pdf"}){let c=new aL.default({orientation:b.orientation||"portrait",unit:"mm",format:"a4"}),d=c.internal.pageSize.getWidth(),e=c.internal.pageSize.getHeight(),f=20;if(c.setFontSize(18),c.setFont("helvetica","bold"),c.text(a.title,d/2,f,{align:"center"}),f+=10,a.subtitle&&(c.setFontSize(12),c.setFont("helvetica","normal"),c.text(a.subtitle,d/2,f,{align:"center"}),f+=10),b.includeMetadata&&a.metadata){f+=5,c.setFontSize(10),c.setFont("helvetica","normal");let b=(0,aN.GP)(a.metadata.generatedAt,"dd/MM/yyyy '\xe0s' HH:mm",{locale:ad.F});c.text(`Gerado em: ${b}`,20,f),f+=5,a.metadata.generatedBy&&(c.text(`Gerado por: ${a.metadata.generatedBy}`,20,f),f+=5)}f+=10;let g=(d-40)/a.headers.length;c.setFontSize(10),c.setFont("helvetica","bold"),c.setFillColor(240,240,240),a.headers.forEach((a,b)=>{let d=20+b*g;c.rect(d,f,g,8,"F"),c.text(a,d+2,f+5)}),f+=8,c.setFont("helvetica","normal"),a.data.forEach((a,b)=>{f>e-30&&(c.addPage(),f=20),a.forEach((a,b)=>{let d=20+b*g;c.text(String(a),d+2,f+5)}),f+=8});let h=b.filename||`relatorio_${(0,aN.GP)(new Date,"yyyy-MM-dd_HH-mm")}.pdf`;c.save(h)}async exportToExcel(a,b={format:"excel"}){let c=aM.Wp.book_new(),d=[[a.title],a.subtitle?[a.subtitle]:[],[],a.headers,...a.data].filter(a=>a.length>0),e=aM.Wp.aoa_to_sheet(d),f=aM.Wp.decode_range(e["!ref"]||"A1");e.A1&&(e.A1.s={font:{bold:!0,sz:16},alignment:{horizontal:"center"}}),a.subtitle&&e.A2&&(e.A2.s={font:{sz:12},alignment:{horizontal:"center"}});let g=a.subtitle?4:3;for(let a=f.s.c;a<=f.e.c;a++){let b=aM.Wp.encode_cell({r:g-1,c:a});e[b]&&(e[b].s={font:{bold:!0},fill:{fgColor:{rgb:"F0F0F0"}}})}let h=a.headers.map(a=>({wch:Math.max(a.length,15)}));if(e["!cols"]=h,aM.Wp.book_append_sheet(c,e,"Relat\xf3rio"),b.includeMetadata&&a.metadata){let b=[["Metadados do Relat\xf3rio"],[],["Gerado em:",(0,aN.GP)(a.metadata.generatedAt,"dd/MM/yyyy '\xe0s' HH:mm",{locale:ad.F})],["Gerado por:",a.metadata.generatedBy||"Sistema"],[]];a.metadata.filters&&(b.push(["Filtros Aplicados:"]),Object.entries(a.metadata.filters).forEach(([a,c])=>{b.push([a,String(c)])}));let d=aM.Wp.aoa_to_sheet(b);aM.Wp.book_append_sheet(c,d,"Metadados")}let i=b.filename||`relatorio_${(0,aN.GP)(new Date,"yyyy-MM-dd_HH-mm")}.xlsx`;aM._h(c,i)}async export(a,b){if("pdf"===b.format)await this.exportToPDF(a,b);else if("excel"===b.format)await this.exportToExcel(a,b);else throw Error(`Formato de exporta\xe7\xe3o n\xe3o suportado: ${b.format}`)}formatMetricsForExport(a,b,c){return{title:b,subtitle:c,headers:["M\xe9trica","Valor","Unidade","Categoria","\xdaltima Atualiza\xe7\xe3o"],data:a.map(a=>[a.name||a.label,a.value,a.unit||"",a.category||"",a.updatedAt?(0,aN.GP)(new Date(a.updatedAt),"dd/MM/yyyy HH:mm",{locale:ad.F}):""]),metadata:{generatedAt:new Date,generatedBy:"Sistema BI"}}}formatKPIsForExport(a,b,c){return{title:b,subtitle:c,headers:["KPI","Valor Atual","Meta","Varia\xe7\xe3o","Status","Per\xedodo"],data:a.map(a=>[a.name||a.label,a.currentValue,a.target||"N/A",a.variation?`${a.variation>0?"+":""}${a.variation}%`:"N/A",a.status||"N/A",a.period||"N/A"]),metadata:{generatedAt:new Date,generatedBy:"Sistema BI"}}}formatAlertsForExport(a,b,c){return{title:b,subtitle:c,headers:["Alerta","Severidade","Tipo","Status","Disparado em","Resolvido em"],data:a.map(a=>[a.title||a.name,a.severity,a.type,a.isResolved?"Resolvido":"Ativo",(0,aN.GP)(new Date(a.triggeredAt),"dd/MM/yyyy HH:mm",{locale:ad.F}),a.resolvedAt?(0,aN.GP)(new Date(a.resolvedAt),"dd/MM/yyyy HH:mm",{locale:ad.F}):"N/A"]),metadata:{generatedAt:new Date,generatedBy:"Sistema BI"}}}}let aP=new aO;var aQ=c(3184),aR=c(94180);function aS(){let[a,b]=(0,e.useState)({isExporting:!1,error:null}),{metrics:c}=(0,aQ.B)(),{kpis:d}=(0,aR.h)(),{notifications:f}=ab(),g=(0,e.useCallback)(async(a,c)=>{b(a=>({...a,isExporting:!0,error:null}));try{await aP.export(a,c),D.o.success(`Relat\xf3rio exportado com sucesso em formato ${c.format.toUpperCase()}!`,{description:`Arquivo: ${c.filename||"relatorio"}.${"pdf"===c.format?"pdf":"xlsx"}`})}catch(c){let a=c instanceof Error?c.message:"Erro desconhecido";b(b=>({...b,error:a})),D.o.error("Erro ao exportar relat\xf3rio",{description:a})}finally{b(a=>({...a,isExporting:!1}))}},[]),h=(0,e.useCallback)(async(a,b)=>{let d=c;b?.category&&(d=c.filter(a=>a.category===b.category));let e=aP.formatMetricsForExport(d,"Relat\xf3rio de M\xe9tricas",b?.dateRange?`Per\xedodo: ${b.dateRange.start.toLocaleDateString()} - ${b.dateRange.end.toLocaleDateString()}`:void 0);b&&(e.metadata={...e.metadata,filters:b}),await e(e,{...a,filename:a.filename||`metricas_${new Date().toISOString().split("T")[0]}`})},[c,g]),i=(0,e.useCallback)(async(a,b)=>{let c=d;b?.status&&(c=d.filter(a=>a.status===b.status)),b?.category&&(c=d.filter(a=>a.category===b.category));let e=aP.formatKPIsForExport(c,"Relat\xf3rio de KPIs","Indicadores Chave de Performance");b&&(e.metadata={...e.metadata,filters:b}),await e(e,{...a,filename:a.filename||`kpis_${new Date().toISOString().split("T")[0]}`})},[d,g]),j=(0,e.useCallback)(async(a,b)=>{let c=f;b?.severity&&b.severity.length>0&&(c=f.filter(a=>b.severity.includes(a.severity))),b?.isResolved!==void 0&&(c=c.filter(a=>a.isResolved===b.isResolved)),b?.dateRange&&(c=c.filter(a=>{let c=new Date(a.triggeredAt);return c>=b.dateRange.start&&c<=b.dateRange.end}));let d=aP.formatAlertsForExport(c,"Relat\xf3rio de Alertas",b?.dateRange?`Per\xedodo: ${b.dateRange.start.toLocaleDateString()} - ${b.dateRange.end.toLocaleDateString()}`:void 0);b&&(d.metadata={...d.metadata,filters:b}),await d(d,{...a,filename:a.filename||`alertas_${new Date().toISOString().split("T")[0]}`})},[f,g]),k=(0,e.useCallback)(async(a,b=!1)=>{let e={title:"Relat\xf3rio Completo do Dashboard BI",subtitle:`Gerado em ${new Date().toLocaleDateString("pt-BR")}`,headers:["Se\xe7\xe3o","Item","Valor","Status","Observa\xe7\xf5es"],data:[],metadata:{generatedAt:new Date,generatedBy:"Sistema BI",filters:{includeCharts:b,sections:["metrics","kpis","alerts"]}}};c.forEach(a=>{e.data.push(["M\xe9tricas",a.name||a.label,`${a.value} ${a.unit||""}`,"Ativo",a.description||""])}),d.forEach(a=>{e.data.push(["KPIs",a.name||a.label,`${a.currentValue} (Meta: ${a.target||"N/A"})`,a.status||"N/A",a.variation?`Varia\xe7\xe3o: ${a.variation>0?"+":""}${a.variation}%`:""])}),f.filter(a=>!a.isResolved).forEach(a=>{e.data.push(["Alertas",a.title,a.severity.toUpperCase(),a.isResolved?"Resolvido":"Ativo",a.message])}),await g(e,{...a,filename:a.filename||`dashboard_completo_${new Date().toISOString().split("T")[0]}`,includeCharts:b})},[c,d,f,g]);return{...a,exportData:g,exportMetrics:h,exportKPIs:i,exportAlerts:j,exportDashboard:k}}function aT({trigger:a,defaultType:b="dashboard",title:c="Exportar Relat\xf3rio",open:f,onOpenChange:g,onExport:i,isExporting:j}){let[n,p]=(0,e.useState)(!1),q=g||p,[r,s]=(0,e.useState)(b),[t,u]=(0,e.useState)("pdf"),[v,x]=(0,e.useState)(""),[y,A]=(0,e.useState)("portrait"),[B,C]=(0,e.useState)(!0),[D,E]=(0,e.useState)(!1),[F,G]=(0,e.useState)({category:"",severity:[],status:"",isResolved:void 0,dateRange:{start:"",end:""}}),{isExporting:H,exportMetrics:I,exportKPIs:J,exportAlerts:K,exportDashboard:L}=aS(),M=void 0!==j?j:H,N=async()=>{let a={format:t,filename:v||void 0,orientation:y,includeMetadata:B,includeCharts:D};try{if(i)await i(r,t,a);else switch(r){case"metrics":await I(a,{category:F.category||void 0,dateRange:F.dateRange.start&&F.dateRange.end?{start:new Date(F.dateRange.start),end:new Date(F.dateRange.end)}:void 0});break;case"kpis":await J(a,{status:F.status||void 0,category:F.category||void 0});break;case"alerts":await K(a,{severity:F.severity.length>0?F.severity:void 0,isResolved:F.isResolved,dateRange:F.dateRange.start&&F.dateRange.end?{start:new Date(F.dateRange.start),end:new Date(F.dateRange.end)}:void 0});break;case"dashboard":await L(a,D)}q(!1)}catch(a){}};return(0,d.jsxs)(ar.lG,{open:void 0!==f?f:n,onOpenChange:q,children:[(0,d.jsx)(ar.zM,{asChild:!0,children:a||(0,d.jsxs)(h.$,{variant:"outline",size:"sm",children:[(0,d.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Exportar"]})}),(0,d.jsxs)(ar.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)(ar.c7,{children:[(0,d.jsxs)(ar.L3,{className:"flex items-center gap-2",children:[(0,d.jsx)(o.A,{className:"h-5 w-5"}),c]}),(0,d.jsx)(ar.rr,{children:"Configure as op\xe7\xf5es de exporta\xe7\xe3o para gerar seu relat\xf3rio."})]}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(l.Label,{className:"text-sm font-medium",children:"Tipo de Relat\xf3rio"}),(0,d.jsx)(aI.z,{value:r,onValueChange:a=>s(a),className:"grid grid-cols-2 gap-4",children:["metrics","kpis","alerts","dashboard"].map(a=>(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(aI.C,{value:a,id:a}),(0,d.jsxs)(l.Label,{htmlFor:a,className:"flex items-center gap-2 cursor-pointer",children:[(a=>{switch(a){case"metrics":return(0,d.jsx)(z.A,{className:"h-4 w-4"});case"kpis":return(0,d.jsx)(aJ.A,{className:"h-4 w-4"});case"alerts":return(0,d.jsx)(w.A,{className:"h-4 w-4"});case"dashboard":return(0,d.jsx)(aK.A,{className:"h-4 w-4"});default:return(0,d.jsx)(o.A,{className:"h-4 w-4"})}})(a),(a=>{switch(a){case"metrics":return"M\xe9tricas";case"kpis":return"KPIs";case"alerts":return"Alertas";case"dashboard":return"Dashboard Completo";default:return"Relat\xf3rio"}})(a)]})]},a))})]}),(0,d.jsx)(m.Separator,{}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"format",children:"Formato"}),(0,d.jsxs)(k.l6,{value:t,onValueChange:a=>u(a),children:[(0,d.jsx)(k.bq,{children:(0,d.jsx)(k.yv,{})}),(0,d.jsxs)(k.gC,{children:[(0,d.jsx)(k.eb,{value:"pdf",children:"PDF"}),(0,d.jsx)(k.eb,{value:"excel",children:"Excel"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"orientation",children:"Orienta\xe7\xe3o"}),(0,d.jsxs)(k.l6,{value:y,onValueChange:a=>A(a),children:[(0,d.jsx)(k.bq,{children:(0,d.jsx)(k.yv,{})}),(0,d.jsxs)(k.gC,{children:[(0,d.jsx)(k.eb,{value:"portrait",children:"Retrato"}),(0,d.jsx)(k.eb,{value:"landscape",children:"Paisagem"})]})]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"filename",children:"Nome do Arquivo (opcional)"}),(0,d.jsx)(ao.p,{id:"filename",value:v,onChange:a=>x(a.target.value),placeholder:"Ex: relatorio_mensal"})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(l.Label,{className:"text-sm font-medium",children:"Op\xe7\xf5es Avan\xe7adas"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(S.S,{id:"metadata",checked:B,onCheckedChange:a=>C(a)}),(0,d.jsx)(l.Label,{htmlFor:"metadata",className:"text-sm",children:"Incluir metadados (data de gera\xe7\xe3o, filtros aplicados)"})]}),"dashboard"===r&&(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(S.S,{id:"charts",checked:D,onCheckedChange:a=>E(a)}),(0,d.jsx)(l.Label,{htmlFor:"charts",className:"text-sm",children:"Incluir gr\xe1ficos (apenas PDF)"})]})]}),(0,d.jsx)(m.Separator,{}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(l.Label,{className:"text-sm font-medium",children:"Filtros"}),("metrics"===r||"kpis"===r)&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"category",className:"text-xs",children:"Categoria"}),(0,d.jsxs)(k.l6,{value:F.category,onValueChange:a=>G(b=>({...b,category:a})),children:[(0,d.jsx)(k.bq,{children:(0,d.jsx)(k.yv,{placeholder:"Todas as categorias"})}),(0,d.jsxs)(k.gC,{children:[(0,d.jsx)(k.eb,{value:"",children:"Todas as categorias"}),(0,d.jsx)(k.eb,{value:"appointments",children:"Agendamentos"}),(0,d.jsx)(k.eb,{value:"billing",children:"Faturamento"}),(0,d.jsx)(k.eb,{value:"beds",children:"Leitos"}),(0,d.jsx)(k.eb,{value:"patients",children:"Pacientes"})]})]})]}),"alerts"===r&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{className:"text-xs",children:"Severidade"}),(0,d.jsx)("div",{className:"flex flex-wrap gap-2",children:["low","medium","high","critical"].map(a=>(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(S.S,{id:`severity-${a}`,checked:F.severity.includes(a),onCheckedChange:b=>{b?G(b=>({...b,severity:[...b.severity,a]})):G(b=>({...b,severity:b.severity.filter(b=>b!==a)}))}}),(0,d.jsx)(l.Label,{htmlFor:`severity-${a}`,className:"text-xs capitalize",children:"low"===a?"Baixa":"medium"===a?"M\xe9dia":"high"===a?"Alta":"Cr\xedtica"})]},a))})]}),("metrics"===r||"alerts"===r)&&(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"start-date",className:"text-xs",children:"Data Inicial"}),(0,d.jsx)(ao.p,{id:"start-date",type:"date",value:F.dateRange.start,onChange:a=>G(b=>({...b,dateRange:{...b.dateRange,start:a.target.value}}))})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"end-date",className:"text-xs",children:"Data Final"}),(0,d.jsx)(ao.p,{id:"end-date",type:"date",value:F.dateRange.end,onChange:a=>G(b=>({...b,dateRange:{...b.dateRange,end:a.target.value}}))})]})]})]})]}),(0,d.jsxs)(ar.Es,{children:[(0,d.jsx)(h.$,{variant:"outline",onClick:()=>q(!1),children:"Cancelar"}),(0,d.jsx)(h.$,{onClick:N,disabled:M,children:M?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exportando..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Exportar ",t.toUpperCase()]})})]})]})]})}var aU=c(31074),aV=c(51423),aW=c(54050),aX=c(59556);class aY{async getDashboards(a={}){let b=new URLSearchParams;return Object.entries(a).forEach(([a,c])=>{null!=c&&(Array.isArray(c)?c.forEach(c=>b.append(a,c.toString())):b.append(a,c.toString()))}),(await aX.A.get(`${this.baseUrl}/dashboards?${b}`)).data}async getDashboard(a){return(await aX.A.get(`${this.baseUrl}/dashboards/${a}`)).data}async createDashboard(a){return(await aX.A.post(`${this.baseUrl}/dashboards`,a)).data}async updateDashboard(a,b){return(await aX.A.put(`${this.baseUrl}/dashboards/${a}`,b)).data}async deleteDashboard(a){await aX.A.delete(`${this.baseUrl}/dashboards/${a}`)}async duplicateDashboard(a,b){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/duplicate`,{name:b||"Copy of Dashboard"})).data}async addWidget(a,b){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/widgets`,b)).data}async updateWidget(a,b,c){return(await aX.A.put(`${this.baseUrl}/dashboards/${a}/widgets/${b}`,c)).data}async deleteWidget(a,b){await aX.A.delete(`${this.baseUrl}/dashboards/${a}/widgets/${b}`)}async moveWidget(a,b,c){return(await aX.A.patch(`${this.baseUrl}/dashboards/${a}/widgets/${b}/position`,c)).data}async resizeWidget(a,b,c){return(await aX.A.patch(`${this.baseUrl}/dashboards/${a}/widgets/${b}/size`,c)).data}async updateLayout(a,b){return(await aX.A.put(`${this.baseUrl}/dashboards/${a}/layout`,b)).data}async saveLayoutPreset(a,b,c){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/layout-presets`,{name:b,layout:c})).data}async getLayoutPresets(a){return(await aX.A.get(`${this.baseUrl}/dashboards/${a}/layout-presets`)).data}async updateFilters(a,b){return(await aX.A.put(`${this.baseUrl}/dashboards/${a}/filters`,{filters:b})).data}async getFilterOptions(a,b){return(await aX.A.get(`${this.baseUrl}/dashboards/${a}/filters/${b}/options`)).data}async getAvailableDataSources(){return(await aX.A.get(`${this.baseUrl}/data-sources`)).data}async testDataSource(a){return(await aX.A.post(`${this.baseUrl}/data-sources/test`,a)).data}async getDataSourceSchema(a){return(await aX.A.post(`${this.baseUrl}/data-sources/schema`,a)).data}async previewData(a,b=10){return(await aX.A.post(`${this.baseUrl}/data-sources/preview`,{...a,limit:b})).data}async getWidgetData(a,b,c){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/widgets/${b}/data`,{filters:c})).data}async refreshWidgetData(a,b){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/widgets/${b}/refresh`)).data}async refreshAllWidgets(a){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/refresh`)).data}async getTemplates(a){let b=a?`?category=${a}`:"";return(await aX.A.get(`${this.baseUrl}/templates${b}`)).data}async getTemplate(a){return(await aX.A.get(`${this.baseUrl}/templates/${a}`)).data}async createFromTemplate(a,b,c){return(await aX.A.post(`${this.baseUrl}/templates/${a}/create`,{name:b,customizations:c})).data}async saveAsTemplate(a,b){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/save-as-template`,b)).data}async shareDashboard(a,b){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/share`,b)).data}async getSharedDashboards(){return(await aX.A.get(`${this.baseUrl}/shared`)).data}async revokeShare(a,b){await aX.A.delete(`${this.baseUrl}/dashboards/${a}/share/${b}`)}async getComments(a){return(await aX.A.get(`${this.baseUrl}/dashboards/${a}/comments`)).data}async addComment(a,b){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/comments`,b)).data}async updateComment(a,b,c){return(await aX.A.put(`${this.baseUrl}/dashboards/${a}/comments/${b}`,{content:c})).data}async deleteComment(a,b){await aX.A.delete(`${this.baseUrl}/dashboards/${a}/comments/${b}`)}async resolveComment(a,b){return(await aX.A.patch(`${this.baseUrl}/dashboards/${a}/comments/${b}/resolve`)).data}async exportDashboard(a,b){return(await aX.A.post(`${this.baseUrl}/dashboards/${a}/export`,b,{responseType:"blob"})).data}async importDashboard(a){let b=new FormData;return b.append("file",a),(await aX.A.post(`${this.baseUrl}/dashboards/import`,b,{headers:{"Content-Type":"multipart/form-data"}})).data}async getDashboardAnalytics(a,b="30d"){return(await aX.A.get(`${this.baseUrl}/dashboards/${a}/analytics?period=${b}`)).data}async getPopularDashboards(a=10){return(await aX.A.get(`${this.baseUrl}/dashboards/popular?limit=${a}`)).data}async getRecentDashboards(a=10){return(await aX.A.get(`${this.baseUrl}/dashboards/recent?limit=${a}`)).data}async trackView(a){await aX.A.post(`${this.baseUrl}/dashboards/${a}/view`)}async getSystemConfig(){return(await aX.A.get(`${this.baseUrl}/config`)).data}async updateSystemConfig(a){return(await aX.A.put(`${this.baseUrl}/config`,a)).data}async getUserPreferences(){return(await aX.A.get(`${this.baseUrl}/preferences`)).data}async updateUserPreferences(a){return(await aX.A.put(`${this.baseUrl}/preferences`,a)).data}async clearCache(a){let b=a?`${this.baseUrl}/dashboards/${a}/cache`:`${this.baseUrl}/cache`;await aX.A.delete(b)}async getCacheStatus(a){return(await aX.A.get(`${this.baseUrl}/dashboards/${a}/cache/status`)).data}async subscribeToUpdates(a,b){return()=>{}}generateWidgetId(){return`widget_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateDashboardId(){return`dashboard_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}validateDashboardConfig(a){let b=[];return a.name&&0!==a.name.trim().length||b.push("Nome do dashboard \xe9 obrigat\xf3rio"),a.type||b.push("Tipo do dashboard \xe9 obrigat\xf3rio"),a.category||b.push("Categoria do dashboard \xe9 obrigat\xf3ria"),a.widgets&&a.widgets.forEach((a,c)=>{a.title&&0!==a.title.trim().length||b.push(`Widget ${c+1}: T\xedtulo \xe9 obrigat\xf3rio`),a.type||b.push(`Widget ${c+1}: Tipo \xe9 obrigat\xf3rio`)}),{isValid:0===b.length,errors:b}}formatDashboardUrl(a){return`/bi/dashboard/${a}`}formatShareUrl(a){return`/bi/shared/${a}`}constructor(){this.baseUrl="/api/bi"}}let aZ=new aY,a$={dashboards:["bi","dashboards"],dashboard:a=>["bi","dashboard",a],widgets:a=>["bi","widgets",a],widgetData:a=>["bi","widget-data",a],templates:["bi","templates"]},a_={config:a=>["bi","dashboard-config",a],layout:a=>["bi","dashboard-layout",a],templates:["bi","dashboard-templates"],permissions:a=>["bi","dashboard-permissions",a]},a0={theme:"light",layout:"grid",autoRefresh:{enabled:!0,interval:3e5},performance:{enableVirtualization:!0,maxConcurrentRequests:5,cacheTimeout:3e5},accessibility:{highContrast:!1,reducedMotion:!1,screenReaderOptimized:!1}},a1={id:"default",type:"grid",columns:12,rows:"auto",gap:16,padding:16,responsive:!0,breakpoints:{xs:0,sm:576,md:768,lg:992,xl:1200}},a2=["light","dark","auto","high-contrast","blue","green","purple","custom"],a3={summary:{totalPatients:1247,totalRevenue:285e4,occupancyRate:87.5,satisfaction:4.6},trends:{patients:{value:12,direction:"up"},revenue:{value:8.5,direction:"up"},occupancy:{value:-2.1,direction:"down"},satisfaction:{value:.3,direction:"up"}},alerts:[{id:"1",type:"warning",title:"Taxa de ocupa\xe7\xe3o baixa",message:"UTI com apenas 65% de ocupa\xe7\xe3o",timestamp:new Date,department:"UTI"},{id:"2",type:"critical",title:"Meta de receita n\xe3o atingida",message:"Receita mensal 15% abaixo da meta",timestamp:new Date,department:"Financeiro"}]},a4=[{name:"Jan",pacientes:1200,receita:24e5,ocupacao:85},{name:"Fev",pacientes:1350,receita:265e4,ocupacao:88},{name:"Mar",pacientes:1180,receita:23e5,ocupacao:82},{name:"Abr",pacientes:1420,receita:28e5,ocupacao:91},{name:"Mai",pacientes:1380,receita:275e4,ocupacao:89},{name:"Jun",pacientes:1247,receita:285e4,ocupacao:87}],a5=[{value:"all",label:"Todos os Departamentos"},{value:"emergency",label:"Emerg\xeancia"},{value:"icu",label:"UTI"},{value:"surgery",label:"Cirurgia"},{value:"cardiology",label:"Cardiologia"},{value:"pediatrics",label:"Pediatria"},{value:"oncology",label:"Oncologia"}],a6=[{value:"today",label:"Hoje"},{value:"week",label:"Esta Semana"},{value:"month",label:"Este M\xeas"},{value:"quarter",label:"Este Trimestre"},{value:"year",label:"Este Ano"},{value:"custom",label:"Per\xedodo Personalizado"}];function a7(){let[a,b]=(0,e.useState)({period:"month",department:"all"}),[c,I]=(0,e.useState)("grid"),[J,K]=(0,e.useState)(!1),[L,M]=(0,e.useState)("overview"),[N,O]=(0,e.useState)(!1),[P,Q]=(0,e.useState)(!1),{dashboard:R,isLoading:S,widgets:T,selectedWidget:U,filters:V,activeFilters:W,layout:X,isEditMode:Y,createDashboard:Z,updateDashboard:$,deleteDashboard:_,addWidget:aa,removeWidget:ab,updateWidget:ac,selectWidget:ad,moveWidget:ae,resizeWidget:af,applyFilter:ag,removeFilter:ah,clearFilters:aj,toggleEditMode:ak,refreshData:al}=function(a={}){let{dashboardId:b,autoRefresh:c=!1,refreshInterval:d=3e4,enableRealtime:f=!1}=a,g=(0,aU.jE)(),[h,i]=(0,e.useState)(null),[j,k]=(0,e.useState)({}),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)({}),[p,q]=(0,e.useState)(new Set),{data:r=[],isLoading:s,error:t}=(0,aV.I)({queryKey:a$.dashboards,queryFn:()=>aZ.getDashboards(),staleTime:3e5}),{data:u,isLoading:v,error:w,refetch:x}=(0,aV.I)({queryKey:a$.dashboard(b||""),queryFn:()=>aZ.getDashboard(b),enabled:!!b,refetchInterval:!!c&&d,staleTime:3e5*!c}),{data:y=[],isLoading:z,error:A}=(0,aV.I)({queryKey:a$.widgets(b||""),queryFn:()=>aZ.getDashboardWidgets(b),enabled:!!b,refetchInterval:!!c&&d}),B=t||w||A,C=(0,e.useMemo)(()=>u?.settings?.filters||[],[u]),E=(0,e.useMemo)(()=>u?.layout||null,[u]),F=(0,aW.n)({mutationFn:aZ.createDashboard,onSuccess:a=>{g.invalidateQueries({queryKey:a$.dashboards}),D.o.success("Dashboard criado com sucesso!")},onError:a=>{D.o.error("Erro ao criar dashboard: "+a.message)}}),G=(0,aW.n)({mutationFn:({id:a,data:b})=>aZ.updateDashboard(a,b),onSuccess:a=>{g.invalidateQueries({queryKey:a$.dashboard(a.id)}),g.invalidateQueries({queryKey:a$.dashboards}),D.o.success("Dashboard atualizado com sucesso!")},onError:a=>{D.o.error("Erro ao atualizar dashboard: "+a.message)}}),H=(0,aW.n)({mutationFn:aZ.deleteDashboard,onSuccess:()=>{g.invalidateQueries({queryKey:a$.dashboards}),D.o.success("Dashboard exclu\xeddo com sucesso!")},onError:a=>{D.o.error("Erro ao excluir dashboard: "+a.message)}}),I=(0,aW.n)({mutationFn:({dashboardId:a,config:b})=>aZ.addWidget(a,b),onSuccess:()=>{b&&(g.invalidateQueries({queryKey:a$.widgets(b)}),g.invalidateQueries({queryKey:a$.dashboard(b)})),D.o.success("Widget adicionado com sucesso!")},onError:a=>{D.o.error("Erro ao adicionar widget: "+a.message)}}),J=(0,aW.n)({mutationFn:({id:a,config:b})=>aZ.updateWidget(a,b),onSuccess:()=>{b&&(g.invalidateQueries({queryKey:a$.widgets(b)}),g.invalidateQueries({queryKey:a$.widgetData(h?.id||"")})),D.o.success("Widget atualizado com sucesso!")},onError:a=>{D.o.error("Erro ao atualizar widget: "+a.message)}}),K=(0,aW.n)({mutationFn:aZ.removeWidget,onSuccess:()=>{b&&(g.invalidateQueries({queryKey:a$.widgets(b)}),g.invalidateQueries({queryKey:a$.dashboard(b)})),i(null),D.o.success("Widget removido com sucesso!")},onError:a=>{D.o.error("Erro ao remover widget: "+a.message)}}),L=(0,aW.n)({mutationFn:({dashboardId:a,layout:b})=>aZ.updateDashboardLayout(a,b),onSuccess:()=>{b&&g.invalidateQueries({queryKey:a$.dashboard(b)}),D.o.success("Layout atualizado com sucesso!")},onError:a=>{D.o.error("Erro ao atualizar layout: "+a.message)}}),M=(0,e.useCallback)(async a=>F.mutateAsync(a),[F]),N=(0,e.useCallback)(async(a,b)=>G.mutateAsync({id:a,data:b}),[G]),O=(0,e.useCallback)(async a=>{await H.mutateAsync(a)},[H]),P=(0,e.useCallback)(async(a,b)=>{try{let c=await aZ.duplicateDashboard(a,b);return g.invalidateQueries({queryKey:a$.dashboards}),D.o.success("Dashboard duplicado com sucesso!"),c}catch(a){throw D.o.error("Erro ao duplicar dashboard: "+a.message),a}},[g]),Q=(0,e.useCallback)(async a=>{try{await x(),g.invalidateQueries({queryKey:a$.widgets(a)})}catch(a){throw D.o.error("Erro ao carregar dashboard: "+a.message),a}},[x,g]),R=(0,e.useCallback)(async a=>{if(!b)throw Error("Dashboard ID \xe9 obrigat\xf3rio");return I.mutateAsync({dashboardId:b,config:a})},[b,I]),S=(0,e.useCallback)(async(a,b)=>J.mutateAsync({id:a,config:b}),[J]),T=(0,e.useCallback)(async a=>{await K.mutateAsync(a)},[K]),U=(0,e.useCallback)(async(a,b)=>{let c=y.find(b=>b.id===a);c&&await S(a,{position:{...c.position,...b}})},[y,S]),V=(0,e.useCallback)(async(a,b)=>{let c=y.find(b=>b.id===a);c&&await S(a,{size:{...c.size,...b}})},[y,S]),W=(0,e.useCallback)(async a=>{q(b=>new Set(b).add(a));try{let b=await aZ.getWidgetData(a,j);o(c=>({...c,[a]:b})),g.invalidateQueries({queryKey:a$.widgetData(a)})}catch(a){D.o.error("Erro ao atualizar widget: "+a.message)}finally{q(b=>{let c=new Set(b);return c.delete(a),c})}},[j,g]),X=(0,e.useCallback)(a=>{i(a)},[]),Y=(0,e.useCallback)(async a=>{if(!b)throw Error("Dashboard ID \xe9 obrigat\xf3rio");await L.mutateAsync({dashboardId:b,layout:a})},[b,L]),Z=(0,e.useCallback)(async()=>{b&&u&&await Y({type:"grid",columns:12,rowHeight:100,margin:[10,10],containerPadding:[10,10],breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2}})},[b,u,Y]),$=(0,e.useCallback)(async()=>{b&&E&&await Y(E)},[b,E,Y]),_=(0,e.useCallback)((a,b)=>{k(c=>({...c,[a]:b})),y.forEach(a=>{W(a.id)})},[y,W]),aa=(0,e.useCallback)(a=>{k(b=>{let c={...b};return delete c[a],c}),y.forEach(a=>{W(a.id)})},[y,W]),ab=(0,e.useCallback)(()=>{k({}),y.forEach(a=>{W(a.id)})},[y,W]),ac=(0,e.useCallback)(async a=>{if(!b||!u)return;let c={...u.settings,filters:a};await N(b,{settings:c})},[b,u,N]),ad=(0,e.useCallback)(()=>{m(!0)},[]),ae=(0,e.useCallback)(()=>{m(!1),i(null)},[]),af=(0,e.useCallback)(()=>{m(a=>!a),l&&i(null)},[l]),ag=(0,e.useCallback)(async()=>{if(b)try{await x(),await Promise.all(y.map(a=>W(a.id))),D.o.success("Dados atualizados com sucesso!")}catch(a){D.o.error("Erro ao atualizar dados: "+a.message)}},[b,x,y,W]),ah=(0,e.useCallback)(async a=>{if(!b)throw Error("Dashboard ID \xe9 obrigat\xf3rio");try{let c=await aZ.exportDashboard(b,a),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`dashboard-${u?.name||"export"}.${a}`,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(d),D.o.success("Dashboard exportado com sucesso!")}catch(a){D.o.error("Erro ao exportar dashboard: "+a.message)}},[b,u]),ai=(0,e.useCallback)(async(a,c)=>{if(!b)throw Error("Dashboard ID \xe9 obrigat\xf3rio");try{let d=await aZ.saveAsTemplate(b,{name:a,description:c});return g.invalidateQueries({queryKey:a$.templates}),D.o.success("Template salvo com sucesso!"),d}catch(a){throw D.o.error("Erro ao salvar template: "+a.message),a}},[b,g]),aj=(0,e.useCallback)(async a=>{if(!b)throw Error("Dashboard ID \xe9 obrigat\xf3rio");try{await aZ.loadFromTemplate(b,a),await Q(b),D.o.success("Template carregado com sucesso!")}catch(a){throw D.o.error("Erro ao carregar template: "+a.message),a}},[b,Q]),ak=(0,e.useCallback)(a=>n[a]||null,[n]),al=(0,e.useCallback)(a=>p.has(a),[p]),am=(0,e.useCallback)(()=>({filters:j,widgets:y.map(a=>({...a,data:ak(a.id)}))}),[j,y,ak]);return{dashboard:u||null,dashboards:r,isLoading:s||v||z,isError:!!B,error:B,widgets:y,selectedWidget:h,filters:C,activeFilters:j,layout:E,isEditMode:l,createDashboard:M,updateDashboard:N,deleteDashboard:O,duplicateDashboard:P,loadDashboard:Q,addWidget:R,updateWidget:S,removeWidget:T,moveWidget:U,resizeWidget:V,refreshWidget:W,selectWidget:X,updateLayout:Y,resetLayout:Z,saveLayout:$,applyFilter:_,removeFilter:aa,clearFilters:ab,updateFilterConfig:ac,enterEditMode:ad,exitEditMode:ae,toggleEditMode:af,refreshData:ag,exportDashboard:ah,saveAsTemplate:ai,loadFromTemplate:aj,getWidgetData:ak,isWidgetLoading:al,getFilteredData:am}}(),{metrics:am,isLoading:an,clinicalMetrics:ao,financialMetrics:ap,operationalMetrics:aq,createMetric:ar,updateMetric:as,deleteMetric:at,refreshData:au}=(0,aQ.B)(),{kpis:av,isLoading:aw,clinicalKPIs:ax,financialKPIs:az,operationalKPIs:aA,staffKPIs:aB,createKPI:aC,updateKPI:aD,deleteKPI:aE,refreshData:aF}=(0,aR.h)(),{config:aG,layout:aI,updateConfig:aJ,updateLayout:aK,addWidget:aL,removeWidget:aM}=function(a={}){let{dashboardId:b,autoSave:c=!0,autoSaveDelay:d=2e3,enableDragDrop:f=!0,enableResize:g=!0,enableFilters:h=!0,enableExport:i=!0,enableSharing:j=!0,defaultLayout:k="grid",defaultTheme:l="light",maxWidgets:m=20,gridSize:n=8,snapToGrid:o=!0}=a,p=(0,aU.jE)(),[q,r]=(0,e.useState)(null),[s,t]=(0,e.useState)(null),[u,v]=(0,e.useState)([]),[w,x]=(0,e.useState)([]),[y,z]=(0,e.useState)(null),[A,B]=(0,e.useState)(null),[C,E]=(0,e.useState)(null),[F,G]=(0,e.useState)(!1),[H,I]=(0,e.useState)(!1),[J,K]=(0,e.useState)(!0),[L,M]=(0,e.useState)(o),[N,O]=(0,e.useState)(l),[P,Q]=(0,e.useState)({}),[R,S]=(0,e.useState)(null),{data:T,isLoading:U,error:V,refetch:W}=(0,aV.I)({queryKey:a_.config(b),queryFn:()=>b?aZ.getDashboardSettings(b):Promise.resolve(a0),enabled:!!b,staleTime:3e5}),{data:X,isLoading:Y,refetch:Z}=(0,aV.I)({queryKey:a_.layout(b),queryFn:()=>b?aZ.getDashboardLayout(b):Promise.resolve(a1),enabled:!!b,staleTime:3e5}),{data:$=[],isLoading:_}=(0,aV.I)({queryKey:a_.templates,queryFn:()=>aZ.getDashboardTemplates(),staleTime:6e5}),{data:aa,isLoading:ab}=(0,aV.I)({queryKey:a_.permissions(b),queryFn:()=>b?aZ.getDashboardPermissions(b):Promise.resolve(null),enabled:!!b&&j,staleTime:3e5}),ac=(0,aW.n)({mutationFn:({dashboardId:a,config:b})=>aZ.updateDashboardSettings(a,b),onSuccess:()=>{p.invalidateQueries({queryKey:a_.config(b)}),I(!1),D.o.success("Configura\xe7\xf5es salvas com sucesso!")},onError:a=>{D.o.error("Erro ao salvar configura\xe7\xf5es: "+a.message)}}),ad=(0,aW.n)({mutationFn:({dashboardId:a,layout:b})=>aZ.updateDashboardLayout(a,b),onSuccess:()=>{p.invalidateQueries({queryKey:a_.layout(b)}),I(!1),D.o.success("Layout salvo com sucesso!")},onError:a=>{D.o.error("Erro ao salvar layout: "+a.message)}}),ae=(0,e.useCallback)(async a=>{if(!b){r(b=>({...b,...a})),I(!0);return}try{await ac.mutateAsync({dashboardId:b,config:a}),r(b=>({...b,...a}))}catch(a){}},[b,ac]),af=(0,e.useCallback)(async()=>{r(a0),I(!0),D.o.success("Configura\xe7\xf5es resetadas!")},[]),ag=(0,e.useCallback)(async()=>{if(b&&q)try{await ac.mutateAsync({dashboardId:b,config:q})}catch(a){}},[b,q,ac]),ah=(0,e.useCallback)(async a=>{try{let b=await aZ.getDashboardSettings(a);r(b),p.setQueryData(a_.config(a),b),D.o.success("Configura\xe7\xf5es carregadas!")}catch(a){D.o.error("Erro ao carregar configura\xe7\xf5es: "+a.message)}},[p]),ai=(0,e.useCallback)(a=>{t(b=>({...b,...a})),I(!0)},[]),aj=(0,e.useCallback)(()=>{t(a1),v([]),I(!0),D.o.success("Layout resetado!")},[]),ak=(0,e.useCallback)(async()=>{if(b&&s)try{let a={...s,widgets:u};await ad.mutateAsync({dashboardId:b,layout:a})}catch(a){}},[b,s,u,ad]),al=(0,e.useCallback)(async a=>{try{let b=await aZ.getDashboardLayout(a);t(b),b.widgets&&v(b.widgets),p.setQueryData(a_.layout(a),b),D.o.success("Layout carregado!")}catch(a){D.o.error("Erro ao carregar layout: "+a.message)}},[p]),am=(0,e.useCallback)(a=>{if(u.length>=m)return void D.o.error(`M\xe1ximo de ${m} widgets permitidos`);let b={id:`widget-${Date.now()}`,type:"metric",title:"Novo Widget",position:{x:0,y:0,z:0},size:{width:4,height:3},config:{},dataSource:{type:"api",config:{}},visualization:{type:"card",config:{}},isVisible:!0,isResizable:g,isDraggable:f,...a};v(a=>[...a,b]),I(!0),D.o.success("Widget adicionado!")},[u.length,m,g,f]),an=(0,e.useCallback)((a,b)=>{v(c=>c.map(c=>c.id===a?{...c,...b}:c)),I(!0)},[]),ao=(0,e.useCallback)(a=>{v(b=>b.filter(b=>b.id!==a)),y?.id===a&&z(null),I(!0),D.o.success("Widget removido!")},[y]),ap=(0,e.useCallback)(a=>{let b=u.find(b=>b.id===a);if(!b)return;let c={...b,id:`widget-${Date.now()}`,title:`${b.title} (C\xf3pia)`,position:{...b.position,x:b.position.x+1,y:b.position.y+1}};v(a=>[...a,c]),I(!0),D.o.success("Widget duplicado!")},[u]),aq=(0,e.useCallback)((a,b)=>{an(a,{position:b})},[an]),ar=(0,e.useCallback)((a,b)=>{an(a,{size:b})},[an]),as=(0,e.useCallback)(a=>{z(a)},[]),at=(0,e.useCallback)((a,b)=>{an(a,{config:{...u.find(b=>b.id===a)?.config,...b}})},[an,u]),au=(0,e.useCallback)((a,b)=>{let c=u.find(b=>b.id===a);c&&an(a,{dataSource:{...c.dataSource,config:{...c.dataSource.config,...b}}})},[an,u]),av=(0,e.useCallback)(async a=>{try{await aZ.refreshWidget(a),D.o.success("Widget atualizado!")}catch(a){D.o.error("Erro ao atualizar widget: "+a.message)}},[]),aw=(0,e.useCallback)(async()=>{try{await Promise.all(u.map(a=>aZ.refreshWidget(a.id))),D.o.success("Todos os widgets foram atualizados!")}catch(a){D.o.error("Erro ao atualizar widgets: "+a.message)}},[u]),ax=(0,e.useCallback)(a=>{let b={id:`filter-${Date.now()}`,name:"Novo Filtro",type:"select",options:[],isRequired:!1,isVisible:!0,...a};x(a=>[...a,b]),I(!0),D.o.success("Filtro adicionado!")},[]),ay=(0,e.useCallback)((a,b)=>{x(c=>c.map(c=>c.id===a?{...c,...b}:c)),I(!0)},[]),az=(0,e.useCallback)(a=>{x(b=>b.filter(b=>b.id!==a)),I(!0),D.o.success("Filtro removido!")},[]),aA=(0,e.useCallback)(a=>{u.forEach(b=>{aZ.applyFiltersToWidget(b.id,a)}),D.o.success("Filtros aplicados!")},[u]),aB=(0,e.useCallback)(()=>{u.forEach(a=>{aZ.clearWidgetFilters(a.id)}),D.o.success("Filtros limpos!")},[u]),aC=(0,e.useCallback)(a=>{O(a),ae({theme:a})},[ae]),aD=(0,e.useCallback)(a=>{Q(a),ae({customColors:a})},[ae]),aE=(0,e.useCallback)(()=>{aC(l),Q({})},[aC,l]),aF=(0,e.useCallback)(async(a,b="")=>{if(!s||!q)throw Error("Nenhuma configura\xe7\xe3o para salvar");try{let c=await aZ.createDashboardTemplate({name:a,description:b,layout:s,settings:q,widgets:u,filters:w,category:"custom",difficulty:"intermediate",tags:[]});return p.invalidateQueries({queryKey:a_.templates}),D.o.success("Template salvo com sucesso!"),c}catch(a){throw D.o.error("Erro ao salvar template: "+a.message),a}},[s,q,u,w,p]),aG=(0,e.useCallback)(async a=>{try{let b=await aZ.getDashboardTemplate(a);b.layout&&t(b.layout),b.settings&&r(b.settings),b.widgets&&v(b.widgets),b.filters&&x(b.filters),I(!0),D.o.success("Template carregado com sucesso!")}catch(a){D.o.error("Erro ao carregar template: "+a.message)}},[]),aH=(0,e.useCallback)(async a=>{try{await aZ.deleteDashboardTemplate(a),p.invalidateQueries({queryKey:a_.templates}),D.o.success("Template exclu\xeddo com sucesso!")}catch(a){D.o.error("Erro ao excluir template: "+a.message)}},[p]),aI=(0,e.useCallback)(async a=>{if(b)try{await aZ.updateDashboardPermissions(b,a),p.invalidateQueries({queryKey:a_.permissions(b)}),D.o.success("Permiss\xf5es atualizadas!")}catch(a){D.o.error("Erro ao atualizar permiss\xf5es: "+a.message)}},[b,p]),aJ=(0,e.useCallback)(async(a,c)=>{if(b)try{await aZ.shareDashboard(b,a,c),p.invalidateQueries({queryKey:a_.permissions(b)}),D.o.success("Dashboard compartilhado com sucesso!")}catch(a){D.o.error("Erro ao compartilhar dashboard: "+a.message)}},[b,p]),aK=(0,e.useCallback)(()=>{G(!0)},[]),aL=(0,e.useCallback)(()=>{G(!1),z(null),B(null),E(null)},[]),aM=(0,e.useCallback)(()=>{G(a=>!a),F&&aL()},[F,aL]),aN=(0,e.useCallback)(()=>{K(a=>!a)},[]),aO=(0,e.useCallback)(()=>{M(a=>!a)},[]),aP=(0,e.useCallback)(a=>{ai({gap:a})},[ai]),aQ=(0,e.useCallback)(async a=>{if(!q||!s)return void D.o.error("Nenhuma configura\xe7\xe3o para exportar");try{let b={config:q,layout:s,widgets:u,filters:w,theme:N,customColors:P,exportedAt:new Date().toISOString()},c=await aZ.exportDashboardConfig(b,a),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`dashboard-config.${a}`,document.body.appendChild(e),e.click(),document.body.removeChild(e),window.URL.revokeObjectURL(d),D.o.success("Configura\xe7\xe3o exportada com sucesso!")}catch(a){D.o.error("Erro ao exportar configura\xe7\xe3o: "+a.message)}},[q,s,u,w,N,P]),aR=(0,e.useCallback)(async a=>{try{let b=await aZ.importDashboardConfig(a);b.config&&r(b.config),b.layout&&t(b.layout),b.widgets&&v(b.widgets),b.filters&&x(b.filters),b.theme&&O(b.theme),b.customColors&&Q(b.customColors),I(!0),D.o.success("Configura\xe7\xe3o importada com sucesso!")}catch(a){D.o.error("Erro ao importar configura\xe7\xe3o: "+a.message)}},[]),aS=(0,e.useCallback)(()=>!!q&&!!s&&!!s.type&&!!s.columns&&0!==u.length&&u.every(aT),[q,s,u]),aT=(0,e.useCallback)(a=>!!a.id&&!!a.type&&!!a.title&&!!a.position&&!!a.size&&!!a.dataSource&&!!a.visualization&&!0,[]),aX=(0,e.useCallback)(a=>u.find(b=>b.id===a),[u]),aY=(0,e.useCallback)(()=>{if(!s)return[];let a=[],b=u.map(a=>a.position);for(let c=0;c<s.columns;c++)for(let d=0;d<10;d++){let e={x:c,y:d,z:0};b.some(a=>a.x===c&&a.y===d)||a.push(e)}return a},[s,u]),a$=(0,e.useCallback)(()=>{if(!s)return a1;let a=[...u].sort((a,b)=>{let c=a.size.width*a.size.height;return b.size.width*b.size.height-c}),b=0,c=0,d=s.columns;return a.forEach(a=>{b+a.size.width>d&&(b=0,c+=1),a.position={x:b,y:c,z:0},b+=a.size.width}),{...s,widgets:a}},[s,u]);return{config:q,layout:s,widgets:u,filters:w,permissions:aa,templates:$,isLoading:U||Y||_||ab,isError:!!V,error:V,isDirty:H,isEditMode:F,selectedWidget:y,draggedWidget:A,resizingWidget:C,gridEnabled:J,snapEnabled:L,theme:N,availableThemes:a2,customColors:P,updateConfig:ae,resetConfig:af,saveConfig:ag,loadConfig:ah,updateLayout:ai,resetLayout:aj,saveLayout:ak,loadLayout:al,addWidget:am,updateWidget:an,removeWidget:ao,duplicateWidget:ap,moveWidget:aq,resizeWidget:ar,selectWidget:as,configureWidget:at,updateWidgetData:au,refreshWidget:av,refreshAllWidgets:aw,addFilter:ax,updateFilter:ay,removeFilter:az,applyFilters:aA,clearFilters:aB,setTheme:aC,updateCustomColors:aD,resetTheme:aE,saveAsTemplate:aF,loadFromTemplate:aG,deleteTemplate:aH,updatePermissions:aI,shareConfig:aJ,enterEditMode:aK,exitEditMode:aL,toggleEditMode:aM,toggleGrid:aN,toggleSnap:aO,setGridSize:aP,exportConfig:aQ,importConfig:aR,validateConfig:aS,validateWidget:aT,getWidgetById:aX,getAvailablePositions:aY,calculateOptimalLayout:a$,previewLayout:(0,e.useCallback)(a=>{D.o.success("Visualizando layout...")},[])}}(),{exportData:aN,isExporting:aO}=aS(),aP=async(a,b)=>{try{await aN({type:"metrics",data:am,format:a,...b}),D.o.success("M\xe9tricas exportadas com sucesso!")}catch(a){D.o.error("Erro ao exportar m\xe9tricas")}},aX=async(a,b)=>{try{await aN({type:"kpis",data:av,format:a,...b}),D.o.success("KPIs exportados com sucesso!")}catch(a){D.o.error("Erro ao exportar KPIs")}},aY=async(a,b)=>{try{await aN({type:"alerts",data:a3.alerts,format:a,...b}),D.o.success("Alertas exportados com sucesso!")}catch(a){D.o.error("Erro ao exportar alertas")}},a7=async(a,b)=>{try{await aN({type:"dashboard",data:{metrics:am,kpis:av,alerts:a3.alerts},format:a,...b}),D.o.success("Dashboard exportado com sucesso!")}catch(a){D.o.error("Erro ao exportar dashboard")}},a8=[{id:"add-widget",label:"Adicionar Widget",icon:n.A,action:()=>ba()},{id:"export-dashboard",label:"Exportar Dashboard",icon:o.A,action:()=>Q(!0)},{id:"refresh-data",label:"Atualizar Dados",icon:p.A,action:()=>bb()},{id:"toggle-edit",label:J?"Sair da Edi\xe7\xe3o":"Editar Dashboard",icon:J?q.A:r.A,action:()=>K(!J),variant:J?"outline":"default"}],a9=(a,c)=>{b(b=>({...b,[a]:c}))},ba=()=>{D.o.success("Widget adicionado com sucesso!")},bb=async()=>{O(!0);try{await al?.(),D.o.success("Dados atualizados com sucesso!")}catch(a){D.o.error("Erro ao atualizar dados")}finally{O(!1)}},bc=(0,e.useMemo)(()=>[{id:"patients",name:"Total de Pacientes",value:a3.summary.totalPatients,trend:a3.trends.patients,icon:s.A,color:"blue",format:"integer"},{id:"revenue",name:"Receita Total",value:a3.summary.totalRevenue,trend:a3.trends.revenue,icon:t.A,color:"green",format:"currency"},{id:"occupancy",name:"Taxa de Ocupa\xe7\xe3o",value:a3.summary.occupancyRate,trend:a3.trends.occupancy,icon:u.A,color:"orange",format:"percentage"},{id:"satisfaction",name:"Satisfa\xe7\xe3o do Paciente",value:a3.summary.satisfaction,trend:a3.trends.satisfaction,icon:v.A,color:"pink",format:"decimal"}],[]);return(0,d.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard de BI"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"An\xe1lise completa de dados e m\xe9tricas hospitalares"})]}),(0,d.jsx)("div",{className:"flex items-center space-x-2",children:a8.map(a=>{let b=a.icon;return(0,d.jsxs)(h.$,{variant:a.variant||"outline",size:"sm",onClick:a.action,disabled:"refresh-data"===a.id&&N,children:[(0,d.jsx)(b,{className:(0,f.cn)("h-4 w-4","refresh-data"===a.id&&N&&"animate-spin")}),(0,d.jsx)("span",{className:"ml-2 hidden sm:inline",children:a.label})]},a.id)})})]}),(0,d.jsx)(g.Zp,{children:(0,d.jsx)(g.Wu,{className:"pt-6",children:(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(l.Label,{htmlFor:"period",children:"Per\xedodo:"}),(0,d.jsxs)(k.l6,{value:a.period,onValueChange:a=>a9("period",a),children:[(0,d.jsx)(k.bq,{className:"w-40",children:(0,d.jsx)(k.yv,{})}),(0,d.jsx)(k.gC,{children:a6.map(a=>(0,d.jsx)(k.eb,{value:a.value,children:a.label},a.value))})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(l.Label,{htmlFor:"department",children:"Departamento:"}),(0,d.jsxs)(k.l6,{value:a.department,onValueChange:a=>a9("department",a),children:[(0,d.jsx)(k.bq,{className:"w-48",children:(0,d.jsx)(k.yv,{})}),(0,d.jsx)(k.gC,{children:a5.map(a=>(0,d.jsx)(k.eb,{value:a.value,children:a.label},a.value))})]})]}),(0,d.jsx)(m.Separator,{orientation:"vertical",className:"h-6"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(h.$,{variant:"grid"===c?"default":"outline",size:"sm",onClick:()=>I("grid"),children:(0,d.jsx)(x.A,{className:"h-4 w-4"})}),(0,d.jsx)(h.$,{variant:"list"===c?"default":"outline",size:"sm",onClick:()=>I("list"),children:(0,d.jsx)(y.A,{className:"h-4 w-4"})})]})]})})}),(0,d.jsxs)(j.Tabs,{value:L,onValueChange:M,children:[(0,d.jsxs)(j.TabsList,{className:"grid w-full grid-cols-6",children:[(0,d.jsx)(j.TabsTrigger,{value:"overview",children:"Vis\xe3o Geral"}),(0,d.jsx)(j.TabsTrigger,{value:"metrics",children:"M\xe9tricas"}),(0,d.jsx)(j.TabsTrigger,{value:"kpis",children:"KPIs"}),(0,d.jsx)(j.TabsTrigger,{value:"analytics",children:"Analytics"}),(0,d.jsx)(j.TabsTrigger,{value:"alerts",children:"Alertas"}),(0,d.jsx)(j.TabsTrigger,{value:"settings",children:"Configura\xe7\xf5es"})]}),(0,d.jsxs)(j.TabsContent,{value:"overview",className:"space-y-6",children:[(0,d.jsx)("div",{className:(0,f.cn)("grid gap-6","grid"===c?"grid-cols-1 md:grid-cols-2 lg:grid-cols-4":"grid-cols-1"),children:bc.map(a=>(a.icon,(0,d.jsx)(G.f,{metric:{id:a.id,name:a.name,description:`M\xe9trica de ${a.name.toLowerCase()}`,category:"operational",type:E.COUNT,format:a.format,unit:"currency"===a.format?F.BRL:"percentage"===a.format?F.PERCENTAGE:void 0,target:"percentage"===a.format?90:void 0,thresholds:{excellent:"percentage"===a.format?95:void 0,good:"percentage"===a.format?85:void 0,warning:"percentage"===a.format?75:void 0,critical:"percentage"===a.format?65:void 0},createdAt:new Date,updatedAt:new Date},value:{value:a.value,previous:.95*a.value,trend:{direction:a.trend.direction,value:a.trend.value,period:"m\xeas anterior"},status:"good",lastUpdated:new Date},showTrend:!0,showProgress:"percentage"===a.format,animated:!0},a.id)))}),(0,d.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,d.jsx)(H.C,{data:a4,config:{showGrid:!0,showLegend:!0,animation:!0,responsive:!0},type:"line",title:"Tend\xeancia de Pacientes",description:"Evolu\xe7\xe3o mensal do n\xfamero de pacientes",series:[{id:"pacientes",name:"Pacientes",dataKey:"pacientes",type:"line",color:"#3b82f6",visible:!0}],xAxis:{dataKey:"name",label:"M\xeas"},yAxis:{label:"N\xfamero de Pacientes"},height:300}),(0,d.jsx)(H.C,{data:a4,config:{showGrid:!0,showLegend:!0,animation:!0,responsive:!0},type:"bar",title:"Receita Mensal",description:"Receita gerada por m\xeas",series:[{id:"receita",name:"Receita",dataKey:"receita",type:"bar",color:"#10b981",visible:!0}],xAxis:{dataKey:"name",label:"M\xeas"},yAxis:{label:"Receita (R$)",format:"currency"},height:300})]}),(0,d.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,d.jsx)("div",{className:"md:col-span-2",children:(0,d.jsxs)(g.Zp,{children:[(0,d.jsx)(g.aR,{children:(0,d.jsxs)(g.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(w.A,{className:"h-5 w-5 text-yellow-500"}),(0,d.jsx)("span",{children:"Alertas Ativos"}),(0,d.jsx)(i.E,{variant:"secondary",children:a3.alerts.length})]})}),(0,d.jsx)(g.Wu,{children:(0,d.jsx)("div",{className:"space-y-4",children:a3.alerts.map(a=>(0,d.jsxs)("div",{className:(0,f.cn)("flex items-start space-x-3 p-3 rounded-lg border","critical"===a.type?"border-red-200 bg-red-50":"border-yellow-200 bg-yellow-50"),children:["critical"===a.type?(0,d.jsx)(w.A,{className:"h-5 w-5 text-red-500 mt-0.5"}):(0,d.jsx)(w.A,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),(0,d.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h4",{className:"font-medium text-sm",children:a.title}),(0,d.jsx)(i.E,{variant:"outline",className:"text-xs",children:a.department})]}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:a.message}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:a.timestamp.toLocaleString("pt-BR")})]})]},a.id))})})]})}),(0,d.jsx)("div",{children:(0,d.jsx)(H.C,{data:[{name:"Ocupado",value:a3.summary.occupancyRate},{name:"Dispon\xedvel",value:100-a3.summary.occupancyRate}],config:{showGrid:!1,showLegend:!0,animation:!0,responsive:!0},type:"pie",title:"Taxa de Ocupa\xe7\xe3o",description:"Distribui\xe7\xe3o atual dos leitos",series:[{id:"ocupacao",name:"Ocupa\xe7\xe3o",dataKey:"value",type:"pie",visible:!0}],height:300})})]})]}),(0,d.jsx)(j.TabsContent,{value:"metrics",className:"space-y-6",children:(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(z.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"M\xe9tricas Detalhadas"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Visualiza\xe7\xe3o detalhada de todas as m\xe9tricas do sistema"}),(0,d.jsx)(h.$,{onClick:()=>M("overview"),children:"Voltar \xe0 Vis\xe3o Geral"})]})}),(0,d.jsx)(j.TabsContent,{value:"kpis",className:"space-y-6",children:(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(A.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"Indicadores de Performance"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"KPIs estrat\xe9gicos para tomada de decis\xe3o"}),(0,d.jsx)(h.$,{onClick:()=>M("overview"),children:"Voltar \xe0 Vis\xe3o Geral"})]})}),(0,d.jsx)(j.TabsContent,{value:"analytics",className:"space-y-6",children:(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)(B.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"Analytics Avan\xe7ado"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"An\xe1lises preditivas e insights avan\xe7ados"}),(0,d.jsx)(h.$,{onClick:()=>M("overview"),children:"Voltar \xe0 Vis\xe3o Geral"})]})}),(0,d.jsx)(j.TabsContent,{value:"alerts",className:"space-y-6",children:(0,d.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,d.jsx)("div",{className:"lg:col-span-2",children:(0,d.jsx)(ai,{})}),(0,d.jsx)("div",{children:(0,d.jsx)(ay,{})})]})}),(0,d.jsx)(j.TabsContent,{value:"settings",className:"space-y-6",children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Configura\xe7\xf5es do Sistema BI"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Configure alertas, notifica\xe7\xf5es e prefer\xeancias do dashboard."})]}),(0,d.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,d.jsx)(aH,{}),(0,d.jsxs)(g.Zp,{children:[(0,d.jsx)(g.aR,{children:(0,d.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(C.A,{className:"h-5 w-5"}),"Configura\xe7\xf5es Gerais"]})}),(0,d.jsx)(g.Wu,{className:"space-y-4",children:(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)(r.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configura\xe7\xf5es adicionais em desenvolvimento"})]})})]})]})]})})]}),(0,d.jsx)(aT,{open:P,onOpenChange:Q,onExport:async(a,b,c)=>{try{switch(a){case"metrics":await aP(b,c);break;case"kpis":await aX(b,c);break;case"alerts":await aY(b,c);break;case"dashboard":await a7(b,c)}D.o.success(`${a} exportado com sucesso!`),Q(!1)}catch(b){D.o.error(`Erro ao exportar ${a}`)}},isExporting:aO})]})}function a8(){return(0,d.jsx)(aC,{children:(0,d.jsx)(a7,{})})}},12412:a=>{"use strict";a.exports=require("assert")},15616:(a,b,c)=>{"use strict";c.d(b,{T:()=>g});var d=c(60687),e=c(43210),f=c(96241);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...b}));g.displayName="Textarea"},17581:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19169:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},21820:a=>{"use strict";a.exports=require("os")},25366:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},26134:(a,b,c)=>{"use strict";c.d(b,{G$:()=>W,Hs:()=>v,UC:()=>ac,VY:()=>ae,ZL:()=>aa,bL:()=>$,bm:()=>af,hE:()=>ad,hJ:()=>ab,l9:()=>_});var d=c(43210),e=c(70569),f=c(98599),g=c(11273),h=c(96963),i=c(65551),j=c(31355),k=c(32547),l=c(25028),m=c(46059),n=c(14163),o=c(1359),p=c(42247),q=c(63376),r=c(8730),s=c(60687),t="Dialog",[u,v]=(0,g.A)(t),[w,x]=u(t),y=a=>{let{__scopeDialog:b,children:c,open:e,defaultOpen:f,onOpenChange:g,modal:j=!0}=a,k=d.useRef(null),l=d.useRef(null),[m,n]=(0,i.i)({prop:e,defaultProp:f??!1,onChange:g,caller:t});return(0,s.jsx)(w,{scope:b,triggerRef:k,contentRef:l,contentId:(0,h.B)(),titleId:(0,h.B)(),descriptionId:(0,h.B)(),open:m,onOpenChange:n,onOpenToggle:d.useCallback(()=>n(a=>!a),[n]),modal:j,children:c})};y.displayName=t;var z="DialogTrigger",A=d.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,g=x(z,c),h=(0,f.s)(b,g.triggerRef);return(0,s.jsx)(n.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":g.open,"aria-controls":g.contentId,"data-state":U(g.open),...d,ref:h,onClick:(0,e.mK)(a.onClick,g.onOpenToggle)})});A.displayName=z;var B="DialogPortal",[C,D]=u(B,{forceMount:void 0}),E=a=>{let{__scopeDialog:b,forceMount:c,children:e,container:f}=a,g=x(B,b);return(0,s.jsx)(C,{scope:b,forceMount:c,children:d.Children.map(e,a=>(0,s.jsx)(m.C,{present:c||g.open,children:(0,s.jsx)(l.Z,{asChild:!0,container:f,children:a})}))})};E.displayName=B;var F="DialogOverlay",G=d.forwardRef((a,b)=>{let c=D(F,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=x(F,a.__scopeDialog);return f.modal?(0,s.jsx)(m.C,{present:d||f.open,children:(0,s.jsx)(I,{...e,ref:b})}):null});G.displayName=F;var H=(0,r.TL)("DialogOverlay.RemoveScroll"),I=d.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=x(F,c);return(0,s.jsx)(p.A,{as:H,allowPinchZoom:!0,shards:[e.contentRef],children:(0,s.jsx)(n.sG.div,{"data-state":U(e.open),...d,ref:b,style:{pointerEvents:"auto",...d.style}})})}),J="DialogContent",K=d.forwardRef((a,b)=>{let c=D(J,a.__scopeDialog),{forceMount:d=c.forceMount,...e}=a,f=x(J,a.__scopeDialog);return(0,s.jsx)(m.C,{present:d||f.open,children:f.modal?(0,s.jsx)(L,{...e,ref:b}):(0,s.jsx)(M,{...e,ref:b})})});K.displayName=J;var L=d.forwardRef((a,b)=>{let c=x(J,a.__scopeDialog),g=d.useRef(null),h=(0,f.s)(b,c.contentRef,g);return d.useEffect(()=>{let a=g.current;if(a)return(0,q.Eq)(a)},[]),(0,s.jsx)(N,{...a,ref:h,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,e.mK)(a.onCloseAutoFocus,a=>{a.preventDefault(),c.triggerRef.current?.focus()}),onPointerDownOutside:(0,e.mK)(a.onPointerDownOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey;(2===b.button||c)&&a.preventDefault()}),onFocusOutside:(0,e.mK)(a.onFocusOutside,a=>a.preventDefault())})}),M=d.forwardRef((a,b)=>{let c=x(J,a.__scopeDialog),e=d.useRef(!1),f=d.useRef(!1);return(0,s.jsx)(N,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:b=>{a.onCloseAutoFocus?.(b),b.defaultPrevented||(e.current||c.triggerRef.current?.focus(),b.preventDefault()),e.current=!1,f.current=!1},onInteractOutside:b=>{a.onInteractOutside?.(b),b.defaultPrevented||(e.current=!0,"pointerdown"===b.detail.originalEvent.type&&(f.current=!0));let d=b.target;c.triggerRef.current?.contains(d)&&b.preventDefault(),"focusin"===b.detail.originalEvent.type&&f.current&&b.preventDefault()}})}),N=d.forwardRef((a,b)=>{let{__scopeDialog:c,trapFocus:e,onOpenAutoFocus:g,onCloseAutoFocus:h,...i}=a,l=x(J,c),m=d.useRef(null),n=(0,f.s)(b,m);return(0,o.Oh)(),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.n,{asChild:!0,loop:!0,trapped:e,onMountAutoFocus:g,onUnmountAutoFocus:h,children:(0,s.jsx)(j.qW,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":U(l.open),...i,ref:n,onDismiss:()=>l.onOpenChange(!1)})}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y,{titleId:l.titleId}),(0,s.jsx)(Z,{contentRef:m,descriptionId:l.descriptionId})]})]})}),O="DialogTitle",P=d.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=x(O,c);return(0,s.jsx)(n.sG.h2,{id:e.titleId,...d,ref:b})});P.displayName=O;var Q="DialogDescription",R=d.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,e=x(Q,c);return(0,s.jsx)(n.sG.p,{id:e.descriptionId,...d,ref:b})});R.displayName=Q;var S="DialogClose",T=d.forwardRef((a,b)=>{let{__scopeDialog:c,...d}=a,f=x(S,c);return(0,s.jsx)(n.sG.button,{type:"button",...d,ref:b,onClick:(0,e.mK)(a.onClick,()=>f.onOpenChange(!1))})});function U(a){return a?"open":"closed"}T.displayName=S;var V="DialogTitleWarning",[W,X]=(0,g.q)(V,{contentName:J,titleName:O,docsSlug:"dialog"}),Y=({titleId:a})=>{let b=X(V),c=`\`${b.contentName}\` requires a \`${b.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${b.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${b.docsSlug}`;return d.useEffect(()=>{a&&document.getElementById(a)},[c,a]),null},Z=({contentRef:a,descriptionId:b})=>{let c=X("DialogDescriptionWarning"),e=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${c.contentName}}.`;return d.useEffect(()=>{let c=a.current?.getAttribute("aria-describedby");b&&c&&document.getElementById(b)},[e,a,b]),null},$=y,_=A,aa=E,ab=G,ac=K,ad=P,ae=R,af=T},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:a=>{"use strict";a.exports=require("path")},37826:(a,b,c)=>{"use strict";c.d(b,{Cf:()=>m,Es:()=>o,L3:()=>p,c7:()=>n,lG:()=>i,rr:()=>q,zM:()=>j});var d=c(60687),e=c(43210),f=c(26134),g=c(11860),h=c(96241);let i=f.bL,j=f.l9,k=f.ZL;f.bm;let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hJ,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));l.displayName=f.hJ.displayName;let m=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(k,{children:[(0,d.jsx)(l,{}),(0,d.jsxs)(f.UC,{ref:e,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[b,(0,d.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=f.UC.displayName;let n=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});n.displayName="DialogHeader";let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});o.displayName="DialogFooter";let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hE,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));p.displayName=f.hE.displayName;let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.VY,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b}));q.displayName=f.VY.displayName},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},42902:(a,b,c)=>{"use strict";c.d(b,{Switch:()=>h});var d=c(60687),e=c(43210),f=c(90270),g=c(96241);let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.bL,{className:(0,g.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...b,ref:c,children:(0,d.jsx)(f.zi,{className:(0,g.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));h.displayName=f.bL.displayName},45989:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("test-tube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]])},48730:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},51195:(a,b,c)=>{Promise.resolve().then(c.bind(c,4273))},52753:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(65239),e=c(48088),f=c(47220),g=c(81289),h=c(26191),i=c(14823),j=c(71998),k=c(92603),l=c(54649),m=c(32781),n=c(82602),o=c(61268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(26713),u=c(43365),v=c(71454),w=c(67778),x=c(46143),y=c(39105),z=c(38171),A=c(86439),B=c(16133),C=c.n(B),D=c(30893),E=c(52836),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["bi",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,4273)),"C:\\Users\\flavi\\Documents\\Softwares\\DATACLINICA\\frontend\\app\\bi\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,58014)),"C:\\Users\\flavi\\Documents\\Softwares\\DATACLINICA\\frontend\\app\\layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,16133,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,80849,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,29868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,79615,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,H=["C:\\Users\\flavi\\Documents\\Softwares\\DATACLINICA\\frontend\\app\\bi\\page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/bi/page",pathname:"/bi",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",projectDir:""});async function K(a,b,c){var d;let B="/bi/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},58887:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},62369:(a,b,c)=>{"use strict";c.d(b,{b:()=>j});var d=c(43210),e=c(14163),f=c(60687),g="horizontal",h=["horizontal","vertical"],i=d.forwardRef((a,b)=>{var c;let{decorative:d,orientation:i=g,...j}=a,k=(c=i,h.includes(c))?i:g;return(0,f.jsx)(e.sG.div,{"data-orientation":k,...d?{role:"none"}:{"aria-orientation":"vertical"===k?k:void 0,role:"separator"},...j,ref:b})});i.displayName="Separator";var j=i},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},67353:(a,b,c)=>{"use strict";c.d(b,{A:()=>d.A});var d=c(59556)},69327:(a,b,c)=>{"use strict";c.d(b,{F:()=>h});var d=c(60687),e=c(43210),f=c(68123),g=c(96241);let h=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.bL,{ref:e,className:(0,g.cn)("relative overflow-hidden",a),...c,children:[(0,d.jsx)(f.LM,{className:"h-full w-full rounded-[inherit]",children:b}),(0,d.jsx)(i,{}),(0,d.jsx)(f.OK,{})]}));h.displayName=f.bL.displayName;let i=e.forwardRef(({className:a,orientation:b="vertical",...c},e)=>(0,d.jsx)(f.VM,{ref:e,orientation:b,className:(0,g.cn)("flex touch-none select-none transition-colors","vertical"===b&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:(0,d.jsx)(f.lr,{className:"relative flex-1 rounded-full bg-border"})}));i.displayName=f.VM.displayName},74075:a=>{"use strict";a.exports=require("zlib")},76605:(a,b,c)=>{"use strict";c.d(b,{z:()=>N,C:()=>O});var d=c(60687),e=c(43210),f=c(70569),g=c(98599),h=c(11273),i=c(14163),j=c(72942),k=c(65551),l=c(43),m=c(18853),n=c(83721),o=c(46059),p="Radio",[q,r]=(0,h.A)(p),[s,t]=q(p),u=e.forwardRef((a,b)=>{let{__scopeRadio:c,name:h,checked:j=!1,required:k,disabled:l,value:m="on",onCheck:n,form:o,...p}=a,[q,r]=e.useState(null),t=(0,g.s)(b,a=>r(a)),u=e.useRef(!1),v=!q||o||!!q.closest("form");return(0,d.jsxs)(s,{scope:c,checked:j,disabled:l,children:[(0,d.jsx)(i.sG.button,{type:"button",role:"radio","aria-checked":j,"data-state":y(j),"data-disabled":l?"":void 0,disabled:l,value:m,...p,ref:t,onClick:(0,f.mK)(a.onClick,a=>{j||n?.(),v&&(u.current=a.isPropagationStopped(),u.current||a.stopPropagation())})}),v&&(0,d.jsx)(x,{control:q,bubbles:!u.current,name:h,value:m,checked:j,required:k,disabled:l,form:o,style:{transform:"translateX(-100%)"}})]})});u.displayName=p;var v="RadioIndicator",w=e.forwardRef((a,b)=>{let{__scopeRadio:c,forceMount:e,...f}=a,g=t(v,c);return(0,d.jsx)(o.C,{present:e||g.checked,children:(0,d.jsx)(i.sG.span,{"data-state":y(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:b})})});w.displayName=v;var x=e.forwardRef(({__scopeRadio:a,control:b,checked:c,bubbles:f=!0,...h},j)=>{let k=e.useRef(null),l=(0,g.s)(k,j),o=(0,n.Z)(c),p=(0,m.X)(b);return e.useEffect(()=>{let a=k.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==c&&b){let d=new Event("click",{bubbles:f});b.call(a,c),a.dispatchEvent(d)}},[o,c,f]),(0,d.jsx)(i.sG.input,{type:"radio","aria-hidden":!0,defaultChecked:c,...h,tabIndex:-1,ref:l,style:{...h.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function y(a){return a?"checked":"unchecked"}x.displayName="RadioBubbleInput";var z=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],A="RadioGroup",[B,C]=(0,h.A)(A,[j.RG,r]),D=(0,j.RG)(),E=r(),[F,G]=B(A),H=e.forwardRef((a,b)=>{let{__scopeRadioGroup:c,name:e,defaultValue:f,value:g,required:h=!1,disabled:m=!1,orientation:n,dir:o,loop:p=!0,onValueChange:q,...r}=a,s=D(c),t=(0,l.jH)(o),[u,v]=(0,k.i)({prop:g,defaultProp:f??null,onChange:q,caller:A});return(0,d.jsx)(F,{scope:c,name:e,required:h,disabled:m,value:u,onValueChange:v,children:(0,d.jsx)(j.bL,{asChild:!0,...s,orientation:n,dir:t,loop:p,children:(0,d.jsx)(i.sG.div,{role:"radiogroup","aria-required":h,"aria-orientation":n,"data-disabled":m?"":void 0,dir:t,...r,ref:b})})})});H.displayName=A;var I="RadioGroupItem",J=e.forwardRef((a,b)=>{let{__scopeRadioGroup:c,disabled:h,...i}=a,k=G(I,c),l=k.disabled||h,m=D(c),n=E(c),o=e.useRef(null),p=(0,g.s)(b,o),q=k.value===i.value,r=e.useRef(!1);return e.useEffect(()=>{let a=a=>{z.includes(a.key)&&(r.current=!0)},b=()=>r.current=!1;return document.addEventListener("keydown",a),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",b)}},[]),(0,d.jsx)(j.q7,{asChild:!0,...m,focusable:!l,active:q,children:(0,d.jsx)(u,{disabled:l,required:k.required,checked:q,...n,...i,name:k.name,ref:p,onCheck:()=>k.onValueChange(i.value),onKeyDown:(0,f.mK)(a=>{"Enter"===a.key&&a.preventDefault()}),onFocus:(0,f.mK)(i.onFocus,()=>{r.current&&o.current?.click()})})})});J.displayName=I;var K=e.forwardRef((a,b)=>{let{__scopeRadioGroup:c,...e}=a,f=E(c);return(0,d.jsx)(w,{...f,...e,ref:b})});K.displayName="RadioGroupIndicator";var L=c(65822),M=c(96241);let N=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(H,{className:(0,M.cn)("grid gap-2",a),...b,ref:c}));N.displayName=H.displayName;let O=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(J,{ref:c,className:(0,M.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...b,children:(0,d.jsx)(K,{className:"flex items-center justify-center",children:(0,d.jsx)(L.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}));O.displayName=J.displayName},78377:(a,b,c)=>{"use strict";c.d(b,{Separator:()=>h});var d=c(60687),e=c(43210),f=c(62369),g=c(96241);let h=e.forwardRef(({className:a,orientation:b="horizontal",decorative:c=!0,...e},h)=>(0,d.jsx)(f.b,{ref:h,decorative:c,orientation:b,className:(0,g.cn)("shrink-0 bg-border","horizontal"===b?"h-[1px] w-full":"h-full w-[1px]",a),...e}));h.displayName=f.b.displayName},79551:a=>{"use strict";a.exports=require("url")},81630:a=>{"use strict";a.exports=require("http")},82164:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]])},83997:a=>{"use strict";a.exports=require("tty")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},88233:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},89925:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("volume-x",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]])},90270:(a,b,c)=>{"use strict";c.d(b,{bL:()=>w,zi:()=>x});var d=c(43210),e=c(70569),f=c(98599),g=c(11273),h=c(65551),i=c(83721),j=c(18853),k=c(14163),l=c(60687),m="Switch",[n,o]=(0,g.A)(m),[p,q]=n(m),r=d.forwardRef((a,b)=>{let{__scopeSwitch:c,name:g,checked:i,defaultChecked:j,required:n,disabled:o,value:q="on",onCheckedChange:r,form:s,...t}=a,[w,x]=d.useState(null),y=(0,f.s)(b,a=>x(a)),z=d.useRef(!1),A=!w||s||!!w.closest("form"),[B,C]=(0,h.i)({prop:i,defaultProp:j??!1,onChange:r,caller:m});return(0,l.jsxs)(p,{scope:c,checked:B,disabled:o,children:[(0,l.jsx)(k.sG.button,{type:"button",role:"switch","aria-checked":B,"aria-required":n,"data-state":v(B),"data-disabled":o?"":void 0,disabled:o,value:q,...t,ref:y,onClick:(0,e.mK)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,l.jsx)(u,{control:w,bubbles:!z.current,name:g,value:q,checked:B,required:n,disabled:o,form:s,style:{transform:"translateX(-100%)"}})]})});r.displayName=m;var s="SwitchThumb",t=d.forwardRef((a,b)=>{let{__scopeSwitch:c,...d}=a,e=q(s,c);return(0,l.jsx)(k.sG.span,{"data-state":v(e.checked),"data-disabled":e.disabled?"":void 0,...d,ref:b})});t.displayName=s;var u=d.forwardRef(({__scopeSwitch:a,control:b,checked:c,bubbles:e=!0,...g},h)=>{let k=d.useRef(null),m=(0,f.s)(k,h),n=(0,i.Z)(c),o=(0,j.X)(b);return d.useEffect(()=>{let a=k.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==c&&b){let d=new Event("click",{bubbles:e});b.call(a,c),a.dispatchEvent(d)}},[n,c,e]),(0,l.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:c,...g,tabIndex:-1,ref:m,style:{...g.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function v(a){return a?"checked":"unchecked"}u.displayName="SwitchBubbleInput";var w=r,x=t},91391:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]])},93437:(a,b,c)=>{"use strict";c.d(b,{S:()=>i});var d=c(60687),e=c(43210),f=c(40211),g=c(13964),h=c(96241);let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.bL,{ref:c,className:(0,h.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...b,children:(0,d.jsx)(f.C1,{className:(0,h.cn)("flex items-center justify-center text-current"),children:(0,d.jsx)(g.A,{className:"h-4 w-4"})})}));i.displayName=f.bL.displayName},93661:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},94735:a=>{"use strict";a.exports=require("events")},96474:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(62688).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[5586,9365,6019,1423,1060,3721,3594,4097,5064,6876,9471,5650,3969,8772,1640,2814,6205,9030,9321],()=>b(b.s=52753));module.exports=c})();